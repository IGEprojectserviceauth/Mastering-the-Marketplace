{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Mastering the Marketplace","text":"<p>Mastering the Marketplace is an on-demand learning library for building transactable offers on the Microsoft commercial marketplace. The library contains self-paced videos, hands-on labs, and sample code designed to help you get your offers onto the marketplace in less time and with more understanding.</p>  <p>\ud83d\udcc6 Check out Marketplace Office Hours for live webinars on all topics related to publishing your offer to the marketplace. Sessions are presented multiple times per week, and you'll even find links to our full-day Mastering the Marketplace workshops.</p>  <p>\ud83d\udea6 If you aren't sure where to start, have a look at our guided learning paths!</p> <p>\u2709\ufe0f We love hearing from you and it's completely anonymous.</p>  <p>Build Custom SaaS Offers This comprehensive course takes you through all you need to get a SaaS offer up and running. From landing pages to webhooks, this course will help you get your custom SaaS offer up and running in days instead of weeks. </p> <p>Take me to it</p>   <p>The SaaS Accelerator Instead of building your own custom SaaS solution, consider using the SaaS Accelerator. The SaaS accelerator is a turnkey reference implementation of the technical requirements for a SaaS offer which can be installed in 20 minutes.</p> <p>Take me to it</p>   <p>Mastering Partner Center Partner Center is the web portal used to create and publish offers. Learn more about Partner Center in this ever-expanding multi-part course on how to use the portal to publish offers.</p> <p>Take me to it</p>   <p>Mastering Container offers for Kubernetes apps Get from the start line to the finish in creating and publishing a Container offer for K8s app in this hands-on demo heavy course.</p> <p>Take me to it</p>   <p>Virtual Machine Offers Virtual machine offers enable you to install your proprietary software on a virtual machine and license it with the virtual machine itself. If you are considering using a virtual machine offer, this thorough course and hands-on labs will take you from start to finish in getting your offer up and running. </p> <p>Take me to it</p>   <p>Azure Managed Applications Offers With a powerful ARM based deployment model, Azure Managed Applications are popular among those who want to deploy resources into the customer's environment, but still maintain control of those resources.</p> <p>Take me to it</p>   <p>Mastering Microsoft Teams Offers Learn how to build transactable Microsoft Teams applications using SaaS offers as the underlying application. This unique learning experience is powered by Teams App Camp!</p> <p>Take me to it</p>   <p>You may find that you need to clone this repository to perform the labs. Feel free to clone or fork and we are always happy to take PRs!</p> <p>View on GitHub  </p>"},{"location":"ama/","title":"Index","text":"<p>Home</p>"},{"location":"ama/#mastering-azure-managed-application-offers","title":"Mastering Azure Managed Application Offers","text":"<p>This course is designed to help you decrease your onboarding when building an Azure Managed Application offer. The content is comprised of recordings of a virtual workshop and are divided into small digestible modules for easy consumption. Also included are several hands-on labs to turn your knowledge into skills.</p> <p>\u2709\ufe0f Let us know what you need from this content, or tell us how we're doing.</p> <p>\ud83e\uddea Grow your skills with the hands-on labs.</p> <p>The slides for this course, which are used in the following content, are here.</p>   <ul> <li>Course Introduction</li> <li>Managed Applications Overview</li> <li>Azure Managed Applications Overview</li> <li>Partner Center with Azure Managed Applications Overview</li> <li>Configuring Partner Center for Azure Managed Applications - Demo</li> <li>Azure Managed Application Deployment Package Overview</li> <li>Working with a Azure Managed Application Deployment Package - Demo</li> <li>Integrating Virtual Machine Offers into Azure Managed Applications</li> <li>Purchasing an Azure Managed Application \u2013 Demo</li> <li>Managing My Purchased Azure Managed Applications \u2013 Demo</li> <li>Managing My Customer\u2019s Azure Managed Applications Overview</li> <li>Managing My Customer\u2019s Azure Managed Applications \u2013 Demo</li> <li>Metered Billing for Azure Managed Applications Overview</li> <li>Metered Billing for Azure Managed Applications \u2013 Demo</li> <li>Advanced Deployment Scenarios for Azure Managed Applications</li> <li>Hands-on labs</li> </ul>"},{"location":"ama/#course-introduction","title":"Course Introduction","text":"<p>Video</p> <p>This module sets the stage for all the others that follow by providing a quick introduction to the course. See what the course will offer in various modules.</p>"},{"location":"ama/#managed-applications-overview","title":"Managed Applications Overview","text":"<p>Video</p> <p>Solution Template offers and Azure Managed Application offers are very similar, but there is an important difference. Learn about the two types of managed applications in this module detailing the differences.</p>"},{"location":"ama/#azure-managed-applications-overview","title":"Azure Managed Applications Overview","text":"<p>Video</p> <p>Azure Managed Applications are the transactable Managed App offer type. Get a walkthrough of Azure Managed Applications including their general architecture and usage.</p>"},{"location":"ama/#partner-center-with-azure-managed-applications-overview","title":"Partner Center with Azure Managed Applications Overview","text":"<p>Video</p> <p>Partner Center is the portal publishers use to create, configure, publish, and monitor their offers in the Microsoft Marketplace. This overview takes you through Partner Center for Azure Managed Applications.</p>"},{"location":"ama/#configuring-partner-center-for-azure-managed-applications-demo","title":"Configuring Partner Center for Azure Managed Applications - Demo","text":"<p>Video</p> <p>Understanding Partner Center, the publisher's portal, is key to creating great offers. This demo walks through setting up a Partner Center offer for an Azure Managed Application.</p>"},{"location":"ama/#azure-managed-application-deployment-package-overview","title":"Azure Managed Application Deployment Package Overview","text":"<p>Video</p> <p>The deployment package for Azure Managed Applications is the definition of the application itself. Learn about its components and their role in this quick overview.</p>"},{"location":"ama/#working-with-a-azure-managed-application-deployment-package-demo","title":"Working with a Azure Managed Application Deployment Package - Demo","text":"<p>Video</p> <p>This demo walks through working with Azure Managed Application deployment packages. Learn about the usage and components of the ARM template, <code>mainTemplate.json</code>, and how to work with <code>createUiDefinition.json</code> to create great install experiences.</p>"},{"location":"ama/#integrating-virtual-machine-offers-into-azure-managed-applications","title":"Integrating Virtual Machine Offers into Azure Managed Applications","text":"<p>Video</p> <p>Deploying a custom virtual machine is a common need when working with Managed Apps. Get an overview of how to integrate a custom Virtual Machine offer into an Azure Managed Application deployment package.</p>"},{"location":"ama/#purchasing-an-azure-managed-application-demo","title":"Purchasing an Azure Managed Application \u2013 Demo","text":"<p>Video</p> <p>See the purchasing process of an Azure Managed Application from the customer\u2019s point of view. This module is often helpful for customers looking to familiarize themselves with the purchase process.</p>"},{"location":"ama/#managing-my-purchased-azure-managed-applications-demo","title":"Managing My Purchased Azure Managed Applications \u2013 Demo","text":"<p>Video</p> <p>Once a customer has purchased one or more Azure Managed Apps, they may need to manage those subscriptions. See the tools and techniques customers have through the Azure portal for managing their Azure Managed Application subscriptions.</p>"},{"location":"ama/#managing-my-customers-azure-managed-applications-overview","title":"Managing My Customer\u2019s Azure Managed Applications Overview","text":"<p>Video</p> <p>Managing Azure Managed Application customer deployments is the responsibility of the publisher. See the tools techniques publishers use to do this easily and effectively through the Azure portal as well as getting a walkthrough of how to use them.</p>"},{"location":"ama/#managing-my-customers-azure-managed-applications-demo","title":"Managing My Customer\u2019s Azure Managed Applications \u2013 Demo","text":"<p>Video</p> <p>Once deployed, Azure Managed Applications are managed and maintained by the publisher. This module shows the Azure portal-based tools and practices publishers use to manage their customer\u2019s environments.</p>"},{"location":"ama/#metered-billing-for-azure-managed-applications-overview","title":"Metered Billing for Azure Managed Applications Overview","text":"<p>Video</p> <p>Billing for usage-based consumption is a requirement for many Azure Managed Applications. Get a walkthrough of metered billing and an architectural overview of how it works.</p>"},{"location":"ama/#metered-billing-for-azure-managed-applications-demo","title":"Metered Billing for Azure Managed Applications \u2013 Demo","text":"<p>Video</p> <p>See metered billing in action at the REST API level. This module shows metered billing API interaction through Postman.</p>"},{"location":"ama/#advanced-deployment-scenarios-for-azure-managed-applications","title":"Advanced Deployment Scenarios for Azure Managed Applications","text":"<p>Video</p> <p>This brief module covers a few advanced scenarios for Azure Managed Application deployments including containers and IoT integration.</p>"},{"location":"ama/#hands-on-labs","title":"Hands-on labs","text":"<p>These hand on labs build on top of one another, so progress through them in order to get a fully functional Azure Managed Application published and working for a test environment.</p>"},{"location":"ama/#prerequisites","title":"Prerequisites","text":"<ol> <li>Azure subscription that can create resources</li> <li>A Partner Center Account</li> <li>VS Code or other text editor</li> </ol>"},{"location":"ama/#getting-started","title":"Getting started","text":"<p>Clone this repository to your local machine. You will need some artifacts from the lab folders to complete the labs.</p>"},{"location":"ama/#labs","title":"Labs \ud83e\uddea","text":"<ol> <li>Lab 1 - Publishing an Azure Managed Application Offer in Partner Center</li> <li>Lab 2 - The Managed Application Deployment Package</li> <li>Lab 3 - Purchasing an Azure Managed Application</li> <li>Lab 4 - Administering Your Purchased Managed Applications</li> <li>Lab 5 - Administering Your Customer\u2019s Managed Applications</li> </ol>"},{"location":"ama/labs/lab-1-partner-center/","title":"Index","text":"<p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-1-partner-center/#lab-1-publishing-an-azure-managed-application-offer-in-partner-center","title":"Lab 1 - Publishing an Azure Managed Application Offer in Partner Center","text":"<p>In this lab you will configure and publish an Azure Application offer in the Azure Marketplace. To do this, you must have an account in Partner Center, the portal for marketplace publishers. You must also have an Azure account where you can create resources.</p>"},{"location":"ama/labs/lab-1-partner-center/#exercise-1-create-the-offer","title":"Exercise 1 - Create the offer","text":"<p>In this exercise you will create an Azure application offer.</p> <ol> <li>Log in to Partner Center.</li> <li>Go to the Marketplace offers page.</li> <li>Select the New offer dropdown and choose Azure application for the type of offer you will create.</li> <li>You will be prompted for an Offer ID and Offer alias. Use the following values.<ol> <li>Offer ID: ama-workshop-01</li> <li>Offer alias: AMA Workshop 1</li> <li>Click the Create button. Your new offer is created and you are redirected to the Offer setup page.</li> </ol> </li> </ol> <p>You now have an offer to work with. Proceed to the next exercise.</p>"},{"location":"ama/labs/lab-1-partner-center/#exercise-2-offer-setup","title":"Exercise 2 - Offer setup","text":"<p>In this exercise you will set up a leads management section and connect it to a CRM.</p> <p>Navigate the to Offer setup page via the left hand navigation.</p>"},{"location":"ama/labs/lab-1-partner-center/#crm-leads-part-1","title":"CRM leads - Part 1","text":"<p>In this section you will fill our the Offer setup portion of your offer. You will connect your offer to a CRM so you collect leads of people using your solution, or interested in it.</p> <ol> <li>Navigate to the Offer setup page via the left hand navigation.</li> <li>Scroll down to the Customer leads section.</li> <li>Click the Connect link.</li> <li>Click the Lead destination dropdown and note you may integrate your lead collection with several types of CRMs. In this exercise you will connect to an Azure table, so select that option from the dropdown.</li> <li>Put in your email address.</li> </ol> <p>You must create the Azure table storage account in the Azure portal to connect to for lead management.</p>"},{"location":"ama/labs/lab-1-partner-center/#create-the-data-storage-account-in-the-azure-portal","title":"Create the Data storage account in the Azure Portal","text":"<p>In this section you will create an Azure Data Storage account using the Azure portal.</p> <ol> <li>Log in to the Azure portal.</li> <li>Click + Create a resource in the left-most side menu. The Create a resource page appears.</li> <li>In the search box, type Storage account.</li> <li>Select Storage account from the resulting dropdown.</li> <li>On the Storage account page, click the Create button. You should now be on the Create a storage account page.</li> <li>Under the Project details section, select Create new for your resource group.</li> <li>Create a new Resource group named ama-workshop-leads.</li> <li>For storage account name, type in a string that will be unique across azure. Try something like amaworshopleads002, where 002 is a random number between 001 and 999.</li> <li>For the Region select a region near you.</li> <li>Under Redundancy, select Locally-redundant storage (LRS). This is the least expensive storage account type.</li> <li>Select the Review and create at the bottom of the page.You are taken to the final review page and a message should appear at the top of the page, Validation passed.</li> <li>Select the Create button.</li> </ol>"},{"location":"ama/labs/lab-1-partner-center/#crm-leads-part-2","title":"CRM leads - Part 2","text":"<p>In this section you will finish configuring leads management by connecting it to the new Data Storage account you just created.</p> <ol> <li>In the Azure portal, navigate to the Data Storage account you just created.</li> <li>In the left hand menu under Security + networking select Access keys.</li> <li>Near the top of the Access keys screen, click the Show keys link. This makes the hidden keys visible.</li> <li>Under key 1 copy the Connection string into your clipboard.</li> <li>Return to the Partner Center browser tab and paste the connection string in the Storage account connection string text box.</li> <li>Click the Validate link. You should see a positive confirmation that the connection string worked.</li> <li>Click the Connect button.</li> <li>Click the Save draft button at the bottom of the page.</li> </ol> <p>You have completed the Offer setup screen. Proceed to the next exercise.</p>"},{"location":"ama/labs/lab-1-partner-center/#exercise-3-properties","title":"Exercise 3 - Properties","text":"<p>In this exercise you will fill out the Properties section of your offer. </p> <p>Navigate the to Properties page via the left hand navigation.</p>"},{"location":"ama/labs/lab-1-partner-center/#categories","title":"Categories","text":"<p>You must select a category for your Managed App. You want your app to show up in the Azure Marketplace, so you will select a category that will ensure it will appear there.</p> <ol> <li>Click the Categories link.</li> <li>Under the Primary category dropdown, select Developer tools.</li> <li>Under the Subcategory dropdown, select Developer Service.</li> </ol> <p>You have selected a category for your application. Note you could select one more, but that's not needed for this lab.</p>"},{"location":"ama/labs/lab-1-partner-center/#legal","title":"Legal","text":"<ol> <li>In the Legal section select the checkbox next to \"Use the Standard Contract for Microsoft\u2019s commercial marketplace?\".</li> <li>A dialog box appears. Click the Accept button.</li> <li>Click the Save draft button at the bottom of the page.</li> </ol> <p>You have completed the Properties screen. Proceed to the next exercise.</p>"},{"location":"ama/labs/lab-1-partner-center/#exercise-4-offer-listing","title":"Exercise 4 - Offer listing","text":"<p>In this exercise, you fill out the Offer listing page.</p> <ol> <li>In the left-hand menu, select Offer listing. You are taken to the Offer listing page.</li> <li>In the Search results summary textbox, enter \"AMA Workshop 1 search results summary\".</li> <li>In the Short description text area, enter \"AMA Workshop 1 short description\".</li> <li>In the Description text area, enter \"AMA Workshop 1 description\".</li> <li>In the Search keywords section, you may enter up to 3 keywords.</li> <li>For the Privacy policy link textbox, you may use Microsoft's privacy policy for this workshop. Enter \"https://privacy.microsoft.com/en-us/privacystatement\". This is for lab purposes. Do not use Microsoft's privacy policy on real offers.</li> <li>Scroll down to the Support contact section and enter the required information. For the field Support website for Azure Global customers, enter the link <code>https://partner.microsoft.com/en-US/support/v2/</code>.  Again, this is for lab purposes only, not to be used in a live offer. This would be a link to a page on your own site.</li> <li>Scroll down to the Engineering contact information section.</li> <li>Enter the required information.</li> <li>Scroll down to the Marketplace media &gt; Logos section.</li> </ol> <p>Here you will need to upload two logos that must be of the exact right size. Examples are provided for you in this directory. Upload these images. If you have cloned this repository they will already be on your local drive.</p> <ol> <li>Upload the two images.</li> <li>For the screenshot, click the Add image caption link. Enter whatever you like for a caption.</li> <li>Click the OK button.</li> <li>Click the Save draft button at the bottom of the page.</li> </ol> <p>You have completed the Offer listing screen. Proceed to the next exercise.</p>"},{"location":"ama/labs/lab-1-partner-center/#exercise-5-preview-audience","title":"Exercise 5 - Preview audience","text":"<p>In this exercise, you will add your subscription id to the list of subscriptions that may access this offer before it is live. This is to provide access to your test team and anyone else who would like to preview the offer before it goes live. In this case, you will enter the subscription ID you are using in this workshop.</p> <ol> <li>In the Azure portal, find your subscription ID. If you aren't sure how to do this take the following steps.<ol> <li>In the Azure portal, in the search box at the top of the screen, enter the word, \"Subscriptions.\"</li> <li>Select the Subscriptions icon in the dropdown.</li> <li>On the Subscriptions page, click the link to the subscription you are using.</li> <li>On the Subscription page, copy the Subscription ID into your clipboard.</li> </ol> </li> <li>In the Partner Center portal, Preview audience page, enter your subscription ID.</li> <li>Provide a brief description for this subscription.</li> </ol> <p>You have completed the Preview audience screen. Proceed to the next exercise.</p>"},{"location":"ama/labs/lab-1-partner-center/#exercise-6-resell-through-csps","title":"Exercise 6 - Resell through CSPs","text":"<p>In this exercise, you will indicate that your solution will not be re-sold by Cloud Solution Providers.</p> <ol> <li>From the list of radio buttons, select No partners in the CSP program.</li> <li>Click the Save draft button at the bottom of the page.</li> </ol> <p>You have completed the Resell through CSPs screen. Proceed to the next exercise.</p>"},{"location":"ama/labs/lab-1-partner-center/#exercise-6-adding-plans","title":"Exercise 6 - Adding plans","text":"<p>Every offer must include at least one plan. In this exercise, you will add two plans to your offer.</p>"},{"location":"ama/labs/lab-1-partner-center/#creating-a-plan","title":"Creating a plan","text":"<ol> <li>In the left-hand menu, select Plan overview.</li> <li>At the top of the page, click Create new plan.</li> <li>Enter a Plan ID of \"silver-plan\".</li> <li>For Plan name enter \"Silver\".</li> <li>Click the Create button.</li> </ol>"},{"location":"ama/labs/lab-1-partner-center/#plan-setup","title":"Plan setup","text":"<ol> <li>On the Plan setup page, under the Plan type section, select the dropdown item, Managed application.</li> <li>Click the Save Draft button at the bottom of the screen.</li> </ol>"},{"location":"ama/labs/lab-1-partner-center/#plan-listing","title":"Plan listing","text":"<ol> <li>Click the Plan listing menu item on the left. </li> <li>For Plan summary, enter \"Silver plan summary\".</li> <li>For the Plan description, enter \"Silver plan description\".</li> <li>Click the Save Draft button at the bottom of the screen.</li> </ol>"},{"location":"ama/labs/lab-1-partner-center/#pricing-and-availability","title":"Pricing and availability","text":"<ol> <li>Click the Pricing and availability menu item on the left. </li> <li>In the Markets section, click the Edit markets link. you must select at least one market in which your plan will be available for purchase. Most users will select \"United States.\"</li> <li>Select a market.</li> <li>Click the Save button.</li> </ol>  <p>\u26a0\ufe0f In the Pricing section you will enter prices of $0 because you don't want this workshop to cost you money when you buy your offer later.</p>  <ul> <li>For Price, enter 0.</li> </ul> <p>In this section, we are going to have you do something that will be explained later in the day. It needs to be done upon plan creation, so you will do it now.</p> <ol> <li>Under the Marketplace Metering Service dimensions section, click Add a Custom Meter Dimension.<ol> <li>The Enabled checkbox is selected. </li> <li>For ID, enter \"scan-1-page\".</li> <li>For Display name, enter \"Scan a page\".</li> <li>For Unit of measure, enter \"Scanned page\".</li> <li>For Price Per unit, enter 0.0</li> <li>For Monthly included in price, enter 1000.</li> </ol> </li> <li>Click Add another Dimension.<ol> <li>The Enabled checkbox is selected. </li> <li>For ID, enter \"write-to-emr\".</li> <li>For Display name, enter \"EMR Write\".</li> <li>For Unit of measure, enter \"EMR Write\".</li> <li>For Price Per unit, enter 0.0</li> <li>For Monthly included in price, enter 500.</li> </ol> </li> </ol> <p>Your dimensions should look like this.</p>    Enabled ID Display Name Unit of Measure Price per unit in USD Monthly quantity included in base     Checked scan-1-page Scan a page Scanned page 0.0 1000   Checked write-to-emr EMR Write EMR Write 0.0 500    <p>Click the Save Draft button at the bottom of the screen.</p>"},{"location":"ama/labs/lab-1-partner-center/#technical-configuration","title":"Technical configuration","text":"<p>In this section, you specify details about your plan needed to create the application at deployment time.</p> <ol> <li>Under Package details, enter \"0.0.1\" for version.</li> <li>For Package file (.zip) you will upload a ZIP file containing the deployment package needed. You may drag an drop or click to brose to the ZIP file.<ol> <li>There is a file in the <code>lab-1-partner-center\\assets</code> assets folder named <code>silver-plan-deployment-package.zip</code>. Upload it.</li> </ol> </li> <li>Navigate to the Public Azure section near the bottom of the screen.<ol> <li>For the Azure Active Directory tenant ID section, enter your Tenant ID from the Azure portal. If you aren't sure how to find your Tenant ID, click here and then come back to this section when you are done.</li> <li>For the Authorizations section, under Principal ID, enter the ID of your own account from the Azure portal. If you aren't sure how to find your account ID, click here and come back to this section when you are done.</li> <li>For Role definition, select Owner.</li> </ol> </li> <li>Click the Save draft button at the bottom of the screen.</li> </ol>"},{"location":"ama/labs/lab-1-partner-center/#check-your-offer","title":"Check your offer","text":"<ol> <li>At the bottom of the screen, click the Review and publish button.</li> <li>All circles to the right should be green with a check box in them. If any are grey, fix that section and come back to Review and publish changes.</li> </ol>  <p>\ud83d\uded1 DO NOT publish your offer yet. It still needs more configuration, which you'll do in a future lab.</p>"},{"location":"ama/labs/lab-1-partner-center/#conclusion","title":"Conclusion","text":"<p>Congratulations, you have completed Lab 1, the longest lab in the workshop. Other labs will build upon what you have done here in this lab. </p> <p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-1-partner-center/#appendix","title":"Appendix","text":""},{"location":"ama/labs/lab-1-partner-center/#finding-your-tenant-id","title":"Finding your Tenant ID","text":"<ol> <li>Open the Azure portal.</li> <li>In the search box at the top of the page, type Tenant.</li> <li>Select Tenant properties from the drop down menu.</li> <li>Find the Tenant ID field and copy it to your clipboard.</li> </ol>"},{"location":"ama/labs/lab-1-partner-center/#finding-your-user-account-id","title":"Finding your user account ID","text":"<ol> <li>Open the Azure portal.</li> <li>In the search box at the top of the page, type Users.</li> <li>Select Users from the dropdown menu.</li> <li>Search for your user account and click on it.</li> <li>Find the Object ID and copy it to your clipboard.</li> </ol>"},{"location":"ama/labs/lab-2-deployment-package/","title":"Index","text":"<p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-2-deployment-package/#lab-2-the-managed-application-deployment-package","title":"Lab 2 - The Managed Application Deployment Package","text":"<p>In this lab, you will edit the artifacts that go into a an Azure Managed Application deployment package. You will run your artifacts through a validation process and package them for use in deployment. Finally, you will create a new plan for your existing offer from Lab 1 and publish your offer.</p>"},{"location":"ama/labs/lab-2-deployment-package/#exercise-1-arm-ttk","title":"Exercise 1 - ARM TTK","text":"<p>This exercise introduces Azure Resource Manager Template Toolkit (ARM TTK), a tool that runs in PowerShell and validates the artifacts in your deployment package. The ARM TTK tool runs tests that ensure valid <code>mainTemplate.json</code> and <code>createUiDefinition</code> files.</p> <p>You will clone the ARM TTK repository and bring the code to your local machine where it can be executed using PowerShell. </p>  <p>If you are not on Windows, you may download PowerShell for your platform.</p> <ul> <li>Linux</li> <li>macOS</li> </ul>  <ol> <li>Clone the ARM TTK repository from GitHub.</li> <li>Set up ARM TTK to run on your machine by executing the following commands in a PowerShell terminal.</li> </ol> <pre><code>cd \"&lt;PATH TO ARM TTK REPO&gt;\\arm-ttk\\arm-ttk\"\n\nImport-Module .\\arm-ttk.psd1\n</code></pre> <p>From the same directory you may execute the ARM TTK tool as shown below. Note the path is looking at the <code>end</code> folder, which contains the solution to this lab.</p> <pre><code>$AMAPackage = \"&lt;PATH TO AMA-WORKSHOP&gt;\\ama-workshop\\lab-2-deployment-package\\assets\\end\\\"\n\nTest-AzTemplate -TemplatePath $AMAPackage\n</code></pre> <p>See that test pass. The output from ARM TTK should look something like this.</p> <pre><code>Validating end\\createUiDefinition.json\n  AllFiles\n    [+] JSONFiles Should Be Valid (61 ms)\n  CreateUIDefinition\n    [+] Allowed Values Should Actually Be Allowed (190 ms)\n\n    ...\n\nValidating end\\mainTemplate.json\n  deploymentTemplate\n    [+] adminUsername Should Not Be A Literal (90 ms)\n    [+] apiVersions Should Be Recent In Reference Functions (171 ms)\n\n    ...\n</code></pre>  <p>You will use the ARM TTK tool to check the status of your own package files several times during this lab. Because of this, do not close the terminal window between steps.</p>  <p>Set up ARM TTK to point at the <code>begin</code> directory for validation as shown below.</p> <pre><code> $AMAPackage = \"&lt;PATH TO AMA-WORKSHOP&gt;\\ama-workshop\\lab-2-deployment-package\\assets\\begin\\\"\n</code></pre> <p>Run the tests as shown below. They should all pass although the <code>mainTemplate.json</code> file in the <code>begin</code> directory is basically a skeleton you will build on.</p> <pre><code> Test-AzTemplate -TemplatePath $AMAPackage\n</code></pre>"},{"location":"ama/labs/lab-2-deployment-package/#exercise-2-maintemplatejson","title":"Exercise 2 - <code>mainTemplate.json</code>","text":"<p>Here you will build out a ARM template that deploys a virtual machine along with some other Azure services.</p> <p>The basic outline of a <code>mainTemplate.json</code> ARM template looks like this. </p> <pre><code>{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n  \"contentVersion\": \"1.0.0.0\",\n  \"parameters\": {},\n  \"variables\": {},\n  \"resources\": [],\n  \"outputs\": {}\n}\n</code></pre> <p>There are several parameters the ARM template expects. You will fill them in and take note of the different types of parameters.</p> <ol> <li>Open the mainTemplate.json file in a text editor like VS Code.</li> <li>Add the following JSON inside the parameters section of the ARM template.</li> </ol> <pre><code>\"adminUsername\": {\n  \"type\": \"string\",\n  \"metadata\": {\n    \"description\": \"Username for the Virtual Machine.\"\n  }\n},\n\"adminPassword\": {\n  \"type\": \"securestring\",\n  \"metadata\": {\n    \"description\": \"Password for the Virtual Machine.\"\n  }\n},\n\"storageAccountName\": {\n  \"type\": \"string\"\n},\n\"storageAccountType\": {\n  \"type\": \"string\"\n},\n\"windowsOSVersion\": {\n  \"type\": \"string\",\n  \"defaultValue\": \"2019-datacenter-gensecond\",\n  \"allowedValues\": [\n    \"2019-datacenter-gensecond\",\n    \"2016-datacenter-gensecond\"\n  ],\n  \"metadata\": {\n    \"description\": \"The Windows version for the VM. This will pick a fully patched image of this given Windows version.\"\n  }\n},\n\"vmSize\": {\n  \"type\": \"string\",\n  \"defaultValue\": \"Standard_D2s_V3\",\n  \"metadata\": {\n    \"description\": \"Size of the virtual machine.\"\n  }\n},\n\"vmName\": {\n  \"type\": \"string\",\n  \"defaultValue\": \"amaSimpleVM\",\n  \"metadata\": {\n    \"description\": \"Name of the virtual machine.\"\n  }\n},\n\"location\": {\n  \"type\": \"string\",\n  \"defaultValue\": \"[resourceGroup().location]\",\n  \"metadata\": {\n    \"description\": \"Location for all resources.\"\n  }\n}\n</code></pre>  <p>Take a moment to review the <code>type</code> attribute of each parameter. See that you can pass in multiple data types.</p>  <p>Run ARM TTK. The following test fails.</p> <pre><code>Parameters Must Be Referenced\n</code></pre> <p>Make the variables section look like the following JSON.</p> <pre><code>\"variables\": {\n  \"itemPrefix\": \"[concat('ama', uniqueString(resourceGroup().id))]\",\n  \"addressPrefix\": \"10.0.0.0/16\",\n  \"domainNameLabel\": \"[concat(variables('itemPrefix'), '-dnl')]\",\n  \"networkSecurityGroupName\": \"[concat(variables('itemPrefix'), '-nsg')]\",\n  \"nicName\": \"[concat(variables('itemPrefix'), '-nic')]\",\n  \"publicIPAddressName\": \"[concat(variables('itemPrefix'), '-ip')]\",\n  \"storageAccountName\": \"[concat(parameters('storageAccountName'), uniqueString('storage'))]\",\n  \"subnetName\": \"Subnet\",\n  \"subnetPrefix\": \"10.0.0.0/24\",\n  \"subnetRef\": \"[resourceId('Microsoft.Network/virtualNetworks/subnets', variables('virtualNetworkName'), variables('subnetName'))]\",\n  \"virtualNetworkName\": \"[concat(variables('itemPrefix'), '-vnet')]\"\n}\n</code></pre> <p>Run ARM TTK.</p> <p>Now there are parameters and variables that are not being referenced. This means they are not being referenced in the <code>resources</code> section which defines the actual resources to be created by the ARM template.</p>  <p>\ud83d\uddd2\ufe0fNote the <code>itemPrefix</code> parameter is not reported as an unreferenced parameter since it being used by several other variables.</p>  <p>Add the following resource definitions to the <code>resources[]</code> section.</p> <pre><code>{\n  \"type\": \"Microsoft.Storage/storageAccounts\",\n  \"apiVersion\": \"2018-02-01\",\n  \"name\": \"[variables('storageAccountName')]\",\n  \"location\": \"[parameters('location')]\",\n  \"sku\": {\n    \"name\": \"[parameters('storageAccountType')]\"\n  },\n  \"kind\": \"Storage\",\n  \"properties\": {}\n},\n{\n  \"type\": \"Microsoft.Network/publicIPAddresses\",\n  \"apiVersion\": \"2020-06-01\",\n  \"name\": \"[variables('publicIPAddressName')]\",\n  \"location\": \"[parameters('location')]\",\n  \"properties\": {\n    \"publicIPAllocationMethod\": \"Dynamic\",\n    \"dnsSettings\": {\n      \"domainNameLabel\": \"[variables('domainNameLabel')]\"\n    }\n  }\n},\n{\n  \"comments\": \"Default Network Security Group for template\",\n  \"type\": \"Microsoft.Network/networkSecurityGroups\",\n  \"apiVersion\": \"2021-08-01\",\n  \"name\": \"[variables('networkSecurityGroupName')]\",\n  \"location\": \"[parameters('location')]\",\n  \"properties\": {\n    \"securityRules\": [\n      {\n        \"name\": \"default-allow-3389\",\n        \"properties\": {\n          \"priority\": 1000,\n          \"access\": \"Allow\",\n          \"direction\": \"Inbound\",\n          \"destinationPortRange\": \"3389\",\n          \"protocol\": \"Tcp\",\n          \"sourcePortRange\": \"*\",\n          \"sourceAddressPrefix\": \"*\",\n          \"destinationAddressPrefix\": \"*\"\n        }\n      }\n    ]\n  }\n},\n{\n  \"type\": \"Microsoft.Network/virtualNetworks\",\n  \"apiVersion\": \"2020-06-01\",\n  \"name\": \"[variables('virtualNetworkName')]\",\n  \"location\": \"[parameters('location')]\",\n  \"dependsOn\": [\n    \"[resourceId('Microsoft.Network/networkSecurityGroups', variables('networkSecurityGroupName'))]\"\n  ],\n  \"properties\": {\n    \"addressSpace\": {\n      \"addressPrefixes\": [ \"[variables('addressPrefix')]\" ]\n    },\n    \"subnets\": [\n      {\n        \"name\": \"[variables('subnetName')]\",\n        \"properties\": {\n          \"addressPrefix\": \"[variables('subnetPrefix')]\",\n          \"networkSecurityGroup\": {\n            \"id\": \"[resourceId('Microsoft.Network/networkSecurityGroups', variables('networkSecurityGroupName'))]\"\n          }\n        }\n      }\n    ]\n  }\n},\n{\n  \"type\": \"Microsoft.Network/networkInterfaces\",\n  \"apiVersion\": \"2020-06-01\",\n  \"name\": \"[variables('nicName')]\",\n  \"location\": \"[parameters('location')]\",\n  \"dependsOn\": [\n    \"[resourceId('Microsoft.Network/publicIPAddresses/', variables('publicIPAddressName'))]\",\n    \"[resourceId('Microsoft.Network/virtualNetworks/', variables('virtualNetworkName'))]\"\n  ],\n  \"properties\": {\n    \"ipConfigurations\": [\n      {\n        \"name\": \"ipconfig1\",\n        \"properties\": {\n          \"privateIPAllocationMethod\": \"Dynamic\",\n          \"publicIPAddress\": {\n            \"id\": \"[resourceId('Microsoft.Network/publicIPAddresses',variables('publicIPAddressName'))]\"\n          },\n          \"subnet\": {\n            \"id\": \"[variables('subnetRef')]\"\n          }\n        }\n      }\n    ]\n  }\n},\n{\n  \"type\": \"Microsoft.Compute/virtualMachines\",\n  \"apiVersion\": \"2020-06-01\",\n  \"name\": \"[parameters('vmName')]\",\n  \"location\": \"[parameters('location')]\",\n  \"identity\": {\n    \"type\": \"systemAssigned\"\n  },\n  \"dependsOn\": [\n    \"[resourceId('Microsoft.Storage/storageAccounts/', variables('storageAccountName'))]\",\n    \"[resourceId('Microsoft.Network/networkInterfaces/', variables('nicName'))]\"\n  ],\n  \"properties\": {\n    \"hardwareProfile\": {\n      \"vmSize\": \"[parameters('vmSize')]\"\n    },\n    \"osProfile\": {\n      \"computerName\": \"[parameters('vmName')]\",\n      \"adminUsername\": \"[parameters('adminUsername')]\",\n      \"adminPassword\": \"[parameters('adminPassword')]\"\n    },\n    \"storageProfile\": {\n      \"imageReference\": {\n        \"publisher\": \"MicrosoftWindowsServer\",\n        \"offer\": \"WindowsServer\",\n        \"sku\": \"[parameters('windowsOSVersion')]\",\n        \"version\": \"latest\"\n      },\n      \"osDisk\": {\n        \"createOption\": \"FromImage\"\n      },\n      \"dataDisks\": [\n        {\n          \"diskSizeGB\": 1023,\n          \"lun\": 0,\n          \"createOption\": \"Empty\"\n        }\n      ]\n    },\n    \"networkProfile\": {\n      \"networkInterfaces\": [\n        {\n          \"id\": \"[resourceId('Microsoft.Network/networkInterfaces',variables('nicName'))]\"\n        }\n      ]\n    },\n    \"diagnosticsProfile\": {\n      \"bootDiagnostics\": {\n        \"enabled\": true,\n        \"storageUri\": \"[reference(resourceId('Microsoft.Storage/storageAccounts/', variables('storageAccountName'))).primaryEndpoints.blob]\"\n      }\n    }\n  }\n}\n</code></pre>  <p>Take moment to examine the different resources that will be created by this ARM template.</p>  <ol> <li> <p>Run ARM TTK. One test should fail.</p>  <p><code>terminal apiVersions Should Be Recent</code></p>  </li> <li> <p>The resource type of <code>Microsoft.Storage/storageAccounts</code> has an old API version. Fix this problem as recommended by ARM TTK.</p> </li> <li> <p>Ensure ARM TTK passes with no errors.</p> </li> </ol> <p>Your ARM template is complete.</p>"},{"location":"ama/labs/lab-2-deployment-package/#exercise-4-createuidefinitionjson","title":"Exercise 4 - <code>createUiDefinition.json</code>","text":"<p>This exercise will take you through creating the file that defines the user experience for installing your solution via the <code>mainTemplate.json</code> created in Exercise 3.</p> <p>The role of the <code>createUiDefinition.json</code> file is to do the following.    1. Provide parameters to the <code>mainTemplate.json</code> ARM template.    2. Provide an installation user experience for the customer.</p> <p>The main components of a <code>createUiDefinition.json</code> file looks like this.</p> <pre><code>{\n    \"$schema\": \"https://schema.management.azure.com/schemas/0.1.2-preview/CreateUIDefinition.MultiVm.json#\",\n    \"handler\": \"Microsoft.Azure.CreateUIDef\",\n    \"version\": \"0.1.2-preview\",\n    \"parameters\": {\n        \"basics\": [],\n        \"steps\": [],\n        \"outputs\": {}\n    }\n}\n</code></pre>"},{"location":"ama/labs/lab-2-deployment-package/#create-the-file","title":"Create the file","text":"<ol> <li>Create the file <code>createUiDefinition.json</code> in your <code>begin</code> folder.</li> <li>Paste the above JSON into the new file.</li> <li>Run ARM TTK. You get several errors on the <code>createUiDefinition.json</code> file because the sections of the file are yet filled in yet. </li> </ol>"},{"location":"ama/labs/lab-2-deployment-package/#the-create-ui-definition-sandbox","title":"The Create UI Definition Sandbox","text":"<p>The Create UI Definition Sandbox is a tool for testing <code>createUiDefinition.json</code> files.</p> <ol> <li>Open the Create UI Definition Sandbox in the Azure portal.</li> <li>Delete the JSON in the JSON area of the sandbox blade.</li> <li>Paste the JSON from your <code>createUiDefinition.json</code> file into the sandbox JSON area.</li> <li>Click the Preview button at the bottom of the page. <p>The sandbox renders the content from your <code>createUiDefinition.json</code>. The Basics section displays the default fields that are rendered when the <code>basics</code> section of the JSON is empty.</p>  </li> </ol>"},{"location":"ama/labs/lab-2-deployment-package/#the-steps-section","title":"The steps[] section","text":"<ol> <li>Go back to your <code>createUiDefinition.json</code> file.</li> <li>Add the following JSON into the <code>steps[]</code> array. This will add a new tab, or blade, to the experience the customer will see during installation.</li> </ol> <pre><code>{\n  \"name\": \"prefixBlade\",\n  \"bladeTitle\": \"Item Prefix\",\n  \"label\": \"Item Prefix\",\n  \"elements\": []\n}\n</code></pre> <ol> <li>Paste the JSON from your file in the Create UI Definition Sandbox. You should see a new Item Prefix tab.</li> <li>Click the Item Prefix tab.     &gt; The blade is blank and has no controls on it.</li> <li>On the left side of the sandbox, note there is a list of controls. Copy the TextBox control into your clipboard.</li> <li>In your <code>createUiDefinition</code> file, paste the control into the <code>elements</code> array of the JSON blade.</li> <li>Check your JSON in the sandbox.</li> <li>Remove the blade definition from the <code>steps[]</code> array in the <code>createUiDefinition.json</code> file so that the array is empty.</li> <li>Fill in the <code>steps[]</code> array with the JSON below.</li> </ol> <pre><code>\n            {\n                \"name\": \"storageConfigBlade\",\n                \"label\": \"Storage account settings\",\n                \"bladeTitle\": \"Storage account settings\",\n                \"elements\": [\n                    {\n                        \"name\": \"storageAccount\",\n                        \"type\": \"Microsoft.Storage.MultiStorageAccountCombo\",\n                        \"label\": {\n                            \"prefix\": \"Storage account prefix\",\n                            \"type\": \"Storage account type\"\n                        },\n                        \"toolTip\": {\n                            \"prefix\": \"The prefix of the storage account\",\n                            \"type\": \"The type of storage account\"\n                        },\n                        \"defaultValue\": {\n                            \"type\": \"Standard_LRS\"\n                        },\n                        \"constraints\": {\n                            \"allowedTypes\": [\n                                \"Premium_LRS\",\n                                \"Standard_LRS\",\n                                \"Standard_GRS\"\n                            ]\n                        },\n                        \"count\": 2\n                    }\n                ]\n            },\n            {\n                \"name\": \"vmBlade\",\n                \"bladeTitle\": \"Virtual Machine\",\n                \"label\": \"Virtual Machine\",\n                \"elements\": [\n                    {\n                        \"name\": \"vmName\",\n                        \"type\": \"Microsoft.Common.TextBox\",\n                        \"label\": \"Machine name\",\n                        \"placeholder\": \"Virtual machine name\",\n                        \"defaultValue\": \"\",\n                        \"toolTip\": \"Use only allowed characters\",\n                        \"constraints\": {\n                            \"required\": true,\n                            \"regex\": \"^[a-z0-9A-Z]{5,15}$\",\n                            \"validationMessage\": \"Only alphanumeric characters are allowed, and the value must be 5-15 characters long.\"\n                        },\n                        \"visible\": true\n                    },\n                    {\n                        \"name\": \"adminUsername\",\n                        \"type\": \"Microsoft.Compute.UserNameTextBox\",\n                        \"label\": \"Admin Username\",\n                        \"toolTip\": \"The username of the admin user for the VM\",\n                        \"constraints\": {\n                            \"required\": true,\n                            \"regex\": \"^[a-z0-9A-Z]{1,30}$\",\n                            \"validationMessage\": \"Only alphanumeric characters are allowed, and the value must be 1-30 characters long.\"\n                        },\n                        \"osPlatform\": \"Windows\",\n                        \"visible\": true\n                    },\n                    {\n                        \"name\": \"adminPassword\",\n                        \"type\": \"Microsoft.Common.PasswordBox\",\n                        \"label\": {\n                            \"password\": \"Password\",\n                            \"confirmPassword\": \"Confirm password\"\n                        },\n                        \"toolTip\": \"Password for the VM\",\n                        \"constraints\": {\n                            \"required\": true,\n                            \"regex\": \"^[a-zA-Z0-9]{12}$\",\n                            \"validationMessage\": \"Password must be at least 12 characters long, contain only numbers and letters\"\n                        },\n                        \"options\": {\n                            \"hideConfirmation\": false\n                        },\n                        \"visible\": true\n                    },\n                    {\n                        \"name\": \"operatingSystem\",\n                        \"type\": \"Microsoft.Common.DropDown\",\n                        \"label\": \"Windows operating system\",\n                        \"defaultValue\": \"2022-Datacenter\",\n                        \"toolTip\": \"Choose an operating system to deploy\",\n                        \"constraints\": {\n                            \"allowedValues\": [\n                                {\n                                    \"label\": \"2019 Datacenter 2nd Gen\",\n                                    \"value\": \"2019-datacenter-gensecond\"\n                                },\n                                {\n                                    \"label\": \"2016 Datacenter 2nd Gen\",\n                                    \"value\": \"2016-datacenter-gensecond\"\n                                }\n                            ],\n                            \"required\": true\n                        },\n                        \"visible\": true\n                    },\n                    {\n                        \"name\": \"vmSize\",\n                        \"type\": \"Microsoft.Compute.SizeSelector\",\n                        \"label\": \"Virtual machine size\",\n                        \"toolTip\": \"Choose the size of virtual machine to create\",\n                        \"recommendedSizes\": [\n                            \"Standard_D2s_v3\"\n                        ],\n                        \"options\": {\n                            \"hideDiskTypeFilter\": false\n                        },\n                        \"osPlatform\": \"Windows\",\n                        \"visible\": true\n                    }\n                ]\n            },\n            {\n                \"name\": \"tags\",\n                \"label\": \"Tags\",\n                \"elements\": [\n                    {\n                        \"name\": \"tagsByResource\",\n                        \"type\": \"Microsoft.Common.TagsByResource\",\n                        \"toolTip\": \"Tags for resources being created\",\n                        \"resources\": [\n                            \"Microsoft.Storage/storageAccounts\",\n                            \"Microsoft.Compute/virtualMachines\"\n                        ]\n                    }\n                ]\n            }\n\n</code></pre> <p>Check your JSON in the sandbox to ensure it is valid.</p>"},{"location":"ama/labs/lab-2-deployment-package/#the-outputs-section","title":"The outputs section","text":"<p>Now that you have all of the steps defined in your <code>createUiDefinition.json</code> file, you can focus on the <code>outputs</code> section, which passes the control values to the ARM template during installation.</p> <p>Fill in the <code>outputs</code> section of your <code>createUiDefinition.json</code> file with the JSON below.</p> <pre><code>\"adminPassword\": \"[steps('vmBlade').adminPassword]\",\n\"adminUsername\": \"[steps('vmBlade').adminUsername]\",\n\"windowsOSVersion\": \"[steps('vmBlade').operatingSystem]\",\n\"vmSize\": \"[steps('vmBlade').vmSize]\",\n\"location\": \"[location()]\",\n\"storageAccountName\": \"[steps('storageConfigBlade').storageAccount.prefix]\",\n\"storageAccountType\": \"[steps('storageConfigBlade').storageAccount.type]\",\n\"vmName\": \"[steps('vmBlade').vmName]\"\n</code></pre>  <p>Note how the output keys match the input parameter names in the <code>mainTemplate.json</code> ARM template.  Also note how the values reference blade values, except for the <code>location()</code> function, which is a required output value.</p>  <ol> <li>Check your files with ARM TTK.</li> <li>Check your JSON in the sandbox.</li> </ol> <p>Your <code>createUiDefinition.json</code> is now complete.</p>"},{"location":"ama/labs/lab-2-deployment-package/#exercise-5-deploying-your-deployment-package-files","title":"Exercise 5 - Deploying your deployment package files","text":"<p>In this exercise, you will create a second plan in the offer you created in Lab 1.</p> <ol> <li>In the <code>begin</code> folder, create a ZIP file with two deployment package files at the root. Name the file gold-plan-deployment-package.zip.</li> <li>Go back to Partner Center.</li> <li>Navigate to the offer you created in Lab 1.</li> <li>Click Plan overview in the left hand menu.</li> <li>Create a new plan named Gold in your offer. Use the same techniques you used in Lab 1 to create your Silver plan. <p>When you get to the Pricing and availability section of your new offer, remember to check the boxes and fill in the units on the metered billing dimensions.</p>  </li> </ol>"},{"location":"ama/labs/lab-2-deployment-package/#exercise-6-publish-your-offer","title":"Exercise 6 - Publish your offer","text":"<p>Now that you have two plans in your offer, it's time to publish your offer.</p> <ol> <li>In Partner Center click the Review and publish button at the top right of the page, which takes you to the Review publish changes page.</li> <li>Once all indicators are green, click the Publish button at the bottom of the page. You will be taken to the Offer overview page where you can monitor the status of your offer as it progresses to the Publisher signoff stage. (This requires refreshing the page periodically). </li> </ol> <p>The publishing process can take some time to complete, but should be done in time for the next lab.</p>  <p>\u26a0\ufe0f DO NOT go past the Publisher signoff stage by clicking the Go live button once it appears.</p>"},{"location":"ama/labs/lab-2-deployment-package/#conclusion","title":"Conclusion","text":"<p>Great job, you've finished lab 2! </p> <p>In this lab you accomplished the following.</p> <ol> <li>Used ARM TTK to validate your deployment files.</li> <li>Fleshed out an ARM template in <code>mainTemplate.json</code>.</li> <li>Created the user experience for installing the solution via the ARM template using <code>createUiDefinition,json</code>.</li> <li>Created a deployment package from the artifacts in this lab.</li> <li>Created a new plan in Partner Center and used your new deployment package in that plan.</li> <li>Published your offer with its new plan.</li> </ol> <p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-3-purchasing-ama/","title":"Index","text":"<p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-3-purchasing-ama/#lab-3-purchasing-an-azure-managed-application","title":"Lab 3 - Purchasing an Azure Managed Application","text":"<p>This lab focuses on purchasing the offer and plans you created in Lab 1 and Lab 2.</p> <p>First, check Partner Center.</p>  <p>This lab will only work if your offer in is published and visible in the Publisher signoff stage of publication as seen on the Offer overview. page in Partner Center. </p> <p>There should be a Go live button on the Offer overview page. </p> <p>\u26a0\ufe0f Do NOT click this button at any point today as doing so will submit your offer to the certification team to make it live.</p>"},{"location":"ama/labs/lab-3-purchasing-ama/#exercise-1-the-silver-plan","title":"Exercise 1 - The Silver plan","text":"<p>This exercise takes you through the process of buying your Silver plan, created in Lab 1. You'll also have a look at your resulting Managed Application.</p>"},{"location":"ama/labs/lab-3-purchasing-ama/#finding-the-private-plan","title":"Finding the private plan","text":"<ol> <li>Open the Azure portal and log in.</li> <li>At the top of the screen click the Create a resource button. You are taken to the public Azure marketplace.     &gt; In Lab 1, you configured your offer to be available to your subscription while in the Publisher signoff stage. This makes your offer a private one and you need to navigate to the private offers part of the marketplace to purchase it.</li> <li>Under the search box, click the link that reads See more in the Marketplace.</li> <li>On this page you see a pink bar at the top of the screen telling you that you have private offers available. Click the link that reads View private products.</li> <li>Locate your offer named AMA Workshop 1 (preview) and click on that tile. You are taken to the offer's purchase page, which is in Preview mode.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#purchasing-the-silver-plan","title":"Purchasing the Silver plan","text":""},{"location":"ama/labs/lab-3-purchasing-ama/#basics-tab","title":"Basics tab","text":"<ol> <li>In the plan dropdown, ensure Silver is selected. <p>This plan will create a simple Data storage service in your subscription.</p>  </li> <li>Click the Create button. You are taken to the offer creation page, which needs your input.</li> <li>On the Basics tab, you should see your current subscription selected. If not, select it from the dropdown.</li> <li>For Resource group click the Create new link under the dropdown.</li> <li>Name your new resource group ama_workshop_purchases.</li> <li>Select a region near you.</li> <li>In the Managed Application Details section, enter the following.</li> <li>Application name: workshopapp1</li> <li>Managed Resource Group: workshopapp1-mrg</li> <li>At the bottom of the screen, click the Next: Storage setting button.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#storage-settings-tab","title":"Storage settings tab","text":"<ol> <li>Enter the following values.</li> <li>Storage account name prefix: amaws01</li> <li>Storage account type: Standard_LRS</li> <li>Click the Review + create button at the bottom of the screen.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#review-create-tab","title":"Review + create tab","text":"<ol> <li>Scroll down to the Co-Admin Access Permission section.</li> <li>Click the checkbox I agree to the terms and conditions above.</li> <li>Click the Create button at the bottom of the screen. You are taken to the Deployment page.  <p>\u231b Deploying your application may take a couple of minutes.</p>  </li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#deployment-screen","title":"Deployment screen","text":"<p>When deployment is complete, you are met with a message that reads, Your deployment is complete.</p> <ol> <li>At the bottom of the screen click the Go to resource button. </li> </ol> <p>You are taken to the managed application instance.</p>"},{"location":"ama/labs/lab-3-purchasing-ama/#exercise-2-the-deployed-application","title":"Exercise 2 - The deployed application","text":"<p>In this exercise you will tour the workshopapp1 managed application you've just purchased. </p>"},{"location":"ama/labs/lab-3-purchasing-ama/#the-managed-application","title":"The managed application","text":"<ol> <li>On the Essentials screen, note the following.</li> <li>The support link you entered in Partner Center is shown here.</li> <li>The link to the Resource group you created,  ama_workshop_purchases is present. This is the resource group containing the instance of a the managed application you are looking at right now.</li> <li>There is a link to the Managed resource group you created, workshopapp1-mrg. This is the resource group that contains the services deployed by the ARM template in your deployment package.</li> <li>In the left hand menu, click Parameters and outputs.</li> <li>The arm template, <code>mainTemplate.json</code> that created the storage account that was deployed, took only three parameters and they are shown here.</li> <li>There are no outputs on this page because none were specified by the ARM template.</li> <li>In the left hand menu, click Authorizations. </li> <li>Note the role that the publisher has on this application is Owner. This corresponds to the role you selected in the Technical configuration tab of the plan in Partner Center.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#the-managed-resource-group","title":"The Managed resource group","text":"<ol> <li>In the left hand menu, click on Overview.</li> <li>In the Essentials section of the page, click the link to the Managed resource group you created, workshopapp1-mrg.</li> <li>You are taken to the Resource group that contains the storage account deployed by the ARM template.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#exercise-3-the-gold-plan","title":"Exercise 3 - The Gold plan","text":"<p>In this exercise you will go through the process of buying your Gold plan, created in Lab 2. After deployment, you'll use the virtual machine deployed by the application.</p>"},{"location":"ama/labs/lab-3-purchasing-ama/#purchasing-the-gold-plan","title":"Purchasing the Gold plan","text":"<ol> <li>Click the link to Home in the top left corner of the screen.</li> <li>Under Azure services, click Create a resource.</li> <li>Go back to the Private offers section of the marketplace and find the AMA Workshop 1 offer.</li> <li>Purchase the Gold plan. Using the values as follows in the setup screens.</li> <li>Basics tab<ol> <li>Resource group: ama_workshop_purchases</li> <li>Region: Any one near you</li> <li>Application name: amaworksopgold01</li> <li>Managed Resource Group: amaworksopgold01-mrg</li> </ol> </li> <li>Storage account settings<ol> <li>Storage account prefix: Any 3-5 alphanumeric value that is accepted</li> <li>Storage account type: Standard_LRS</li> </ol> </li> <li>Virtual Machine<ol> <li>Machine name: amavm01</li> <li>Admin username: Any accepted value of your choice</li> <li>Password: Any accepted value of your choice</li> <li>Windows operating system: Your choice</li> <li>Virtual machine size: Note you can Change the size of the virtual machine to be deployed, but larger sizes cost more money to your subscription. Consider taking the recommended value of 1x Standard D2s v3.</li> </ol> </li> <li>Click the Review + create button at the bottom of the screen.</li> <li>Check the box for I  agree to the terms and conditions above.</li> <li>Click the Create button at the bottom of the screen and the plan is deployed.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#exploring-the-gold-plan","title":"Exploring the Gold plan","text":"<p>This will be a simple peek into the resources created during deployment of your application.</p> <ol> <li>Wait for deployment to complete.</li> <li>Click the Go to resource button near the bottom of the screen.</li> <li>Near the top right of the Essentials section of the page, click the link to the Managed Resource Group you created, workshopapp2-mrg.</li> <li>Note all of the resources deployed by your ARM template. If you have any questions about how a particular resource was created, review your <code>mainTemplate.json</code> file for the resource definition.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#remote-into-the-virtual-machine","title":"Remote into the virtual machine","text":"<p>Here you will actually log in into the virtual machine deployed by your Managed Application.</p> <ol> <li>Click the virtual machine in the set of resources listed in the Managed Resource Group.</li> <li>In the top left of the screen, click the Connect dropdown.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#windows-users","title":"Windows users","text":"<ol> <li>Select RDP from the dropdown.</li> <li>Click the button Download RDP file.</li> <li>When prompted, click the Open button on the Downloads dialog. This will launch your remote desktop client.</li> <li>Enter the username and password you entered when purchasing the Managed Application.</li> <li>Connect to the remote machine.     &gt; Note you are currently in the role of a customer, and you have remoted into a virtual machine inside the Managed Resource Group.</li> <li>Disconnect from the virtual machine.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#mac-and-linux-users","title":"Mac and Linux users","text":"<ol> <li>Select SSH from the dropdown.</li> <li>Follow the instruction on the page, under Connect via SSH with client.</li> <li>Use the username and password you entered while purchasing the Managed Application to log in to the virtual machine.     &gt; Note you are currently in the role of a customer, and you have remoted into a virtual machine inside the Managed Resource Group.</li> <li>Disconnect from the virtual machine.</li> </ol>"},{"location":"ama/labs/lab-3-purchasing-ama/#conclusion","title":"Conclusion","text":"<p>Congratulations, you have completed Lab 3. In this lab you accomplished the following.</p> <ol> <li>Purchased two plans you created using an offer from Lab 1.</li> <li>Examined the artifacts deployed by each plan.</li> <li>Logged into the virtual machine deployed by the Gold plan.</li> </ol> <p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-4-administer-my-amas/","title":"Index","text":"<p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-4-administer-my-amas/#lab-4-administering-your-purchased-managed-applications","title":"Lab 4 - Administering Your Purchased Managed Applications","text":"<p>In this lab you will act as the customer. You will explore what it means to manage the Azure managed applications that you purchased.</p> <p>In Lab 3, you purchased your Gold plan and then remoted into the virtual machine, where you could use the VM as a customer. Now we'll see what else it means to manage your purchases.</p>"},{"location":"ama/labs/lab-4-administer-my-amas/#exercise-1-the-managed-applications-dashboard","title":"Exercise 1 - The Managed Applications dashboard","text":"<ol> <li>Open the Azure portal.</li> <li>At the top of the screen in the search box, enter Managed Applications.</li> <li>Select Managed Applications from the dropdown box. Note: Do not select Managed Applications Center.</li> <li>You are seeing the Managed Applications dashboard and seeing all of the Managed Applications you have purchased.</li> </ol>"},{"location":"ama/labs/lab-4-administer-my-amas/#exercise-2-amaworkshopsilver01","title":"Exercise 2 - amaworkshopsilver01","text":"<ol> <li>Click on amaworkshopsilver01. You saw this view of this Managed Application in the previous lab.</li> <li>Note the name of the Managed Resource Group, which should be amaworkshopsilver01-mrg.</li> <li>At the top left of the page, click the Delete button.</li> <li>Click Yes to confirm the deletion of the Managed Application.     &gt; It will take some time, approximately 2 minutes or so, but the Managed Application and its corresponding Managed Resource Group will be deleted.</li> <li>Go to the Managed Applications dashboard as explained in Exercise 1.</li> <li>Confirm that amaworkshopsilver01 application does not exist. You can refresh this page for a few minutes until the application is no longer visible.</li> <li>Go to the list of Resource Groups in the Azure Portal and ensure the amaworkshopsilver01-mrg Resource Group is no longer there. <p>Now that the Managed Resouce Group is gone, the subscription to this solution is cancelled and no more billing will take place.</p>  </li> </ol>"},{"location":"ama/labs/lab-4-administer-my-amas/#conclusion","title":"Conclusion","text":"<p>Congratulations, you have complete Lab 3! In this lab you did the following.</p> <ol> <li>Got familiar with the Managed Application dashboard.</li> <li>Deleted a managed application and showed that it deleted the corresponding resources associated with it.</li> </ol> <p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-5-administer-customer-amas/","title":"Index","text":"<p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"ama/labs/lab-5-administer-customer-amas/#lab-5-administering-your-customers-managed-applications","title":"Lab 5 - Administering Your Customer\u2019s Managed Applications","text":"<p>This lab will take you through the process of administering Managed Applications your customer has purchased from you. When you are done you will have a feel for what it means to work with your customer's installed applications as a publisher.</p>"},{"location":"ama/labs/lab-5-administer-customer-amas/#exercise-1-introducing-managed-application-center","title":"Exercise 1 - Introducing Managed Application Center","text":"<p>This exercise introduces the primary tool you will use for administering your customer's installations of your solution, Managed Application Center. </p> <ol> <li>In the Azure portal, in the search box at the top of the page, enter Managed Application Center and select it from the dropdown. <p>\ud83d\uddd2\ufe0f Note this page allows access to tools to manage both Service Catalog-based applications and Marketplace applications.</p>  </li> <li>In the left hand menu, select Browse &gt; Marketplace applications. You see a list of all the offers that have been purchased by yur customers.</li> <li>Click the link AMA Workshop 01.</li> <li>Here you see a list of all customer purchases of your marketplace Managed Applications.</li> </ol>"},{"location":"ama/labs/lab-5-administer-customer-amas/#exercise-2-working-in-your-customers-managed-resource-group","title":"Exercise 2 - Working in your customer's Managed Resource Group","text":"<p>Now you will perform some \"maintenance\" of your customer's solution in their Managed Resource Group.</p> <ol> <li>Next to the workshopapp2 Application name, click the link workshopapp2-mrg to the Managed Resource Group.</li> <li>Viewing the managed resource group contents, you see all the resources that were created by the ARM template. <p>Because your user ID was set to the Owner of the Managed Application, you can perform operations inside this Managed Resource Group.</p>  </li> </ol>"},{"location":"ama/labs/lab-5-administer-customer-amas/#managing-a-virtual-machine","title":"Managing a Virtual Machine","text":"<ol> <li>Click the link to the virtual machine.</li> <li>On the top menu, click the Stop button. </li> <li>Click the Yes button to confirm Stop. <p>Because you are the owner of the Managed Application, the virtual machine stops.</p>  </li> </ol>"},{"location":"ama/labs/lab-5-administer-customer-amas/#removing-resources","title":"Removing Resources","text":"<ol> <li>Go back to the workshopapp2-mrg Resource Group.</li> <li>Find the Storage account and select the checkbox next to it. </li> <li>In the top menu, click the Delete button.</li> <li>Type yes to confirm and then the Delete button at the bottom of the page. <p>Because you are the owner of the Managed Application, the storage account is deleted.</p>  </li> </ol>"},{"location":"ama/labs/lab-5-administer-customer-amas/#adding-resources","title":"Adding Resources","text":"<ol> <li>Go back to the workshopapp2-mrg Resource Group.</li> <li>Click the Create button on the top of the page.</li> <li>Click the Storage account &gt; create link on the first page.</li> <li>On the Create Storage account page, enter the following.</li> <li>Under Project details<ol> <li>Subscription: Your current subscription</li> <li>Resource group: workshopapp2-mrg</li> </ol> </li> <li>Under Instance Details<ol> <li>Storage account name: anything you choose</li> <li>Region: A Region near you</li> <li>Performance: Standard</li> <li>Redundancy: Locally Redundant Storage (LRS)</li> </ol> </li> <li>Click the Review + create at the bottom of the page.</li> <li>Click the Create button at the bottom of the screen.</li> <li>After deployment, confirm the new storage account is in the Managed Resource Group.</li> </ol>"},{"location":"ama/labs/lab-5-administer-customer-amas/#exercise-3-deleting-a-managed-application-as-a-publisher","title":"Exercise 3 - Deleting a Managed Application as a publisher","text":"<p>Here you will learn how easy it is to delete a customer's subscription, should you choose to for some reason, such as lack of payment.</p> <ol> <li>Open the Managed Application Center.</li> <li>Go to Manage applications.</li> <li>Click the product that was purchased, AMA Workshop 1.</li> <li>Click the Application name, workshopapp2.</li> <li>In the top menu, click the Delete button.</li> <li>Click Yes to confirm the deletion.     &gt; Although it may take a couple of minutes, the Managed Application and its corresponding Managed Resource Group are deleted.</li> </ol>"},{"location":"ama/labs/lab-5-administer-customer-amas/#conclusion","title":"Conclusion","text":"<p>Congratulations, you have completed Lab 5. In this lab, you did the following.</p> <ol> <li>Learned about the Managed Application Center inside the Azure portal.</li> <li>Deleted and created a resource within the customer's Managed Resource Group.</li> <li>Deleted a customer's Azure Managed Application.</li> </ol> <p>\ud83d\udc48 Back to Azure Managed Applications labs</p>"},{"location":"bot/","title":"Marketplace Bot Proof of Concept","text":"const styleOptions = {         // Add styleOptions to customize web chat canvas         hideUploadButton: true     };      console.debug(\"Got it\");      // Add your BOT ID below     var BOT_ID = \"b11ecfe8-48ef-4d5c-a77b-ee24c5c245a0\";      var theURL = \"https://powerva.microsoft.com/website/bots/\" + BOT_ID;      const store = window.WebChat.createStore(         {},         ({ dispatch }) =&gt; next =&gt; action =&gt; {             if (action.type === \"DIRECT_LINE/CONNECT_FULFILLED\") {               dispatch({                   meta: {                         method: \"keyboard\",                     },                     payload: {                         activity: {                               channelData: {                                   postBack: true,                               },                               //Web Chat will show the 'Greeting' System Topic message which has a trigger-phrase 'hello'                               name: 'startConversation',                               type: \"event\"                           },                     },                     type: \"DIRECT_LINE/POST_ACTIVITY\",                 });           }           return next(action);       }     );     fetch(theURL)         .then(response =&gt; response.json())         .then(conversationInfo =&gt; {             window.WebChat.renderWebChat(                 {                     directLine: window.WebChat.createDirectLine({                         token: conversationInfo.token,                     }),                     store: store,                     styleOptions: styleOptions                 },                 document.getElementById('webchat')             );         })         .catch(err =&gt; console.error(\"An error occurred: \" + err));"},{"location":"container/","title":"Mastering container offers for Kubernetes apps","text":"<p>Home</p>"},{"location":"container/#mastering-container-offers-for-kubernetes-apps","title":"Mastering container offers for Kubernetes apps","text":"<p>Container offers for Kubernetes applications is a transactable offer type for deploying solution containers into an Azure Kubernetes Service in the customer's subscription. This course will take you from an overview to deep understanding of the offer type. The large majority of the course is demo-first.</p> <p>\u2709\ufe0f Let us know what you need from this content, or tell us how we're doing.</p> <p>\ud83e\uddea Grow your skills with the hands-on labs.</p>   <ul> <li>Container offer for Kubernetes apps overview</li> <li>Container offer billing overview</li> <li>Container offer technical overview</li> <li>Deploying solution images to an Azure Container Registry</li> <li>Scanning container images for vulnerabilities</li> <li>Preparing CNAB bundle artifacts</li> <li>Generating the CNAB bundle</li> <li>Create a container offer in Partner Center</li> <li>Create a container offer plan in Partner Center</li> <li>Subscribe to a Kubernetes app in the Commercial Marketplace</li> <li>Unsubscribe from a purchased Kubernetes app</li> <li>Securing virtual machines and containers for certification</li> <li>Hands-on labs</li> </ul>"},{"location":"container/#container-offer-for-kubernetes-apps-overview","title":"Container offer for Kubernetes apps overview","text":"<p>Video | PDF</p> <p>This video introduces Container Offers for Kubernetes Applications, a transactable offer type in the Azure Marketplace. After viewing this module you\u2019ll understand the terminology used in this marketplace offer type and gain a deeper understanding of publishing one. Present in this module are the following sections.</p> <ul> <li>About the offer type</li> <li>Benefits of the offer type</li> <li>Container offers in the marketplace</li> </ul>"},{"location":"container/#container-offer-billing-overview","title":"Container offer billing overview","text":"<p>Video | PDF</p> <p>How to price and bill your solution is such a commonly visited topic that we\u2019re providing a quick module on the subject. In this module you\u2019ll learn about transactable offers, the pricing models for container offers, and the nomenclature of offers and plans.</p>"},{"location":"container/#container-offer-technical-overview","title":"Container offer technical overview","text":"<p>Video | PDF</p> <p>This module provides a comprehensive overview of Container offers for Kubernetes apps. Topics include the following.</p> <ul> <li>The development lifecycle</li> <li>About CNAB bundles</li> <li>Packaging the artifacts</li> <li>Deploying the final product</li> </ul>"},{"location":"container/#deploying-solution-images-to-an-azure-container-registry","title":"Deploying solution images to an Azure Container Registry","text":"<p>Video</p> <p>This hands-on demo introduces the application to be throughout the course and shows preparing an Azure Container Registry. Finally, you\u2019ll see how to push your solution\u2019s images to your own ACR. Sections include the following.</p> <ul> <li>Set up an ACR for use with the marketplace</li> <li>Run the demo application</li> <li>Push application images to an ACR</li> </ul>"},{"location":"container/#scanning-container-images-for-vulnerabilities","title":"Scanning container images for vulnerabilities","text":"<p>Video</p> <p>In this comprehensive demo you\u2019ll learn how to identify vulnerabilities in your images that can prevent your Container offer from passing certification. Not only will you see Microsoft Defender for Cloud in action, but you\u2019ll see how to patch a container and prepare its\u2019 image for publication to an ACR so that it no longer contains vulnerabilities.</p>"},{"location":"container/#preparing-cnab-bundle-artifacts","title":"Preparing CNAB bundle artifacts","text":"<p>Video</p> <p>In this hands-on module, learn about the artifacts needed to create your final CNAB bundle. This video explores what they are and looks at some details in each. You\u2019ll see the following.</p> <ul> <li>Solution files</li> <li>Helm chart</li> <li>K8s deployment files</li> <li>Marketplace deployment files</li> <li>The CNAB manifest</li> </ul>"},{"location":"container/#generating-the-cnab-bundle","title":"Generating the CNAB bundle","text":"<p>Video</p> <p>This module demonstrates the process of creating a CNAB bundle for publication to the Microsoft commercial marketplace. This video is primarily on the command line and shows using the publicly available CNAB bundling tool available from the Microsoft public Azure Container Registry.</p>"},{"location":"container/#create-a-container-offer-in-partner-center","title":"Create a container offer in Partner Center","text":"<p>Video</p> <p>In this all-demo module, you\u2019ll see what is needed to create a Container Offer in Partner Center. The demo walks through all sections of creating an offer except for creating plans. Plan creation is shown in the next video of the course.</p>"},{"location":"container/#create-a-container-offer-plan-in-partner-center","title":"Create a container offer plan in Partner Center","text":"<p>Video</p> <p>This module focuses on creating a plan within an already existing offer. This hands-on demo walks through setting up a new plan in Partner Center including the technical configuration of the plan, in which we map the CNAB bundle to the new plan.</p>"},{"location":"container/#subscribe-to-a-kubernetes-app-in-the-commercial-marketplace","title":"Subscribe to a Kubernetes app in the Commercial Marketplace","text":"<p>Video</p> <p>In this brief demo, you see how customers purchase a Kubernetes app and deploy it into their K8s cluster. You\u2019ll see the process from marketplace to deployed and running application.</p>"},{"location":"container/#unsubscribe-from-a-purchased-kubernetes-app","title":"Unsubscribe from a purchased Kubernetes app","text":"<p>Video</p> <p>In this walkthrough video, you\u2019ll see how to get rid of an application you may have purchased, and stop being billed for that app. We use the command line with the az CLI and KubeCtl to perform these operations.</p>"},{"location":"container/#securing-virtual-machines-and-containers-for-certification","title":"Securing virtual machines and containers for certification","text":"<p>Video | PDF</p> <p>The last thing you want is to create and publish an offer only to have it fail Microsoft\u2019s certification process. This module provides important tips and effective practices for securing virtual machines and containers before publication to the Azure Marketplace, so your offer makes it through certification the first time.</p>"},{"location":"container/#hands-on-labs","title":"Hands-on labs","text":"<p>The following hands-on labs build upon each other. They take you through the complete process of creating and publishing a Container offer in the Microsoft commercial marketplace.</p>"},{"location":"container/#prerequisites","title":"Prerequisites","text":"<p>\u26a0\ufe0fIMPORTANT</p> <p>To complete the labs that use partner Center, you must sign up for the Container offers public preview here</p>  <p>There are prerequisites to these labs. Several accounts and pieces of software are required to perform the labs. Please visit the link below and complete the prerequisites detailed there before starting Lab 1.</p> <p>Technical Prerequisites</p>"},{"location":"container/#getting-started","title":"Getting started","text":"<p>Clone this repository to your local machine. You will need some artifacts from the lab folders to complete the labs.</p>"},{"location":"container/#labs","title":"Labs \ud83e\uddea","text":"<ol> <li>Prepare Container Deployment</li> <li>Create a CNAB Bundle Package</li> <li>Publishing a Container offer</li> <li>Purchasing a Container offer</li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/","title":"Lab 1","text":"<p>Home &gt; Container Offers &gt; Labs \ud83e\uddea</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/#lab-1-prepare-for-container-deployment","title":"Lab 1 - Prepare for Container Deployment","text":"<p>Note: This lab is part of a series of labs for Mastering Container Offers Workshop. You must finish this lab before moving on to the next sections.</p>  <p>This lab will take you from start to finish in getting your artifacts ready for publication of your Container Offer. You'll start by getting containers running locally and move to updating deployment files in preparation for publishing the entire solution to your ACR.</p>  <ul> <li>Getting started</li> <li>Prepare Solution Images</li> <li>Run Containers Locally</li> <li>Push Images to ACR</li> <li>Helm Chart</li> <li>Update Deployments File</li> <li>Update the UI Definition File</li> <li>Update the ARM Template</li> <li>Update Package Manifest File</li> </ul>"},{"location":"container/Labs/lab1-prepare-container-deployment/#getting-started","title":"Getting started","text":"<p>\u26a0\ufe0f You must have completed all prerequisites before continuing with this lab.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/#azure-container-registry-acr","title":"Azure Container Registry (ACR)","text":"<p>If Admin user is not enabled on your ACR, select Settings &gt; Access keys in the left menu and enable it in the Azure portal as shown in the following image.</p>  <p>Capture the following values as you will need them throughout the remainder of the labs.</p> <ul> <li>Login server</li> <li>Username</li> <li>Password</li> </ul>"},{"location":"container/Labs/lab1-prepare-container-deployment/#your-working-folder","title":"\u2757Your working folder","text":"<p>This section is extrememly important for working easily through the labs.</p> <p>You will be working with one solution throughout all the labs. To make it easier to work with the solution, you will make a copy of the solution folder and move it to a location of your choice outside the Git repository folder that holds these labs.</p> <ol> <li>Copy the folder <code>&lt;path to Git repo&gt;/docs/container/lab1-prepare-container-deployment/begin</code>.</li> <li>Copy this folder to a location of your choice. <code>c:\\projects\\begin</code> for example.</li> <li>Rename the <code>begin</code> folder to <code>container-labs</code>.</li> <li>From now on, the labs will refer to <code>container-labs</code> when referring to your working folder.</li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/#prepare-solution-images","title":"Prepare Solution Images","text":"<p>In this section, you will create a <code>DockerFile</code> for solution <code>Azure ToDo</code> and publish the image to your ACR created in the prerequisites exercise. The sample solution is a simple to-do application that is already completed for you. The intent of this lab is not to have you write code, but to prepare your container offer artifacts.</p> <ol> <li> <p>Using your text editor, open the following Dockerfile.</p> <pre><code>container-labs/code/Dockerfile\n</code></pre> </li> <li> <p>Add the following code to the Dockerfile taking care not to delete the first line.</p> <pre><code># Create app directory\nWORKDIR /usr/src/app\nRUN apk update\n# Copy solution package file\nCOPY package*.json ./\n\n# Install app dependencies\nRUN npm install\nRUN npm audit fix --force\n# Copy all files\nCOPY . .\n\n# Add command to expose web app port \nEXPOSE 3000\n\n# Command to start the application\nCMD [ \"npm\", \"start\" ]\n</code></pre> </li> <li> <p>Ensure Docker Desktop is running. </p> </li> <li> <p>Run the following commands to build the image.</p> <pre><code>cd `container-labs\\code`\ndocker build -t &lt;ACR Login Server Name&gt;/todojs:v1 .\n</code></pre> </li> <li> <p>The solution uses MongoDB for storage. You're going to run MongoDB in another container.</p> <p>Run the following commands to pull mongodb image locally and tag it.</p> <pre><code>docker pull mongo:latest \ndocker tag mongo:latest &lt;ACR Server name&gt;/mongo:latest\n</code></pre> </li> <li> <p>If you enter the following command, you should see the two local images prefixed with your ACR name.</p> <pre><code>docker images\n</code></pre> </li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/#run-containers-locally","title":"Run Containers Locally","text":"<p>In this section we will run the solution locally with Docker.</p> <ol> <li> <p>Create a user-defined bridge network.</p> <pre><code>docker network create todo-net\n</code></pre> </li> <li> <p>Start by running MongoDB locally. Specify an <code>admin username</code> and <code>password</code> of your choice for the mongoDB instance.</p> <pre><code>docker run -d --net todo-net -e MONGO_INITDB_ROOT_USERNAME:&lt;admin username&gt; -e MONGO_INITDB_ROOT_PASSWORD:&lt;password&gt; -p 27017:27017 --name mongotodo  mongo:latest\n</code></pre> </li> <li> <p>Start the main AzureTodo web application container.</p> <pre><code>docker run -d --net todo-net -p 3000:3000 -e ENVIRONMENT:development -e DATABASE_NAME:azure-todo-app -e DATABASE_URL=mongodb://mongotodo:27017 &lt;ACR Login Server Name&gt;/todojs:v1\n</code></pre> </li> <li> <p>Verify the containers are running correctly. Run the following command to see the two containers.</p> <pre><code>docker ps\n</code></pre> </li> <li> <p>Browse the web application by going to http://localhost:3000</p> </li> <li> <p>Try to create and delete tasks to make sure site is running properly</p> </li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/#push-images-to-acr","title":"Push Images to ACR","text":"<p>In this section we will publish or push the solution images to the ACR you created in prerequisites.</p> <ol> <li> <p>Open a terminal window (WSL2 on Windows) and run the following commands to login into ACR server. </p> <pre><code>docker login &lt;ACR Login Server Name&gt; -u &lt;ACR admin&gt; -p &lt;ACR password&gt;\n</code></pre> </li> <li> <p>Push the <code>todo.js</code> image to your ACR.</p> <pre><code>docker push &lt;ACR Server name&gt;/todojs:v1\n</code></pre> </li> <li> <p>Push the mongo image to your ACR.</p> <pre><code>docker push &lt;ACR Server name&gt;/mongo:latest\n</code></pre> <p>You can now see the images in your ACR.</p> </li> <li> <p>Open the Azure portal and browse to your ACR.</p> </li> <li>In the left menu, select Services &gt; Repositories.</li> <li> <p>You should see an a view like the following image.</p>  </li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/#helm-chart","title":"Helm Chart","text":"<p>In this section will explore the Helm Chart directory <code>AzureTodo</code>.</p>  <p>About Helm</p> <p>Helm is the package manager for Kubernetes. In other words, it is used to help you manage Kubernetes applications. Helm is the Kubernetes equivalent of <code>yum</code> or <code>apt</code>. Helm deploys charts, which you can think of as a packaged application.</p>  <ol> <li>Open  <code>container-labs\\container-package\\AzureTodo\\values.yaml</code> in your text editor.</li> <li>Update lines 10 &amp; 14 with your ACR server name. For example <code>myacr.azureacr.io</code>.</li> <li> <p>Locate the value of the <code>todojs:v1</code> digest and copy it.</p>  <p>Image Digest</p> <p>The image digest is the hash of the image index or image manifest JSON document.</p>  <p>Inspect the images you pushed to the ACR earlier. Open each repository in the ACR and see that individual versions of an image will have their own Digest value.</p>  <p>Get Digest from local image</p> <p>Run <code>docker inspect &lt;myacr&gt;.azureacr.io\\todojs:v1</code> you can locate the disget value under RepoDigests</p>   </li> <li> <p>Paste the <code>todojs:v1</code> digest value onto line 8.</p> </li> <li>Update line 12 with <code>mongo:latest</code> image digest.</li> <li> <p>Under section <code>MongoDB Admin</code> Add the following key/value pairs.</p> <pre><code>mongoDBAdmin: &lt;enter admin name&gt;\nmongoDBPassword: &lt;enter password&gt;\n</code></pre> </li> <li> <p>Update line 30 with namespace from your choice i.e contoso</p> </li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/#update-deployments-file","title":"Update Deployments File","text":"<p>About deployments.yaml</p> <p>This file defines the configuration for a Kubernetes deployment. Settings may be defined that specify details of creating pods, minimum pods in a cluster, scalability, and other settings.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/#modifying-deploymentsyaml","title":"Modifying deployments.yaml","text":"<ol> <li> <p>Open the following file in your editor.</p> <pre><code>container-labs\\container-package\\AzureTodo\\templates\\deployments.yaml\n</code></pre> </li> <li> <p>Uncomment line 25 and add the following.</p> <pre><code>value: {{ .Values.mongoDBPassword }}\n</code></pre> </li> <li> <p>Uncomment line 27 and add the following.</p> <pre><code>value: {{ .Values.mongoDBAdmin }}\n</code></pre> </li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/#update-the-ui-definition-file","title":"Update the UI Definition File","text":"<p>About <code>createUIDefinition.json</code></p> <p>The createUIDefinition.json file is used to customize the customer's interface during the installation process. It allows for various controls to be shown on the screen to collect values needed to install the application.</p>  <ol> <li> <p>Open the following file in your editor. </p> <p><code>container-labs\\container-package\\createUIDefinition.json</code></p> </li> <li> <p>Add the following JSON to the <code>elements</code> section.</p> <pre><code>{\n    \"name\": \"mongoDBAdmin\",\n    \"type\": \"Microsoft.Common.TextBox\",\n    \"label\": \"mongoDBAdmin\",\n    \"toolTip\": \"Admin name for MongoDB\",\n    \"defaultValue\": \"\",\n    \"constraints\": {\n      \"required\": true,\n      \"regex\": \"^[a-z0-9A-Z]{4,20}$\",\n      \"validationMessage\": \"Between 4 and 20 alphanumeric characters\"\n    }\n  },\n  {\n    \"name\": \"mongoDBPassword\",\n    \"type\": \"Microsoft.Common.PasswordBox\",\n    \"label\": {\n      \"password\": \"No special characters, between 12 and 30 characters long\",\n      \"confirmPassword\": \"Passwords must match\"\n    },\n    \"constraints\": {\n      \"required\": true,\n      \"regex\": \"^[a-z0-9A-Z]{12,30}$\",\n      \"validationMessage\": \"Must be between 12 and 30 alphanumeric characters long.\"\n    },\n    \"visible\": true,\n    \"options\": {\n      \"hideConfirmation\": false\n    },\n    \"toolTip\": \"Password for MongoDB admin\"\n  },\n</code></pre> <p>This JSON introduces two controls that will collect the admin username and password for the MongoDB container that will be created upon installation.</p> </li> <li> <p>Go to the <code>outputs</code> section at the bottom of the file and and add the following JSON.</p> <pre><code>\"app-mongoDBAdmin\" : \"[steps('ExtensionConfiguration').mongoDBAdmin]\",\n\"app-mongoDBPassword\" : \"[steps('ExtensionConfiguration').mongoDBPassword]\",\n</code></pre> <p>This JSON adds the values collected by the new UI controls to the output of the <code>createUIDefinition.json</code> file. These values are passed along to the ARM template that creates the resources being deployed.</p> </li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/#update-the-arm-template","title":"Update the ARM Template","text":"<p>About the cluster deployment file</p> <p>The <code>cluster-deployment.json</code> is an ARM template, used for deploying resources into Azure. This file receives the output of <code>createUIDefinition.json</code> as input parameters.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/#update-the-arm-template_1","title":"Update the ARM template","text":"<ol> <li> <p>Open the following file in your editor.</p> <p><code>container-labs\\container-package\\cluster-deployment.json</code></p> </li> <li> <p>add the following parameters to the parameters section.</p> <pre><code>\"app-mongoDBAdmin\": {\n    \"type\": \"string\",\n    \"metadata\": {\n        \"description\": \"Enter Mongo DB admin username\"\n    }\n},\n\"app-mongoDBPassword\": {\n    \"type\": \"secureString\",\n    \"metadata\": {\n        \"description\": \"Enter Mongo DB password\"\n    }\n}\n</code></pre> </li> </ol>"},{"location":"container/Labs/lab1-prepare-container-deployment/#inspect-the-arm-template","title":"Inspect the ARM template","text":"<p>Find the resource type <code>Microsoft.KubernetesConfiguration/extensions</code>. This is a Kubernetes cluster extension that builds on top of Help to produce an ARM-driven deployment experience.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/#update-manifest-file","title":"Update Manifest File","text":"<p>About manifest.yaml</p> <p>The manifest file brings together all elements of the deployment package by pointing at the other files you've been updating.</p>  <p>In this section you will update the manifest.yaml file.</p> <ol> <li> <p>Open the following file in your editor.</p> <p><code>container-labs\\container-package\\manifest.yaml</code></p> </li> <li> <p>Go to <code>registryServer:</code> and add your ACR server name.</p> </li> <li>Go to <code>namespace</code> and the same namespace you enter under helm value file.</li> </ol> <p>Congratulations! You have now finished this lab and your deployment files are ready for next steps.</p> <p>Continue to Lab 2</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/","title":"Express.js/MongoDB Azure sample app","text":"<p>Sample application to demonstrate how to deploy an Node.js (Express.js) app using MongoDB to Azure.  </p> <p>This repository is the sample code for the article https://docs.microsoft.com/en-us/azure/app-service/tutorial-nodejs-mongodb-app.  The article covers how to create the appropriate resources and deploy your application to Azure.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CHANGELOG/","title":"CHANGELOG","text":""},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CHANGELOG/#project-title-changelog","title":"[project-title] Changelog","text":""},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CHANGELOG/#xyz-yyyy-mm-dd","title":"x.y.z (yyyy-mm-dd)","text":"<p>Features * ...</p> <p>Bug Fixes * ...</p> <p>Breaking Changes * ...</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CONTRIBUTING/","title":"Contributing to [project-title]","text":"<p>This project welcomes contributions and suggestions.  Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit https://cla.opensource.microsoft.com.</p> <p>When you submit a pull request, a CLA bot will automatically determine whether you need to provide a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions provided by the bot. You will only need to do this once across all repos using our CLA.</p> <p>This project has adopted the Microsoft Open Source Code of Conduct. For more information see the Code of Conduct FAQ or contact opencode@microsoft.com with any additional questions or comments.</p> <ul> <li>Code of Conduct</li> <li>Issues and Bugs</li> <li>Feature Requests</li> <li>Submission Guidelines</li> </ul>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CONTRIBUTING/#code-of-conduct","title":"Code of Conduct","text":"<p>Help us keep this project open and inclusive. Please read and follow our Code of Conduct.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CONTRIBUTING/#found-an-issue","title":"Found an Issue?","text":"<p>If you find a bug in the source code or a mistake in the documentation, you can help us by submitting an issue to the GitHub Repository. Even better, you can submit a Pull Request with a fix.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CONTRIBUTING/#want-a-feature","title":"Want a Feature?","text":"<p>You can request a new feature by submitting an issue to the GitHub Repository. If you would like to implement a new feature, please submit an issue with a proposal for your work first, to be sure that we can use it.</p> <ul> <li>Small Features can be crafted and directly submitted as a Pull Request.</li> </ul>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CONTRIBUTING/#submission-guidelines","title":"Submission Guidelines","text":""},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CONTRIBUTING/#submitting-an-issue","title":"Submitting an Issue","text":"<p>Before you submit an issue, search the archive, maybe your question was already answered.</p> <p>If your issue appears to be a bug, and hasn't been reported, open a new issue. Help us to maximize the effort we can spend fixing issues and adding new features, by not reporting duplicate issues.  Providing the following information will increase the chances of your issue being dealt with quickly:</p> <ul> <li>Overview of the Issue - if an error is being thrown a non-minified stack trace helps</li> <li>Version - what version is affected (e.g. 0.1.2)</li> <li>Motivation for or Use Case - explain what are you trying to do and why the current behavior is a bug for you</li> <li>Browsers and Operating System - is this a problem with all browsers?</li> <li>Reproduce the Error - provide a live example or a unambiguous set of steps</li> <li>Related Issues - has a similar issue been reported before?</li> <li>Suggest a Fix - if you can't fix the bug yourself, perhaps you can point to what might be   causing the problem (line of code or commit)</li> </ul> <p>You can file new issues by providing the above information at the corresponding repository's issues link: https://github.com/[organization-name]/[repository-name]/issues/new].</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/CONTRIBUTING/#submitting-a-pull-request-pr","title":"Submitting a Pull Request (PR)","text":"<p>Before you submit your Pull Request (PR) consider the following guidelines:</p> <ul> <li> <p>Search the repository (https://github.com/[organization-name]/[repository-name]/pulls) for an open or closed PR   that relates to your submission. You don't want to duplicate effort.</p> </li> <li> <p>Make your changes in a new git fork:</p> </li> <li> <p>Commit your changes using a descriptive commit message</p> </li> <li>Push your fork to GitHub:</li> <li>In GitHub, create a pull request</li> <li>If we suggest changes then:</li> <li>Make the required updates.</li> <li> <p>Rebase your fork and force push to your GitHub repository (this will update your Pull Request):</p> <p><code>shell git rebase master -i git push -f</code></p> </li> </ul> <p>That's it! Thank you for your contribution!</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/code/LICENSE/","title":"LICENSE","text":"<pre><code>MIT License\n\nCopyright (c) Microsoft Corporation.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE\n</code></pre>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/container-package/AzureTodo/","title":"azure-ToDo","text":"<p>The Azure Vote application is a simple sample used throughout the Azure Container Service (AKS) documentation. The application consists of two pods, one running a nodeJs web form, and the second a mongodb instance for data storage.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/container-package/AzureTodo/#installing-the-chart","title":"Installing the Chart","text":"<p>Add the Azure Samples chart repository.</p> <pre><code>helm repo add azure-samples https://azure-samples.github.io/helm-charts/\n</code></pre> <p>Install the chart.</p> <pre><code>helm install azure-samples/azure-todo\n</code></pre>"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/container-package/AzureTodo/#configuration","title":"Configuration","text":"<p>The following tables lists the configurable parameters of the azure-vote chart and the default values.</p>    Parameter Description Default     title Azure todo app title. Azure ToDo App   serviceName Name for Kubernetes service. azure-todo   serviceType Type for Kubernetes service. ClusterIP"},{"location":"container/Labs/lab1-prepare-container-deployment/begin/container-package/AzureTodo/#examples","title":"Examples","text":"<pre><code>helm install azure-samples/azure-vote --set title=\"Winter Sports\" --set value1=Ski --set value2=Snowboard\n</code></pre>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/","title":"Express.js/MongoDB Azure sample app","text":"<p>Sample application to demonstrate how to deploy an Node.js (Express.js) app using MongoDB to Azure.  </p> <p>This repository is the sample code for the article https://docs.microsoft.com/en-us/azure/app-service/tutorial-nodejs-mongodb-app.  The article covers how to create the appropriate resources and deploy your application to Azure.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CHANGELOG/","title":"CHANGELOG","text":""},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CHANGELOG/#project-title-changelog","title":"[project-title] Changelog","text":""},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CHANGELOG/#xyz-yyyy-mm-dd","title":"x.y.z (yyyy-mm-dd)","text":"<p>Features * ...</p> <p>Bug Fixes * ...</p> <p>Breaking Changes * ...</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CONTRIBUTING/","title":"Contributing to [project-title]","text":"<p>This project welcomes contributions and suggestions.  Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit https://cla.opensource.microsoft.com.</p> <p>When you submit a pull request, a CLA bot will automatically determine whether you need to provide a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions provided by the bot. You will only need to do this once across all repos using our CLA.</p> <p>This project has adopted the Microsoft Open Source Code of Conduct. For more information see the Code of Conduct FAQ or contact opencode@microsoft.com with any additional questions or comments.</p> <ul> <li>Code of Conduct</li> <li>Issues and Bugs</li> <li>Feature Requests</li> <li>Submission Guidelines</li> </ul>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CONTRIBUTING/#code-of-conduct","title":"Code of Conduct","text":"<p>Help us keep this project open and inclusive. Please read and follow our Code of Conduct.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CONTRIBUTING/#found-an-issue","title":"Found an Issue?","text":"<p>If you find a bug in the source code or a mistake in the documentation, you can help us by submitting an issue to the GitHub Repository. Even better, you can submit a Pull Request with a fix.</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CONTRIBUTING/#want-a-feature","title":"Want a Feature?","text":"<p>You can request a new feature by submitting an issue to the GitHub Repository. If you would like to implement a new feature, please submit an issue with a proposal for your work first, to be sure that we can use it.</p> <ul> <li>Small Features can be crafted and directly submitted as a Pull Request.</li> </ul>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CONTRIBUTING/#submission-guidelines","title":"Submission Guidelines","text":""},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CONTRIBUTING/#submitting-an-issue","title":"Submitting an Issue","text":"<p>Before you submit an issue, search the archive, maybe your question was already answered.</p> <p>If your issue appears to be a bug, and hasn't been reported, open a new issue. Help us to maximize the effort we can spend fixing issues and adding new features, by not reporting duplicate issues.  Providing the following information will increase the chances of your issue being dealt with quickly:</p> <ul> <li>Overview of the Issue - if an error is being thrown a non-minified stack trace helps</li> <li>Version - what version is affected (e.g. 0.1.2)</li> <li>Motivation for or Use Case - explain what are you trying to do and why the current behavior is a bug for you</li> <li>Browsers and Operating System - is this a problem with all browsers?</li> <li>Reproduce the Error - provide a live example or a unambiguous set of steps</li> <li>Related Issues - has a similar issue been reported before?</li> <li>Suggest a Fix - if you can't fix the bug yourself, perhaps you can point to what might be   causing the problem (line of code or commit)</li> </ul> <p>You can file new issues by providing the above information at the corresponding repository's issues link: https://github.com/[organization-name]/[repository-name]/issues/new].</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/CONTRIBUTING/#submitting-a-pull-request-pr","title":"Submitting a Pull Request (PR)","text":"<p>Before you submit your Pull Request (PR) consider the following guidelines:</p> <ul> <li> <p>Search the repository (https://github.com/[organization-name]/[repository-name]/pulls) for an open or closed PR   that relates to your submission. You don't want to duplicate effort.</p> </li> <li> <p>Make your changes in a new git fork:</p> </li> <li> <p>Commit your changes using a descriptive commit message</p> </li> <li>Push your fork to GitHub:</li> <li>In GitHub, create a pull request</li> <li>If we suggest changes then:</li> <li>Make the required updates.</li> <li> <p>Rebase your fork and force push to your GitHub repository (this will update your Pull Request):</p> <p><code>shell git rebase master -i git push -f</code></p> </li> </ul> <p>That's it! Thank you for your contribution!</p>"},{"location":"container/Labs/lab1-prepare-container-deployment/end/code/LICENSE/","title":"LICENSE","text":"<pre><code>MIT License\n\nCopyright (c) Microsoft Corporation.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE\n</code></pre>"},{"location":"container/Labs/lab2-create-cnab-bundle-package/","title":"Lab 2","text":"<p>Home &gt; Container Offers &gt; Labs \ud83e\uddea</p>"},{"location":"container/Labs/lab2-create-cnab-bundle-package/#lab-2-create-cnab-bundle","title":"Lab 2 - Create CNAB Bundle","text":"<p>Note: This lab is part of a series of labs for Mastering Container Offers Workshop. You must finish this lab before moving on to the next sections.</p>  <p>In this lab, you will pull the CNAB bundler image and use it to create a CNAB bundle from the files you've prepared.</p>  <ul> <li>Download Microsoft's CNAB image</li> <li>Create and upload the CNAB Bundle</li> <li>Verify the published bundle image</li> </ul>"},{"location":"container/Labs/lab2-create-cnab-bundle-package/#download-microsofts-cnab-image","title":"Download Microsoft's CNAB image","text":"<p>About the Microsoft CNAB image</p> <p>The Microsoft CNAB Docker image contains all the tools needed to turn the files you've created into a CNAB bundle. This image exists because the opensource CNAB standards are changing frequently and this image is kept up to date with the latest tools to enable you to build a CNAB bundle without all of the manual steps needed.</p>  <p>Open terminal and run the following command to download Microsoft's CNAB builder image.</p> <pre><code>docker pull mcr.microsoft.com/container-package-app:latest\n</code></pre>"},{"location":"container/Labs/lab2-create-cnab-bundle-package/#create-and-upload-the-cnab-bundle","title":"Create and upload the CNAB Bundle","text":"<ol> <li> <p>You'll now start the the CNAB container in interactive mode, sharing a volume. Provide the full path to your <code>container-labs</code> directory where indicated.</p> <p>Below is an example of this command.</p> <pre><code>docker run -it -v /var/run/docker.sock:/var/run/docker.sock -v /mnt/c/Users/david/projects/container-labs:/data --entrypoint \"/bin/bash\" mcr.microsoft.com/container-package-app:latest\n</code></pre> <p>The following is the command to run. Replace [path to container-labs] with your complete path from the root of your drive.</p> <pre><code>docker run -it -v /var/run/docker.sock:/var/run/docker.sock -v [path to container-labs]:/data --entrypoint \"/bin/bash\" mcr.microsoft.com/container-package-app:latest\n</code></pre>  <p>After the container starts, you will be on the command line in the <code>container-package-app</code> container itself. Commands executed here will run within the container.</p>  </li> <li> <p>Run the following command to enter the shared volume.</p> <pre><code>cd data\n</code></pre> </li> <li> <p>Run the following to go into the <code>container-package</code> folder.</p> <pre><code>cd container-package\n</code></pre> </li> <li> <p>Run the following command to validate all files going into creating the CNAB bundle. Fix any issues indicated by the tool.</p> <pre><code>cpa verify\n</code></pre> </li> <li> <p>If not logged into Azure, run the following command to login. Follow the instructions given on the command line.</p> <pre><code>az login\n</code></pre> </li> <li> <p>Log in to your ACR.</p> <pre><code>az acr login -n &lt;ACR Server&gt; -u &lt;ACR Admin&gt; -p &lt;ACR password&gt;\n</code></pre> </li> <li> <p>Run the following command in the container terminal to start building the CNAB bundle and push it to the ACR you defined in the manifest file.</p> <pre><code>cpa buildbundle\n</code></pre> </li> </ol> <p>\u26a0\ufe0f The <code>cpa buildbundle</code> command may take some time to complete.</p> <p>When you see output similar to that shown in the below image, the command has completed.</p>"},{"location":"container/Labs/lab2-create-cnab-bundle-package/#verify-the-published-bundle-image","title":"Verify the published bundle image","text":"<p>Now that the CNAB bundle has been built, you'll ensure it is in place in your ACR.</p> <ol> <li>Log into Azure Portal</li> <li>Open your ACR resource</li> <li>Click on Services &gt; Repositories</li> <li> <p>You will see two repositories.</p> <ul> <li><code>com.nonmicrosoft.azuretodoapptest</code></li> <li><code>com.nonmicrosoft.azuretodoapptest-installer</code></li> </ul>  <p>About the <code>-installer</code> images</p> <p>The CNAB bundle manifest for the <code>com.nonmicrosoft.azuretodoapptest</code> bundle refers to the <code>com.nonmicrosoft.azuretodoapptest-installer</code> image. Therefore, the <code>com.nonmicrosoft.azuretodoapptest-installer</code> image must be in the ACR and may not be deleted.</p>  </li> <li> <p>Click on <code>com.nonmicrosoft.azuretodoapptest</code> bundle.</p> </li> <li>Click the <code>1.0.0</code> tag to inspect Artifact reference and manifest for that CNAB bundle.</li> </ol> <p>Congratulations! You have created and uploaded a CNAB bundle. You have also finished this lab.</p> <p>Continue to Lab 3</p>"},{"location":"container/Labs/lab3-publishing-container-offer/","title":"Lab 3","text":"<p>Home &gt; Container offers &gt; Labs \ud83e\uddea</p>"},{"location":"container/Labs/lab3-publishing-container-offer/#lab-3-publishing-the-container-offer","title":"Lab 3 - Publishing the Container offer","text":"<p>Note: This lab is part of a series of labs for Mastering Container offers Workshop. You must finish this lab before moving on to the next sections.</p> <p>[!IMPORTANT] </p> <p>In order to complete this lab, you must signup for public preview here</p>  <p>In this lab, you will create and publish a Container offer in Partner Center. This lab requires a Partner Center account.</p>  <ul> <li>Create a new Container offer</li> <li>Offer Setup</li> <li>Properties</li> <li>Offer listing</li> <li>Preview audience</li> <li>Plan overview</li> <li>Review and Publish</li> </ul>"},{"location":"container/Labs/lab3-publishing-container-offer/#create-a-new-container-offer","title":"Create a new Container offer","text":"<p>In this section you will be creating a brand new Container offer from scratch. This will be used for publishing the offer once the rest of your labs are complete.</p> <ol> <li>On the homepage of Partner Center, look for the Marketplace Offers tile and click it. If you have disabled Workspaces, then it will be visible as Commercial Marketplace.</li> <li>Click the + New Offer button and select Azure Container from the dropdown.</li> <li>Enter a unique Offer ID and an Offer Alias as described below.<ul> <li>Offer ID: cw-YOUR_UNIQUE_STRING (Replace the YOUR_UNIQUE_STRING with a value of your choice)</li> <li>Offer Alias: Container Workshop</li> <li>Submit the new offer.</li> </ul> </li> <li>Once the offer is created, navigate to the Offer Setup page by clicking on that tab on the left</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#offer-setup","title":"Offer Setup","text":"<p>The Offer Setup page allows changing your offer alias as well as as other functions. For the purpose of this lab, we will leave everything as is and only configure the Setup details.</p>"},{"location":"container/Labs/lab3-publishing-container-offer/#setup-details","title":"Setup details","text":"<ol> <li>Under Setup details check Yes, I would like to sell through Microsoft and have Microsoft host transactions on my behalf.</li> <li>Click Save draft.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#properties","title":"Properties","text":"<p>Navigate to the Properties tab on the left.</p>"},{"location":"container/Labs/lab3-publishing-container-offer/#categories","title":"Categories","text":"<p>You must select at least one category for your offer. COntainer offers must be mapped as below so they are displayed in the right place in the marketplace.</p> <ol> <li>Click the + Categories link.</li> <li>In the left dropdown, select Containers.</li> <li>In the right dropdown, select Kubernetes App.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#legal","title":"Legal","text":"<p>You will use the Microsoft Standard Contract for this lab. You may choose differently when you are publishing to a production environment.</p> <ol> <li>Scroll down to the Legal section.</li> <li>Select \"Use the Standard Contract for Microsoft\u2019s commercial marketplace?\" checkbox</li> <li>Click Accept.</li> <li>Click the Save draft button.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#offer-listing","title":"Offer listing","text":"<p>Navigate to the Offer listing page in the left hand menu.</p> <ol> <li> <p>In the the Search results summary section, enter some text. Here is some text you may copy and paste for this purpose.Of course you would use real verbiage in your plan.</p> <pre><code>Quis aute iure reprehenderit in voluptate ...\n</code></pre> </li> <li> <p>For Short Description and Description sections, here is some text you may choose to copy and paste into the text boxes.</p> <pre><code>Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n</code></pre> </li> <li> <p>Somewhere in the description, add the phrase \"Kubernetes app.\"</p>  <p>\ud83d\uddd2\ufe0f This ensures the offer shows up in the correct search results.</p>  </li> <li> <p>In the Privacy policy link, enter the public link to the privacy policy for your company if you know it. If not, use the following link.</p> <pre><code>https://privacy.microsoft.com/privacystatement\n</code></pre>  <p>\u26a0\ufe0f Please note that using Microsoft's privacy policy is only for the purpose of this lab and should not be used for your production offer.</p>  </li> <li> <p>In the Support Contact section, enter your contact information.</p> </li> <li>In the Engineering Contact section, enter your engineering contact information.</li> <li>For the Marketplace media section you'll upload 2 images.<ol> <li>For the 216x216 logo image, upload the PNG provided in the <code>./images</code> directory of lab3. This PNG is here: \"Contoso-Logo-216x216.png.\"</li> <li>For the 1280x720 screenshot image, upload the PNG provided in the <code>./images</code> directory of lab1. This PNG is here: \"Screenshots-1280x720.png.\"</li> <li>Add a screenshot image caption.</li> </ol> </li> <li>Click the Save draft button and correct any errors that be shown before moving on.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#preview-audience","title":"Preview audience","text":"<p>The preview audience specifies the subscriptions that will be able to test the offer before it goes live, when it is in the Preview state. Everyone using the Preview audience subscription will be able to purchase the offer when in Preview (test) mode.</p> <ol> <li>In the Preview audience section, enter your Azure subscription Id to use for testing.</li> <li>Enter a Description (Optional).</li> <li>Click Save draft.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#plan-overview","title":"Plan overview","text":"<ol> <li>Select the Plan overview section and click on New Plan.</li> <li>Give your plan a unique <code>Plan Id</code> and <code>Plan name</code> and click Create.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#plan-listing","title":"Plan listing","text":"<ol> <li>Open the Plan listing .</li> <li>You can edit the plan name if you wish.</li> <li>Fill in the Plan summary. Add relevant text here as your plan summary.</li> <li>Fill in the Plan description. Add relevant text here as your plan description.</li> <li>Click Save Draft.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#pricing-and-availability","title":"Pricing and availability","text":"<ol> <li>Open the Pricing and availability tab.</li> <li>For the Edit Market section, select at least one market in which to sell your product. This is typically the United States.</li> <li>Under Pricing  select  Custom price.</li> <li>Select Per Core and enter price as 0 USD/hour. For this workshop, you don't want to charge your account when testing.</li> <li>Click Save Draft.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#technical-configuration","title":"Technical configuration","text":"<ol> <li>Go to the Technical Configuration tab. </li> <li>For the Cluster extension type, enter `YOUR-COMPANY-NAME.AzureTodoApp'.</li> <li> <p>Click the Add CNAB Bundle link and the Azure Container Registry dialog appears.</p>  </li> <li> <p>Select your ACR as Registry.</p> </li> <li>For Repo select <code>com.nonmicrosoft.azuretodoapptest</code>.</li> <li>For CNAB Bundle, select the <code>1.0.0</code> version you published earlier.</li> <li>Click Add CNAB Bundle.</li> <li>Click Save draft.</li> </ol>"},{"location":"container/Labs/lab3-publishing-container-offer/#review-and-publish","title":"Review and Publish","text":"<p>Finally click the Review and publish button.</p> <p>You should now see green checkmarks for all the sections. This means you ready to publish. Click on Publish at the bottom to start the publishing process.</p>  <p>Note: It will take a while for the offer to publish ETA 2 days due to certification process.</p>  <p>Congratulations! You have now finished this lab.</p> <p>Continue to Lab 4</p>"},{"location":"container/Labs/lab4-purchasing-container-offer/","title":"Lab 4","text":"<p>Home &gt; Container Offers &gt; Labs \ud83e\uddea</p>"},{"location":"container/Labs/lab4-purchasing-container-offer/#lab-4-purchasing-the-container-offer","title":"Lab 4 - Purchasing the Container Offer","text":"<p>Note: This lab is part of a series of labs for Mastering Container Offers Workshop. </p>  <p>This lab puts you in the role of a customer who will purchase the offer you have published. </p>  <ul> <li>Purchase your Offer</li> </ul>   <p>Note: If the your offer is not published yet please proceed to Purchase Azure Vote Offer</p>"},{"location":"container/Labs/lab4-purchasing-container-offer/#purchase-your-offer","title":"Purchase your Offer","text":"<ol> <li>You created an AKS cluster in the prerequisites to these labs. If that AKS cluster is stopped, start it.</li> <li>Open Azure Portal Marketplace in your browser.</li> <li>Search for Azure Vote K8s App Demo Offer then click on Offer to  Create. </li> <li>Select Test Plan  and click Create.</li> <li>Under the Basics tab, Select the Subscription and Resource Group </li> <li>Under the Cluser Details tab, Select the cluster we created in Lab0</li> <li>Under the Cluster Extension Details Fill all the missing fields. </li> </ol>"},{"location":"container/Labs/lab4-purchasing-container-offer/#access-azure-vote-solution","title":"Access Azure Vote Solution","text":"<ol> <li>In Azure Portal Open your Cluster blade</li> </ol>  <ol> <li>Click on Workloads to verify Azure Vote Pods are up and running</li> </ol>  <ol> <li>Click on Servoces and Ingresses to locate Azure-vote-front service and Click on External IP Address</li> </ol>  <ol> <li>Azure Vote front app will load on new Tab</li> </ol>"},{"location":"container/Labs/lab4-purchasing-container-offer/#purchase-azure-vote-offer","title":"Purchase Azure Vote Offer","text":"<ol> <li>You created an AKS cluster in the prerequisites to these labs. If that AKS cluster is stopped, start it.</li> <li>Open Azure Portal Marketplace in your browser.</li> <li>Search for Azure Vote K8s App Demo Offer then click on Offer to  Create. </li> <li>Select Test Plan  and click Create.</li> <li>Under the Basics tab, Select the Subscription and Resource Group </li> <li>Under the Cluser Details tab, Select the cluster we created in Lab0</li> <li>Under the Cluster Extension Details Fill all the missing fields. </li> </ol>"},{"location":"container/Labs/lab4-purchasing-container-offer/#access-azure-vote-solution_1","title":"Access Azure Vote Solution","text":"<ol> <li>In Azure Portal Open your Cluster blade</li> </ol>  <ol> <li>Click on Workloads to verify Azure Vote Pods are up and running</li> </ol>  <ol> <li>Click on Servoces and Ingresses to locate Azure-vote-front service and Click on External IP Address</li> </ol>  <ol> <li>Azure Vote front app will load on new Tab</li> </ol>"},{"location":"container/Labs/lab4-purchasing-container-offer/#purchase-azure-vote-offer_1","title":"Purchase Azure Vote Offer","text":"<ol> <li>You created an AKS cluster in the prerequisites to these labs. If that AKS cluster is stopped, start it.</li> <li>Open Azure Portal Marketplace in your browser.</li> <li>Search for Azure Vote K8s App Demo Offer then click on Offer to  Create. </li> <li>Select Test Plan  and click Create.</li> <li>Under the Basics tab, Select the Subscription and Resource Group </li> <li>Under the Cluser Details tab, Select the cluster we created in Lab0</li> <li>Under the Cluster Extension Details Fill all the missing fields. </li> </ol>"},{"location":"container/Labs/lab4-purchasing-container-offer/#access-azure-vote-solution_2","title":"Access Azure Vote Solution","text":"<ol> <li>In Azure Portal Open your Cluster blade</li> </ol>  <ol> <li>Click on Workloads to verify Azure Vote Pods are up and running</li> </ol>  <ol> <li>Click on Servoces and Ingresses to locate Azure-vote-front service and Click on External IP Address</li> </ol>  <ol> <li>Azure Vote front app will load on new Tab</li> </ol>  <p>Congratulations! You have now successfully completed this lab as well as purchased the offer the you created. </p> <p>This is the last lab in the lab series.</p>"},{"location":"container/Labs/prerequisites/","title":"Lab Prerequisites","text":"<p>Home &gt; Container Offers &gt; Labs</p>"},{"location":"container/Labs/prerequisites/#lab-prerequisites","title":"Lab Prerequisites","text":"<p>\u26a0\ufe0fIMPORTANT</p> <p>To complete the labs that use partner Center, you must sign up for the Container offers public preview here</p>  <p>There are several must-have and some nice-to-have prerequisites for completing the labs in the Mastering Container offers course.</p>"},{"location":"container/Labs/prerequisites/#accounts","title":"Accounts","text":"<p>To complete these labs you will need the following accounts.</p> <ul> <li>An Azure account to be used to create resources through the Azure portal</li> <li>A Partner Center account wherein you can create offers</li> </ul>"},{"location":"container/Labs/prerequisites/#software","title":"Software","text":"<p>The following software is also needed to complete set labs. The below steps walk you through setting up these software prerequisites.</p> <ol> <li>An Azure Container Registry</li> <li>An Azure Kubernetes Service instance</li> <li>Docker Desktop</li> <li>For Windows users, the Windows Subsystem for Linux (WSL2) must be installed. See these instructions to install it.</li> <li>You'll spend a lot of time on the command line in these labs. For Windows users we recommend installing Windows Terminal as it gives a great terminal experience on Windows.</li> <li>A text editor of your choice. We recommend VS Code for any platform.</li> </ol> <p>Once you have completed these prerequisites, go back to the Container Offer labs home page and proceed to the first lab.</p>"},{"location":"container/Labs/prerequisites/#experience","title":"Experience","text":"<p>Although not necessary to make it through the labs, you will get more value with experience in the following topics. Again, knowledge of these topics is not required, but recommended. </p> <ol> <li>Docker</li> <li>Helm</li> <li>ARM templates</li> <li>Azure Container Registry</li> <li>Kubernetes</li> <li>Linux command line</li> </ol>"},{"location":"container/Labs/prerequisites/acr/","title":"Acr","text":"<p>Home &gt; Container Offers &gt; Prerequisites</p>"},{"location":"container/Labs/prerequisites/acr/#azure-container-registry-acr-prerequisite","title":"Azure Container Registry (ACR) Prerequisite","text":"<ul> <li>Create the ACR</li> <li>Give the Marketplace access to your ACR</li> </ul>"},{"location":"container/Labs/prerequisites/acr/#create-the-acr","title":"Create the ACR","text":"<p>This exercise walks through creating an Azure Container Registry (ACR) for use in the Container Offers lab.</p> <ol> <li>Sign in to the Azure portal</li> <li> <p>Select Create a resource &gt; Containers &gt; Container Registry.</p>  </li> <li> <p>In the Basics tab, enter values for Resource group and Registry name. The registry name must be unique within Azure, and contain 5-50 alphanumeric characters. </p> </li> <li>For this lab create a new resource group in the <code>West US</code> location named <code>myResourceGroup</code>.</li> <li> <p>For SKU, select 'Basic'.</p>  </li> <li> <p>Accept default values for the remaining settings. Select the Review + create button at the bottom of the screen. </p> </li> <li>After reviewing the settings, select Create. The deployment of the ACR begins.</li> <li> <p>When the <code>Deployment succeeded</code> message appears, click the Go to resource button. You will see the ACR as in the image below.</p>  </li> <li> <p>Take note of the registry name and the value of the Login server, which is a fully qualified name ending with <code>azurecr.io</code>. You will use these values later.</p> </li> </ol>"},{"location":"container/Labs/prerequisites/acr/#give-the-marketplace-access-to-your-acr","title":"Give the Marketplace access to your ACR","text":"<p>The Azure Marketplace will host your CNAB in a Marketplace special ACR of its own. You must grant access to the Microsoft ACR by creating a special service principal in your tenant. </p>  <p>\ud83d\uddd2\ufe0f To perform these steps you must have the Azure CLI installed.</p>  <ol> <li> <p>Run the following commands to add the service principal.</p> <pre><code>az login\naz ad sp create --id 32597670-3e15-4def-8851-614ff48c1efa\n</code></pre> <p>Note this ID for use in the following steps.</p> </li> <li> <p>Get the ID of your ACR.</p> <pre><code>az acr show --name &lt;ACR Server&gt; --query \"id\" --output tsv\n</code></pre> <p>Note the full ID for the use in the following steps.</p> </li> <li> <p>Create a role assignment to grant the service principal the ability to pull from your registry using the values you obtained earlier.</p>  <p>\ud83d\uddd2\ufe0f To assign Azure roles, you must have the following.</p> <p><code>Microsoft.Authorization/roleAssignments/write</code> permissions, such as User Access Administrator or Owner.</p>  <p>Run the following command.</p> <pre><code>az role assignment create --assignee &lt;service-principal-id&gt; --scope &lt;registry-id&gt; --role acrpull\n</code></pre> </li> <li> <p>The <code>Microsoft.PartnerCenterIngestion</code> resource provider must be registered on the same subscription used to create your Azure Container Registry. Use the following command to do the registration.</p> <pre><code>az provider register --namespace Microsoft.PartnerCenterIngestion --subscription &lt;subscription-id&gt; --wait\n</code></pre> <p>Use the following command to monitor the progress of the provider registration to ensure it completes successfully.</p> <pre><code>az provider show -n Microsoft.PartnerCenterIngestion --subscription &lt;subscription-id&gt;\n</code></pre> </li> </ol> <p>Congratulations! You now have an Azure Container Registry to use in the labs and perhaps eventually for your production offers.</p> <p>Go back to the lab prerequisites and follow on with remaining steps.</p>"},{"location":"container/Labs/prerequisites/aks/","title":"Aks","text":"<p>Home &gt; Container Offers &gt; Prerequisites</p>"},{"location":"container/Labs/prerequisites/aks/#create-aks-cluster-prerequisite","title":"Create AKS Cluster Prerequisite","text":"<p>This page will walk you through setting up a Azure Kubernetes (AKS) Cluster. </p>"},{"location":"container/Labs/prerequisites/aks/#create-an-aks-cluster","title":"Create an AKS cluster","text":"<ol> <li>Sign in to the Azure portal.</li> <li>On the Azure portal menu or from the Home page, select Create a resource.</li> <li>Select Containers &gt; Kubernetes Service.</li> <li> <p>On the Basics tab, configure the following options.</p> <ul> <li>Project details:<ul> <li>Select an Azure Subscription.</li> <li>Select or create an Azure Resource group, such as myResourceGroup.</li> </ul> </li> <li>Cluster details:<ul> <li>Ensure the the Preset configuration is Dev/Test ($). </li> <li>Enter a Kubernetes cluster name, such as myAKSCluster.</li> <li>Select a Region for the AKS cluster. Us <code>US West 3</code> as it supports the Primary node pool settings you will select next.</li> <li>Leave the default value selected for Kubernetes version.</li> <li>API server availability - Select 99.5%.</li> </ul> </li> <li>Primary node pool:<ul> <li>Select Standard B4ms</li> <li>Enter 1 node for Node count range as shown in the below image.</li> </ul> </li> </ul>  </li> <li> <p>Select Next: Node pools.</p> </li> <li>Keep the default Node pools options. At the bottom of the screen, click Next: Access.</li> <li>On the Access page, Keep the default.  At the bottom of the screen, click Next: Networking.</li> <li> <p>On the Networking page</p> <ul> <li>Check Enable HTTP application routing</li> <li>Keep other values default</li> </ul>  </li> <li> <p>Click Review + create. </p>  <p>Note: When you navigate to the Review + create tab, Azure runs validation on the settings that you have chosen. </p>  </li> <li> <p>If validation passes, you can proceed to create the AKS cluster by selecting Create. If validation fails, then it indicates which settings need to be modified.</p> </li> </ol>  <p>\ud83d\uddd2\ufe0f It takes a few minutes to deploy the AKS cluster.</p> <p>After your AKS cluster is created, you may stop it to save money on your Azure bill whicle going through the first set of labs.</p>  <p>Congratulations! You now have an AKS Cluster to use in the labs.</p> <p>Go back to the lab prerequisites and follow on with remaining steps.</p>"},{"location":"container/Labs/prerequisites/docker/","title":"Docker","text":"<p>Home &gt; Container Offers &gt; Prerequisites</p>"},{"location":"container/Labs/prerequisites/docker/#install-docker-desktop","title":"Install Docker Desktop","text":"<p>Install Docker Desktop locally if you don't already have it.</p> <ol> <li>Go to Download and install.</li> <li> <p>Choose your operating system and follow the instructions</p>  </li> </ol>"},{"location":"learning-paths/","title":"Index","text":"<p>Home</p>"},{"location":"learning-paths/#what-do-you-want-to-learn-today","title":"\ud83d\udea6What do you want to learn today?","text":"<ul> <li>Where to get started</li> <li>Working with Partner Center</li> <li>Working with SaaS offers</li> <li>Working with the SaaS Accelerator (\u23ef\ufe0f on-demand course)</li> <li>Working with Virtual Machine offers</li> <li>Working with Azure Managed Application offers</li> <li>Working with Microsoft Teams offers</li> </ul>"},{"location":"learning-paths/ama-offers/","title":"Ama offers","text":"<p>Home &gt; Learning Paths</p>"},{"location":"learning-paths/ama-offers/#working-with-azure-managed-application-offers","title":"\ud83d\udea6Working with Azure Managed Application offers","text":""},{"location":"learning-paths/ama-offers/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Getting started with Azure Managed Application offers</li> <li>I am a technologist building a Azure Managed Application offer</li> </ul>"},{"location":"learning-paths/ama-offers/#getting-started-with-azure-managed-application-offers","title":"Getting started with Azure Managed Application offers","text":"<ul> <li>Managed Applications Overview (\u23ef\ufe0fvideo)</li> <li>Azure Managed Applications Overview (\u23ef\ufe0fvideo)</li> <li>Partner Center with Azure Managed Applications Overview (\u23ef\ufe0fvideo)</li> <li>Configuring Partner Center for Azure Managed Applications - Demo (\u23ef\ufe0fvideo)</li> <li>Plan the Offer</li> <li>Plan an Azure managed application</li> <li>Create an Azure application offer</li> <li>Managed application metered billing</li> </ul>"},{"location":"learning-paths/ama-offers/#i-am-a-technologist-building-a-azure-managed-application-offer","title":"I am a technologist building a Azure Managed Application offer","text":"<ul> <li>Mastering Azure Managed Application Offers (\u23ef\ufe0f\ud83e\uddeaon-demand course)</li> <li>Add technical details for an Azure application offer</li> <li>Marketplace metered billing APIs</li> <li>Partner Center submission API to onboard Azure apps in Partner Center</li> <li>Create UI Definition Sandbox</li> </ul>"},{"location":"learning-paths/getting-started/","title":"Getting started","text":"<p>Home &gt; Learning Paths</p>"},{"location":"learning-paths/getting-started/#getting-started-with-the-commercial-marketplace","title":"\ud83d\udea6Getting started with the commercial marketplace","text":""},{"location":"learning-paths/getting-started/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Marketplace essentials</li> <li>Design your offer</li> <li>Build your offer</li> <li>Publish your offer</li> <li>Go to market with incentive programs</li> </ul>"},{"location":"learning-paths/getting-started/#marketplace-essentials","title":"Marketplace essentials","text":"<ul> <li>What is the Microsoft commercial marketplace?</li> <li>Introduction to the Microsoft commercial marketplace (Microsoft Learn Training)</li> <li>Sell through the commercial marketplace (Microsoft Learn Training)</li> <li>Getting Started in Marketplace (\u23f2\ufe0f Marketplace Office Hours)</li> <li>Publishing guide by offer type</li> <li>Introduction to listing options</li> <li>Billing options by offer type</li> <li>Commercial marketplace transact capabilities</li> <li>Azure Marketplace listing guidelines</li> </ul>"},{"location":"learning-paths/getting-started/#design-your-offer","title":"Design your offer","text":"<ul> <li>Creating Plans and Pricing for your SaaS Offer (\u23f2\ufe0f Marketplace Office Hours)</li> <li>Customer Subscription Lifecycle (\u23f2\ufe0f Marketplace Office Hours)</li> </ul>"},{"location":"learning-paths/getting-started/#build-your-offer","title":"Build your offer","text":""},{"location":"learning-paths/getting-started/#what-is-a-saas-offer","title":"What is a SaaS offer?","text":"<ul> <li>SaaS Offer Overview (\u23ef\ufe0f video)</li> <li>Plan a SaaS offer for the commercial marketplace</li> </ul>"},{"location":"learning-paths/getting-started/#what-is-an-azure-managed-application-offer","title":"What is an Azure Managed Application offer?","text":"<ul> <li>Azure Managed Application overview (\u23ef\ufe0f video)   </li> <li>Plan an Azure managed application offer</li> </ul>"},{"location":"learning-paths/getting-started/#what-is-a-azure-virtual-machine-offer","title":"What is a Azure Virtual Machine offer?","text":"<ul> <li>Creating Virtual Machine offers overview (\u23ef\ufe0f video)</li> <li>Plan a virtual machine offer</li> </ul>"},{"location":"learning-paths/getting-started/#publish-your-offer","title":"Publish your offer","text":"<ul> <li>Overview of Common Certification Errors  (\u23f2\ufe0f Marketplace Office Hours)</li> <li>Advanced Certification Overview (\u23f2\ufe0f Marketplace Office Hours)</li> </ul>"},{"location":"learning-paths/getting-started/#go-to-market-with-incentive-programs","title":"Go to market with incentive programs","text":"<ul> <li>Go to market through the commercial marketplace (Microsoft Learn Training)</li> <li>Marketplace Rewards Overview (\u23f2\ufe0f Marketplace Office Hours)</li> <li>Co-sell with Microsoft sales teams and partners overview</li> <li>Configure a Co-sell solution</li> <li>Azure Consumption Commitment (MACC) benefit</li> <li>Azure Consumption Commitment (MACC) enrollment</li> <li>Cloud Solution Provider program</li> </ul>"},{"location":"learning-paths/partner-center/","title":"Partner center","text":"<p>Home &gt; Learning Paths</p>"},{"location":"learning-paths/partner-center/#working-with-partner-center","title":"\ud83d\udea6Working with Partner Center","text":""},{"location":"learning-paths/partner-center/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Getting started with Partner Center</li> <li>Working with SaaS offers</li> <li>Working with Virtual Machine offers</li> <li>Working with Azure Managed Application offers</li> <li>Private offers</li> <li>Private plans</li> </ul>"},{"location":"learning-paths/partner-center/#getting-started-with-partner-center","title":"Getting started with Partner Center","text":"<ul> <li>What is the Microsoft Partner Network?</li> <li>Join the Microsoft Partner Network (enrollment page)    </li> <li>Create a commercial marketplace account in Partner Center</li> <li>Manage your Partner Center account</li> <li>Get help with Partner Center</li> </ul>"},{"location":"learning-paths/partner-center/#working-with-saas-offers","title":"Working with SaaS offers","text":"<ul> <li>Working with SaaS Offers (\u23ef\ufe0fvideo series)</li> <li>Plan a SaaS offer</li> <li>Plan a test and development SaaS offer</li> </ul>"},{"location":"learning-paths/partner-center/#working-with-virtual-machine-offers","title":"Working with Virtual Machine offers","text":"<ul> <li>Working with Virtual Machine Offers (\u23ef\ufe0fvideo)    </li> <li>Plan a virtual machine offer</li> <li>Create a virtual machine offer</li> </ul>"},{"location":"learning-paths/partner-center/#working-with-azure-managed-application-offers","title":"Working with Azure Managed Application offers","text":"<ul> <li>Working with Azure Managed Application offers (\u23ef\ufe0fvideo)    </li> <li>Plan an Azure Managed Application offer</li> <li>Create an Azure application offer</li> </ul>"},{"location":"learning-paths/partner-center/#private-offers","title":"Private offers","text":"<ul> <li>Working with Private Offers (\u23ef\ufe0fvideo series)</li> <li>ISV to customer private offers</li> <li>ISV to CSP partner private offers</li> </ul>"},{"location":"learning-paths/partner-center/#private-plans","title":"Private plans","text":"<ul> <li>Publishing a Private SaaS Plan (\u23ef\ufe0fvideo)</li> <li>Purchasing a Private SaaS Plan (\u23ef\ufe0fvideo) </li> <li>Troubleshooting private plans</li> <li>Private plans in the Microsoft commercial marketplace</li> </ul>"},{"location":"learning-paths/saas-offers/","title":"Saas offers","text":"<p>Home &gt; Learning Paths</p>"},{"location":"learning-paths/saas-offers/#working-with-saas-offers","title":"\ud83d\udea6Working with SaaS Offers","text":""},{"location":"learning-paths/saas-offers/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Getting started creating a SaaS offer</li> <li>I am a technologist building a SaaS offer</li> <li>I want to learn about the SaaS Accelerator</li> </ul>"},{"location":"learning-paths/saas-offers/#getting-started-creating-a-saas-offer","title":"Getting started creating a SaaS offer","text":"<ul> <li>SaaS offer overview (\u23ef\ufe0fvideo)</li> <li>General SaaS topics (\u23ef\ufe0fvideo series)</li> <li>Create a SaaS offer for the commercial marketplace (Microsoft Learn Training)</li> <li>Plan a SaaS offer for the commercial marketplace</li> <li>Create a SaaS offer</li> </ul>"},{"location":"learning-paths/saas-offers/#i-am-a-technologist-building-a-saas-offer","title":"I am a technologist building a SaaS offer","text":"<ul> <li>SaaS offer technical overview (\u23ef\ufe0fvideo)</li> <li>SaaS technical topics (\u23ef\ufe0fvideo series)</li> <li>Add technical details for a SaaS offer</li> <li>Managing the SaaS subscription life cycle</li> <li>SaaS fulfillment Subscription APIs v2</li> <li>SaaS fulfillment operations APIs v2</li> <li>Implementing a webhook on the SaaS service</li> </ul>"},{"location":"learning-paths/saas-offers/#i-want-to-learn-about-the-saas-accelerator","title":"I want to learn about the SaaS Accelerator","text":"<ul> <li>Mastering the SaaS Accelerator (\u23ef\ufe0f\ud83e\uddeaon demand-course)</li> </ul>"},{"location":"learning-paths/teams-offers/","title":"Teams offers","text":"<p>Home &gt; Learning Paths</p>"},{"location":"learning-paths/teams-offers/#working-with-microsoft-teams-offers","title":"\ud83d\udea6Working with Microsoft Teams offers","text":""},{"location":"learning-paths/teams-offers/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Selling Microsoft Teams applications overview topics</li> <li>I am a technologist building a Teams offers</li> <li>About the publication process</li> </ul> <p>The content on this page assumes you are familiar with creating basic Teams applications. It focuses on topics applicable to selling Teams applications on the Microsoft commercial marketplace.</p>  <p>Note: Content related to creating SaaS applications can be found through the \"Working with SaaS Offers\" learning path.</p>"},{"location":"learning-paths/teams-offers/#selling-microsoft-teams-applications-overview-topics","title":"Selling Microsoft Teams applications overview topics","text":"<ul> <li>Monetizing your Teams app (\u23ef\ufe0fvideo series)</li> <li>The Microsoft Teams marketplace (\u23ef\ufe0fvideo series)</li> <li>Choose a pricing model</li> </ul>"},{"location":"learning-paths/teams-offers/#i-am-a-technologist-building-a-teams-offers","title":"I am a technologist building a Teams offers","text":"<ul> <li>The technologies you need to know (\u23ef\ufe0fvideo series)</li> <li>Build your own transactable Teams application! (\ud83e\uddeahands-on labs)</li> <li>Build and Sell Teams Apps in Microsoft AppSource and Teams store (\u23f2\ufe0fMarketplace Office Hours)</li> <li>Build and sell Microsoft Teams apps in Microsoft AppSource and the Microsoft Teams store (Microsoft Learn course)</li> <li>Include a SaaS offer with your Teams app</li> <li>In-app purchases</li> <li>Testing in the preview stage</li> </ul>"},{"location":"learning-paths/teams-offers/#about-the-publication-process","title":"About the publication process","text":"<ul> <li>Microsoft Teams store validation guidelines</li> <li>Resolve issues if your Teams store submission fails</li> <li>Common reasons for app validation failure</li> </ul>"},{"location":"learning-paths/virtual-machine-offers/","title":"Virtual machine offers","text":"<p>Home &gt; Learning Paths</p>"},{"location":"learning-paths/virtual-machine-offers/#working-with-virtual-machine-offers","title":"\ud83d\udea6Working with Virtual Machine offers","text":""},{"location":"learning-paths/virtual-machine-offers/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Getting started creating Virtual Machine offers</li> <li>I am a technologist building Virtual Machine offers</li> </ul>"},{"location":"learning-paths/virtual-machine-offers/#getting-started-creating-virtual-machine-offers","title":"Getting started creating Virtual Machine offers","text":"<ul> <li>Creating Virtual Machine Offers Overview (\u23ef\ufe0fvideo)</li> <li>Creating an Offer in Partner Center Demo (\u23ef\ufe0fvideo)</li> <li>Create a virtual machine offer for the commercial marketplace (Microsoft Learn Training)</li> <li>Plan a virtual machine offer</li> <li>Create a virtual machine offer</li> <li>Configure pricing and availability for a virtual machine offer</li> </ul>"},{"location":"learning-paths/virtual-machine-offers/#i-am-a-technologist-building-virtual-machine-offers","title":"I am a technologist building Virtual Machine offers","text":"<ul> <li>Mastering Virtual Machine Offers (\u23ef\ufe0f\ud83e\uddeaon-demand video course)</li> <li>Create a virtual machine using an approved base</li> <li>Create a virtual machine using your own image</li> <li>Test a virtual machine image</li> <li>Troubleshoot virtual machine certification</li> <li>Deprecate or restore a virtual machine offer</li> <li>Technical configuration for a virtual machine offer</li> </ul>"},{"location":"metered-billing-accelerator/","title":"Mastering the Metered Billing Solution","text":"<p>This series of video modules and hands-on labs is designed to help you understand, install, use, and customize the Metered Billing Accelerator project. The Metered Billing Accelerator provides a fully functional community-led Metered Billing reference implementation for those interested in publishing transactable offer with Metered Billing support in Microsoft's marketplace in hours instead of days.</p>  <p>Let us know what you need in this content library.</p> <p>This series is designed to help you speed your time to publish SaaS or Managed app offer with metered billing support to the Microsoft commercial marketplace using the Metered Billing Solution.</p>"},{"location":"metered-billing-accelerator/#video-learning-modules","title":"Video Learning Modules","text":""},{"location":"metered-billing-accelerator/#a-metered-billing-accelerator-hands-on-tour-the-basics","title":"A Metered Billing Accelerator Hands-on Tour - The Basics","text":"<p>Video</p> <p>This introduction to the accelerator demonstrates the Metered Billing Accelerator's core capabilities showing why it may be a good choice for your marketplace offers with Metered Billing capabilities. In three short demos, this video shows its fundamental capabilities. </p>"},{"location":"metered-billing-accelerator/#metered-billing-accelerator-architecture","title":"Metered Billing Accelerator Architecture","text":"<p>Video</p> <p>This quick video covers the overall architecture of the Metered Billing Accelerator. The architecture is straightforward and is explained in plain language appropriate for those with any level of experience with Azure.</p>"},{"location":"metered-billing-accelerator/#installing-the-metered-billing-accelerator","title":"Installing the Metered Billing Accelerator","text":"<p>Video</p> <p>Installing the Metered Billing Accelerator is simple. This video walks you through from beginning to end the steps necessary to get the Metered Billing Accelerator up and running. </p> <p>This video will get you up and running with the Metered Billing Accelerator in no time at all!</p>"},{"location":"metered-billing-accelerator/#invoking-metered-billing-with-the-metered-billing-accelerator","title":"Invoking Metered Billing with the Metered Billing Accelerator","text":"<p>Video</p> <p>We look at the metered billing capabilities of the Metered Billing Accelerator for the Azure Marketplace. This video shows how to manually invoke metered billing events from the Metered Billing Accelerator.</p>"},{"location":"metered-billing-accelerator/#configure-saas-offer-with-the-metered-billing-accelerator","title":"Configure SaaS offer with the Metered Billing Accelerator","text":"<p>Video</p> <p>In this video will show how it is easy to configure your SaaS Offer with Metered Billing Accelerator to trigger metered billing events automatically.</p>"},{"location":"metered-billing-accelerator/#configure-managed-application-offer-with-the-metered-billing-accelerator","title":"Configure Managed Application offer with the Metered Billing Accelerator","text":"<p>Video</p> <p>In this video will show how it is easy to configure your managed application Offer with Metered Billing Accelerator to trigger metered billing events automatically.</p>"},{"location":"metered-billing-accelerator/#hands-on-labs","title":"Hands-on labs","text":"<p>These hand on labs build on top of one another, so progress through them in order to get a fully functional Metered Billing Accelerator offer published and working for a test environment.</p>"},{"location":"metered-billing-accelerator/#prerequisites","title":"Prerequisites","text":"<ol> <li>Azure subscription that can create resources</li> <li>A Partner Center Account</li> </ol>"},{"location":"metered-billing-accelerator/#hands-on-labs_1","title":"Hands-on labs","text":"<ol> <li>Installing the Metered Billing Accelerator</li> <li>Configure SaaS Offer the Metered Billing Accelerator</li> <li>Configure Managed ApplicationOffer the Metered Billing Accelerator</li> </ol>"},{"location":"metered-billing-accelerator/labs/lab1-install/","title":"TBD","text":""},{"location":"metered-billing-accelerator/labs/lab2-saas/","title":"TBD","text":""},{"location":"metered-billing-accelerator/labs/lab3-ama/","title":"TBD","text":""},{"location":"misc/change-log/","title":"Change log","text":"<p>Home</p>"},{"location":"misc/change-log/#site-change-log","title":"Site change log","text":"Date Change Type     1/6/2023 Securing virtual machines and containers for certification New   12/1/2022 Purchasing a SaaS offer from the Azure Marketplace New   12/1/2022 Purchasing a SaaS offer from AppSource New   11/3/2022 Scanning container images for vulnerabilities New   10/24/2022 Private offers for customers overview Updated   10/21/2022 Virtual Machine software reservations overview New   10/19/2022 Complete course: Mastering Container offers for Kubernetes apps New   9/8/2022 Choose your offer type New   9/5/2022 Handling multiple currencies for different markets New   8/27/2022 Learning Paths New   8/1/2022 Purchasing a SaaS offer New   8/1/2022 Anatomy of a SaaS application New   7/12/2022 SaaS pricing in Partner Center publisher overview New   7/12/2022 SaaS pricing in Partner Center publisher demo New"},{"location":"misc/select-offer-type/","title":"Select offer type","text":"<p>Home</p>"},{"location":"misc/select-offer-type/#choose-your-offer-type","title":"Choose Your Offer Type","text":"<p>If you aren't certain which offer type you will be creating, this page is for you. Primary considerations for choosing an offer type include billing options and deployment architectures. This page has resources to help walk through these topics as well as any others related to getting started.</p>"},{"location":"misc/select-offer-type/#decision-tree","title":"Decision tree","text":"<p>Building on top of the above video, follow the questions in the below image to find the right offer type for you. </p>"},{"location":"misc/select-offer-type/#more-resources-and-information","title":"More resources and information","text":""},{"location":"misc/select-offer-type/#microsoft-docs","title":"Microsoft docs","text":"<ul> <li>Publishing guide by offer type</li> <li>The transact overview helps you understand some of the differences between transactable offer types.</li> </ul>"},{"location":"misc/select-offer-type/#saas-offers","title":"SaaS offers","text":"<p>SaaS offers allow for software that is delivered as SaaS to be transacted on the Azure Marketplace.</p> <ul> <li>A SaaS offer runs in the publisher\u2019s tenant</li> <li>Supports metered billing</li> <li>Requires some integration with marketplace SaaS APIs</li> </ul> <p>\ud83d\udea6Learn more about SaaS offers here.</p> <p>\u23ef\ufe0f Experience the SaaS Accelerator course here.</p>"},{"location":"misc/select-offer-type/#virtual-machine-offers","title":"Virtual Machine offers","text":"<p>Virtual Machine offers allow publishers to install their software on a virtual machine.</p> <ul> <li>Runs in the customer\u2019s tenant and subscription</li> <li>Pricing is based on usage of the product</li> <li>Does not support metered billing</li> </ul> <p>\ud83d\udea6Learn more about Virtual Machine offers here.</p>"},{"location":"misc/select-offer-type/#azure-managed-application-offers","title":"Azure Managed Application offers","text":"<ul> <li>Runs in the customer\u2019s tenant</li> <li>Enables the publisher to manage the resources in the customer\u2019s tenant</li> <li>Deploys via an ARM template</li> <li>Supports metered billing</li> </ul> <p>\ud83d\udea6Learn more about Managed Application offers here.</p>"},{"location":"partner-center/","title":"Index","text":"<p>Home</p>"},{"location":"partner-center/#mastering-partner-center","title":"Mastering Partner Center","text":"<p>Using Partner Center to create and maintain your marketplace offers is a very large topic, so the topics are split into multiple pages. Visit the links below to learn about specific topics related to Partner Center.</p>"},{"location":"partner-center/#choose-a-partner-center-topic-area","title":"Choose a Partner Center topic area","text":"<ul> <li>Private Offers</li> <li>Partner Center General Topics</li> <li>Working with SaaS Offers</li> <li>Working with Virtual Machine Offers</li> <li>Working with Azure Managed Application Offers</li> </ul>  <p>\u2709\ufe0f Let us know what you need from this content, or tell us how we're doing.</p> <p>\ud83d\udea6 Not sure where to get started? Try the Working with Partner Center Learning Path.</p>"},{"location":"partner-center/ama/","title":"Ama","text":"<p>Home &gt; Mastering Partner Center</p>"},{"location":"partner-center/ama/#working-with-azure-managed-application-offers-in-partner-center","title":"Working with Azure Managed Application Offers in Partner Center","text":"<ul> <li>Partner Center for Azure Managed Applications Overview</li> <li>Partner Center for Azure Managed Applications Demo</li> </ul>"},{"location":"partner-center/ama/#partner-center-for-azure-managed-applications-overview","title":"Partner Center for Azure Managed Applications Overview","text":"<p>Video</p> <p>Partner Center is the portal publishers use to create, configure, publish, and monitor their offers in the Microsoft Marketplace. This overview takes you through Partner Center for Azure Managed Applications.</p>"},{"location":"partner-center/ama/#partner-center-for-azure-managed-applications-demo","title":"Partner Center for Azure Managed Applications Demo","text":"<p>Video</p> <p>Understanding Partner Center, the publisher's portal, is key to creating great offers. This demo walks through setting up a Partner Center offer for an Azure Managed Application.</p>"},{"location":"partner-center/general/","title":"Partner Center General Topics","text":"<p>Home &gt; Mastering Partner Center</p>"},{"location":"partner-center/general/#partner-center-general-topics","title":"Partner Center General Topics","text":"<ul> <li>Handling multiple currencies for different markets</li> <li>Migrating Listings to SaaS Offers</li> </ul>"},{"location":"partner-center/general/#handling-multiple-currencies-for-different-markets","title":"Handling multiple currencies for different markets","text":"<p>Video</p> <p>Plans have specific pricing and may be offered in many regions, many with different currencies. This video walks though how to customize pricing in local currencies per selling region. For example, you may set the price in the US at one rate and the price in other regions for different amounts based on local currencies.</p>"},{"location":"partner-center/general/#migrating-listings-to-saas-offers","title":"Migrating Listings to SaaS Offers","text":"<p>Video</p> <p>You may have started your online presence in the commercial marketplace with a simple listing to advertise your services. This does not, however, create a transactable offer that can be sold through the marketplace. This video shows how to convert your existing listing into a fully transactable SaaS Offer.</p>"},{"location":"partner-center/private-offers/","title":"Private offers","text":"<p>Home &gt; Mastering Partner Center</p>"},{"location":"partner-center/private-offers/#private-offers-in-partner-center","title":"Private offers in Partner Center","text":"<ul> <li>Private offers for customers overview</li> <li>Private offers for customers creation</li> <li>Private offers for customers acceptance</li> <li>Private offers for customers purchase experience</li> <li>Private offers for CSP partners preview</li> <li>Private offers for CSP partners creation</li> <li>Private offers for CSP partners purchase process</li> </ul>"},{"location":"partner-center/private-offers/#private-offers-for-customers-overview","title":"Private offers for customers overview","text":"<p>Video | PDF</p> <p>Learn how private offers work for marketplace publishers offering them directly to customers. This module provides an overview of private offers and explores some deeper details about how they work.</p>"},{"location":"partner-center/private-offers/#private-offers-for-customers-creation","title":"Private offers for customers creation","text":"<p>Video</p> <p>This demo takes you through the process of an ISV creating a private offer for sale to a customer.</p>"},{"location":"partner-center/private-offers/#private-offers-for-customers-acceptance","title":"Private offers for customers acceptance","text":"<p>Video</p> <p>In this walk through video, see the customer experience for accepting an ISV to Customer private offer.</p>"},{"location":"partner-center/private-offers/#private-offers-for-customers-purchase-experience","title":"Private offers for customers purchase experience","text":"<p>Video </p> <p>In this walk through video, see the customer experience for viewing details of their private offer in the Azure portal and deploying the product.</p>"},{"location":"partner-center/private-offers/#private-offers-for-csp-partners-preview","title":"Private offers for CSP partners preview","text":"<p>Video | PDF</p> <p>Learn about private offers for Cloud Solution Providers in this overview of the capability in Partner Center.</p>"},{"location":"partner-center/private-offers/#private-offers-for-csp-partners-creation","title":"Private offers for CSP partners creation","text":"<p>Video</p> <p>This demo takes you through the process of an ISV creating a private offer for sale to a Cloud Solution Provider. </p>"},{"location":"partner-center/private-offers/#private-offers-for-csp-partners-purchase-process","title":"Private offers for CSP partners purchase process","text":"<p>Video</p> <p>In this walkthrough video, see the purchase process partners in the Cloud Solution Provider (CSP) program go through to purchase private offers created by ISVs.</p>"},{"location":"partner-center/saas/","title":"Working with SaaS Offers in Partner Center","text":"<p>Home &gt; Mastering Partner Center</p>"},{"location":"partner-center/saas/#working-with-saas-offers-in-partner-center","title":"Working with SaaS Offers in Partner Center","text":"<ul> <li>Publishing a SaaS Offer</li> <li>SaaS Pricing in Partner Center Publisher Overview</li> <li>SaaS Pricing in Partner Center Publisher Demo</li> <li>Publishing a Private SaaS Plan</li> <li>Migrating Listings to SaaS Offers</li> <li>Reporting and Insights for Multi-year SaaS Offers</li> </ul>"},{"location":"partner-center/saas/#publishing-a-saas-offer","title":"Publishing a SaaS Offer","text":"<p>Video | PDF</p> <p>This detailed video presents the concepts of publishing a SaaS offer and then walks through the steps of doing so in Partner Center. This module goes all the way from creating an offer, to adding and plan, and finally publishing the offer live. It also speaks to the need of developers to have a sandbox environment in which they can test and development the landing page and webhook.</p>"},{"location":"partner-center/saas/#saas-pricing-in-partner-center-publisher-overview","title":"SaaS Pricing in Partner Center Publisher Overview","text":"<p>Video |  PDF</p> <p>Pricing and billing options for SaaS offers are very flexible and give publishers many options for how to bill and get paid for their solutions. This video walks through the SaaS pricing models and gives real-world examples of using them effectively.</p>"},{"location":"partner-center/saas/#saas-pricing-in-partner-center-publisher-demo","title":"SaaS Pricing in Partner Center Publisher Demo","text":"<p>Video</p> <p>Pricing and billing options for SaaS offers are very flexible and give publishers many options for how to bill and get paid for their solutions. This video demonstrates how to use Partner Center to create and price a plan from start to finish, including using metered billing options.</p>"},{"location":"partner-center/saas/#publishing-a-private-saas-plan","title":"Publishing a Private SaaS Plan","text":"<p>Video | PDF</p> <p>This brief video builds upon what you learned in, \u201cPublishing a SaaS Offer.\u201d It presents the concepts of using private plans and then shows how to do so inside Partner Center.</p>"},{"location":"partner-center/saas/#migrating-listings-to-saas-offers","title":"Migrating Listings to SaaS Offers","text":"<p>Video</p> <p>You may have started your online presence in the commercial marketplace with a simple listing to advertise your services. This does not, however, create a transactable offer that can be sold through the marketplace. This video shows how to convert your existing listing into a fully transactable SaaS Offer.</p>"},{"location":"partner-center/saas/#reporting-and-insights-for-multi-year-saas-offers","title":"Reporting and Insights for Multi-year SaaS Offers","text":"<p>Video</p> <p>This module walks through reporting for multi-year SaaS and the reporting widgets available that display information about subscriptions, orders and pricing models including growth trends over time.</p> <p>Additionally, various downloadable formats including CSV and PDFs for detailed reporting are explained in detail.</p>"},{"location":"partner-center/saas/#saas-purchase-customer-experience","title":"SaaS Purchase Customer Experience","text":"<p>Video</p> <p>Customers may have many choices about what billing and pricing options they would like to subscribe to for a SaaS offer. This video walks through the purchase process from the customer\u2019s point of view showing how to use purchasing tools to simplify the purchase experience.</p>"},{"location":"partner-center/vm/","title":"Vm","text":"<p>Home &gt; Mastering Partner Center</p>"},{"location":"partner-center/vm/#working-with-virtual-machine-offers-in-partner-center","title":"Working with Virtual Machine Offers in Partner Center","text":"<ul> <li>Configuring a Virtual Machine Offer with Partner Center Demo</li> <li>Publish a Virtual Machine Offer with Partner Center Demo</li> </ul>"},{"location":"partner-center/vm/#configuring-a-virtual-machine-offer-with-partner-center-demo","title":"Configuring a Virtual Machine Offer with Partner Center Demo","text":"<p>Video</p> <p>See how to create a Virtual Machine offer in Partner Center to include creating the offer, configuring a basic CRM integration, specifying offer properties, listing details, and resell with CSP settings. This video does not go into the specifics of creating the Virtual Machine plans for the offer, which will be seen in a later demo.</p>"},{"location":"partner-center/vm/#publish-a-virtual-machine-offer-with-partner-center-demo","title":"Publish a Virtual Machine Offer with Partner Center Demo","text":"<p>Video</p> <p>This demonstration takes you through creating a plan for your Virtual Machine offer, associating the correct image to the plan, and setting other configuration options on your Virtual Machine. After completing the plan configuration you get to see the offer published.</p>"},{"location":"saas/","title":"Index","text":"<p>Home</p>"},{"location":"saas/#mastering-saas-offers","title":"Mastering SaaS offers","text":"<p>This on-demand learning series includes videos, sample code, and hands-on labs meant to speed your time to publishing your custom SaaS offer on the Microsoft commercial marketplace. If you are building a SaaS offer for the marketplace this learning series is for you.</p>"},{"location":"saas/#choose-a-saas-offer-topic-area","title":"Choose a SaaS offer topic area","text":"<ul> <li>SaaS offer general knowledge topics (of interest to publishers and customers)</li> <li>SaaS offer technical topics</li> <li>Working with SaaS offers in Partner Center</li> <li>\ud83e\uddea Grow your skills with hands-on labs.</li> </ul>  <p>\u2709\ufe0f Let us know what you need from this content, or tell us how we're doing.</p> <p>\ud83d\udea6 Not sure where to get started? Try the Working with SaaS Offers Learning Path.</p>"},{"location":"saas/#hands-on-labs","title":"Hands-on labs","text":"<p>These hands-on labs focus on technical topics and are typically of use to technologists. They build upon each other. Perform them in sequential order to get a fully functional SaaS Offer published and working for your test environment.</p> <p>Clone this repository to your local machine. You will need some artifacts from the lab folders to complete the labs.</p>"},{"location":"saas/#prerequisites","title":"Prerequisites","text":"<ol> <li>Azure subscription that can create resources</li> <li>A Partner Center Account</li> <li>Visual Studio 2022, any version</li> </ol>"},{"location":"saas/#labs","title":"Labs\ud83e\uddea","text":"<ol> <li>Creating a SaaS Offer in Partner Center</li> <li>Creating a Landing Page</li> <li>Installing a Publisher Portal</li> <li>Deploying and Monitoring a Webhook</li> <li>Implementing Meter billing</li> </ol>"},{"location":"saas/general-topics/","title":"General topics","text":"<p>Home &gt; Mastering SaaS offers</p>"},{"location":"saas/general-topics/#saas-offer-general-knowledge-topics","title":"SaaS offer general knowledge topics","text":"<p>Publisher experience</p>  <ul> <li>SaaS Offer Overview</li> <li>Publishing a SaaS Offer</li> <li>Publishing a Private SaaS Plan</li> <li>SaaS Pricing in Partner Center Publisher Overview</li> <li>SaaS Pricing in Partner Center Publisher Demo</li> <li>Reporting and Insights for Multi-year SaaS Offers</li> </ul> <p>Customer experience</p>  <ul> <li>Purchasing a SaaS offer from the Azure Marketplace</li> <li>Purchasing a SaaS offer from AppSource</li> <li>Purchasing a Private SaaS Plan</li> <li>Purchasing a Public SaaS Offer with Different Pricing Models</li> </ul>"},{"location":"saas/general-topics/#publisher-experience","title":"Publisher experience","text":""},{"location":"saas/general-topics/#saas-offer-overview","title":"SaaS Offer Overview","text":"<p>Video | PDF</p> <p>This module offers a technical overview of Microsoft Azure Marketplace SaaS Offers, including the following topics.</p> <ul> <li>The Microsoft Commercial Marketplace Ecosystem\u200b</li> <li>SaaS Offer Creation Process\u200b</li> <li>\u200bPricing Models for SaaS Offers\u200b</li> <li>SaaS Solution Architectures</li> </ul>"},{"location":"saas/general-topics/#publishing-a-saas-offer","title":"Publishing a SaaS Offer","text":"<p>Video | PDF</p> <p>This detailed video presents the concepts of publishing a SaaS offer and then walks through the steps of doing so in Partner Center. This module goes all the way from creating an offer, to adding and plan, and finally publishing the offer live. It also speaks to the need of developers to have a sandbox environment in which they can test and development the landing page and webhook.</p>"},{"location":"saas/general-topics/#publishing-a-private-saas-plan","title":"Publishing a Private SaaS Plan","text":"<p>Video | PDF</p> <p>This brief video builds upon what you learned in, \u201cPublishing a SaaS Offer.\u201d It presents the concepts of using private plans and then shows how to do so inside Partner Center.</p>"},{"location":"saas/general-topics/#saas-pricing-in-partner-center-publisher-overview","title":"SaaS Pricing in Partner Center Publisher Overview","text":"<p>Video | PDF</p> <p>Pricing and billing options for SaaS offers are very flexible and give publishers many options for how to bill and get paid for their solutions. This video walks through the SaaS pricing models and gives real-world examples of using them effectively.</p>"},{"location":"saas/general-topics/#saas-pricing-in-partner-center-publisher-demo","title":"SaaS Pricing in Partner Center Publisher Demo","text":"<p>Video</p> <p>Pricing and billing options for SaaS offers are very flexible and give publishers many options for how to bill and get paid for their solutions. This video demonstrates how to use Partner Center to create and price a plan from start to finish, including using metered billing options.</p>"},{"location":"saas/general-topics/#reporting-and-insights-for-multi-year-saas-offers","title":"Reporting and Insights for Multi-year SaaS Offers","text":"<p>Video</p> <p>This module walks through reporting for multi-year SaaS and the reporting widgets available that display information about subscriptions, orders and pricing models including growth trends over time.</p> <p>Additionally, various downloadable formats including CSV and PDFs for detailed reporting are explained in detail.</p>"},{"location":"saas/general-topics/#customer-experience","title":"Customer experience","text":""},{"location":"saas/general-topics/#purchasing-a-saas-offer-from-the-azure-marketplace","title":"Purchasing a SaaS offer from the Azure Marketplace","text":"<p>Video</p> <p>This video demonstrates the customer purchasing process when subscribing to a SaaS offer from within the Azure Marketplace.</p>"},{"location":"saas/general-topics/#purchasing-a-saas-offer-from-appsource","title":"Purchasing a SaaS offer from AppSource","text":"<p>Video</p> <p>This video demonstrates the customer purchasing process when subscribing to a SaaS offer from within the AppSource storefront.</p>"},{"location":"saas/general-topics/#purchasing-a-private-saas-plan","title":"Purchasing a Private SaaS Plan","text":"<p>Video | PDF</p> <p>This video shows how to subscribe to private SaaS plans in the Microsoft Azure Marketplace. Topics include the following.</p> <ul> <li>About Private Plans</li> <li>Purchasing a SaaS Private Offer demo</li> </ul>"},{"location":"saas/general-topics/#purchasing-a-public-saas-offer-with-different-pricing-models","title":"Purchasing a Public SaaS Offer with Different Pricing Models","text":"<p>Video</p> <p>Customers may have many choices about what billing and pricing options they would like to subscribe to for a SaaS offer. This video walks through the purchase process from the customer\u2019s point of view showing how to use purchasing tools to simplify the purchase experience.</p>"},{"location":"saas/tech-topics/","title":"Tech topics","text":"<p>Home &gt; Mastering SaaS offers</p>"},{"location":"saas/tech-topics/#saas-offer-technical-topics","title":"SaaS offer technical topics","text":"<ul> <li>SaaS Offer Technical Overview</li> <li>Azure AD Application Registrations</li> <li>Using the SaaS Offer REST Fulfillment API</li> <li>The SaaS Client Library for .NET</li> <li>Building a Simple SaaS Landing Page in .NET</li> <li>Building a Simple SaaS Publisher Portal in .NET</li> <li>SaaS Webhook Overview</li> <li>Building a Simple SaaS Webhook in .NET</li> <li>SaaS Metered Billing Overview</li> <li>The SaaS Metered Billing API with REST</li> </ul>"},{"location":"saas/tech-topics/#saas-offer-technical-overview","title":"SaaS Offer Technical Overview","text":"<p>Video | PDF</p> <p>Watch a deep technical overview of how SaaS offers work in the Microsoft Azure Marketplace. Learn how the API flows and interactions should work and how to build your landing page. Topics include the following.</p> <ul> <li>The Landing Page\u200b authentication workflows</li> <li>SaaS Offer Purchase Flow in Depth\u200b</li> <li>SaaS Offer Fulfillment API\u200b</li> <li>Metered Fulfillment Overview\u200b</li> <li>SaaS Offer Webhook</li> </ul>"},{"location":"saas/tech-topics/#azure-ad-application-registrations","title":"Azure AD Application Registrations","text":"<p>Video | PDF</p> <p>In this module we look at a generic topic, application registrations for Azure Active Directory because we\u2019ll need to use them in our upcoming modules. They give us a mechanism to authenticate to Azure AD, which is a requirement of the landing page, if you recall.</p> <p>This video should help you get a jump start on configuring application registrations for the apps we\u2019ll be building in the next few modules.</p>  <p>NOTE: The secrets that you set in an Application Registration have time limits. You may select up to 2 years for the secret to remain valid. In production, track when your secrets need to be changed and do so to avoid service outages.</p>  <p>This module introduces just enough on this topic to help us build our landing page and webhooks later in the course. For those interested in more reading, please see Create and Azure AD app registration and Quick start: Register an application with the Microsoft identity platform from the official Microsoft documentation.</p>"},{"location":"saas/tech-topics/#using-the-saas-offer-rest-fulfillment-api","title":"Using the SaaS Offer REST Fulfillment API","text":"<p>Video | PDF</p> <p>See the SaaS Fulfillment REST API in action as we send it through its paces using Postman. You\u2019ll learn how to authenticate with Azure Active Directory, resolve and activate subscriptions just like your Landing Page does, and see many other features of the API.</p> <p>This module prepares you for working with the language-specific client libraries.</p> <p>You will need knowledge of Application Registrations in AAD.</p> <p>An Application Registration is used in the examples when making the first request to retrieve an authentication token from Azure Active Directory. You should be familiar with creating an Application Registration and finding the following information in the Azure Portal.</p> <ol> <li>The Tenant ID and App ID</li> <li>A Client Secret on the Application Registration</li> </ol>"},{"location":"saas/tech-topics/#the-saas-client-library-for-net","title":"The SaaS Client Library for .NET","text":"<p>Video | PDF | Code</p> <p>This module introduces the SaaS Client Library for .NET developers who want to work with the SaaS APIs at a level of abstraction above the REST level.</p> <p>The client library is a fully functional .NET package that you can install from NuGet and use in your applications.</p> <p>This video shows a sample command line application that can talk to the client library API and the code is available in this repository via the link above.</p>"},{"location":"saas/tech-topics/#building-a-simple-saas-landing-page-in-net","title":"Building a Simple SaaS Landing Page in .NET","text":"<p>Video | PDF | Code</p> <p>In this module we examine the elements of building a simple landing page and looking at how it works.We examine the following topics.</p> <ul> <li>The purpose of a landing page</li> <li>A humble landing page in action</li> <li>The code</li> <li>Available data to display</li> </ul> <p>The technology stack used is C#, ASP.NET MVC, and Razor views, just to keep it simple. We use the SaaS Client Library for .NET to build out our landing page functionality.</p>"},{"location":"saas/tech-topics/#building-a-simple-saas-publisher-portal-in-net","title":"Building a Simple SaaS Publisher Portal in .NET","text":"<p>Video | PDF | Code</p> <p>In this module we examine the elements of building a publisher portal and at how it works.We examine the following topics.</p> <ul> <li>The purpose of a publisher portal</li> <li>A simple publisher portal in action</li> <li>The code</li> </ul> <p>The technology stack used is C#, ASP.NET MVC, and Razor views, just to keep it simple. We use the SaaS Client Library for .NET to build out our portal functionality.</p>"},{"location":"saas/tech-topics/#saas-webhook-overview","title":"SaaS Webhook Overview","text":"<p>Video | PDF</p> <p>This technical overview of the SaaS webhook explains the following concepts of the SaaS offer webhook.</p> <ul> <li>Why to have this specialized HTTPS endpoint</li> <li>POST events one may receive on the webhook</li> <li>Flow models of how to handle requests</li> <li>Potential fully implemented solution architectures</li> </ul> <p>And more! Consider watching this video before moving on to the code-based modules for implementing and securing a SaaS offer webhook.</p>"},{"location":"saas/tech-topics/#implementing-a-simple-saas-webhook-in-net","title":"Implementing a Simple SaaS Webhook in .NET","text":"<p>Video | Code</p> <p>This code-heavy module focuses on the fundamentals of implementing a SaaS offer webhook as an Azure function using .NET. Concepts are presented in such a way as to be architecture and technology stack agnostic.</p>"},{"location":"saas/tech-topics/#saas-metered-billing-overview","title":"SaaS Metered Billing Overview","text":"<p>Video | PDF</p> <p>This module presents the fundamentals of billing through the marketplace based on usage, or metered billing. IT covers several areas of metered billing including the following.</p> <ol> <li>How to configure Partner Center</li> <li>The flow of API operations needed to use the SaaS billing API</li> <li>Resources to save you time in building your SaaS application</li> </ol>"},{"location":"saas/tech-topics/#the-saas-metered-billing-api-with-rest","title":"The SaaS Metered Billing API with REST","text":"<p>Video</p> <p>We exercise the SaaS Billing REST API using Postman to illustrate how the API works. You\u2019ll learn how the inputs to each API event and how to use the results, and finally how to invoke usage events in the metering API itself. This module is primarily demo.</p>"},{"location":"saas/demo-code/saas-simple-landing-page/LandingPage/wwwroot/lib/jquery-validation/LICENSE/","title":"The MIT License (MIT)","text":"<p>Copyright J\u00f6rn Zaefferer</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"saas/demo-code/saas-simple-publisher-portal/PublisherPortal/wwwroot/lib/jquery-validation/LICENSE/","title":"The MIT License (MIT)","text":"<p>Copyright J\u00f6rn Zaefferer</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"saas/labs/lab-code/begin/LandingPage/wwwroot/lib/jquery-validation/LICENSE/","title":"The MIT License (MIT)","text":"<p>Copyright J\u00f6rn Zaefferer</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"saas/labs/lab-code/begin/PublisherPortal/wwwroot/lib/jquery-validation/LICENSE/","title":"The MIT License (MIT)","text":"<p>Copyright J\u00f6rn Zaefferer</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"saas/labs/lab-code/end/LandingPage/wwwroot/lib/jquery-validation/LICENSE/","title":"The MIT License (MIT)","text":"<p>Copyright J\u00f6rn Zaefferer</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"saas/labs/lab-code/end/PublisherPortal/wwwroot/lib/jquery-validation/LICENSE/","title":"The MIT License (MIT)","text":"<p>Copyright J\u00f6rn Zaefferer</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"saas/labs/lab1-create-pc-offer/","title":"Lab 1 - Creating a SaaS Offer in Partner Center","text":"<p>\ud83d\udc48 Back to SaaS Offer labs</p> <p>\u26a0\ufe0f Completion of this lab is required for the following labs in the series to work properly.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#overview","title":"Overview","text":"<p>In this lab, you will use your Partner Center account to create a test SaaS offer with a single plan. </p> <p>This offer will be used for development and testing purposes throughout this lab series.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#prerequisites","title":"Prerequisites","text":"<p>You will need the following to complete this lab.</p> <ol> <li>A Partner Center account</li> <li>An Azure account and access to the Azure portal</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#exercise-create-a-new-saas-offer","title":"Exercise: Create a New SaaS Offer","text":"<p>In this exercise, you will create a new SaaS offer in Partner Center and fill in the information needed to publish it.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#create-a-new-saas-offer","title":"Create a new SaaS offer","text":"<ol> <li>From the Home page of Partner Center click the Commercial Marketplace button.</li> <li>Click the + New offer button and at the dropdown and select Software as a Service.</li> <li>Give your new offer an Offer ID and Offer alias. Although you are free to use whatever values you like, we will be using the following in this lab for reference.<ol> <li>Offer ID: saas-workshop</li> <li>Offer alias SaaS Workshop</li> </ol> </li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#offer-setup","title":"Offer setup","text":"<p>Leave all information at the top of this page as is and scroll down to the Customer leads section of the page.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#customer-leads","title":"Customer leads","text":"<p>Here, you will attach your offer to an Azure Data Storage table which will act as a connected Customer Relationship Management system (CRM) for your offer.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#create-the-azure-storage-account","title":"Create the Azure Storage account","text":"<p>This is the first time you're using the Azure portal for this class. It is recommended that you install all the resources you'll create in this class into the same Resource Group, just to keep things tidy within your Azure subscription.</p> <ol> <li>Open a new tab for the Azure portal and log in.</li> <li>Create a Resource Group named saas-workshop. Although you may use a different name, all labs will refer to the Resource Group with this name.</li> <li>In the saas-workshop Resource Group, create a standard Azure Storage account. This will be your CRM database, so name it accordingly to distinguish it from future storage accounts that will be created in this Resource Group.</li> <li>Once the storage account is created, browse to the storage account's overview page.</li> <li>In the left-hand menu, find the Security + networking section.</li> <li>In that section, find and click on the Access keys link.</li> <li>At the top of the page, click the Show keys link, and you see the connection strings for the database.</li> <li>Copy a connection string to your copy/paste buffer.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#configure-customer-leads-in-partner-center","title":"Configure Customer Leads in Partner Center","text":"<ol> <li>Go back to the Partner Center tab in your browser.</li> <li>Select the Connect link.</li> <li>From the Lead destination dropdown, select Azure Table.</li> <li>Enter your Contact email and paste in your Storage account connection string.</li> <li>Click the Validate link to ensure your connection string is valid.</li> <li>Click Connect.</li> </ol> <p>For each page, you must click the Save draft at the bottom of the page to move on.</p> <ol> <li>Click Save draft at the bottom of the page.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#properties","title":"Properties","text":"<p>Navigate to the Properties section.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#categories","title":"Categories","text":"<p>You must select at least one category for your offer.</p> <ol> <li>Click the + Categories link.</li> <li>In the left dropdown, select Developer Tools.</li> <li>In the right dropdown, select Developer Service.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#legal","title":"Legal","text":"<ol> <li>Scroll down to the Legal section.</li> <li>Select Use the Standard Contract for Microsoft\u2019s commercial marketplace? checkbox</li> <li>Click Accept.</li> <li>Click the Save draft button.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#offer-listing","title":"Offer listing","text":"<ol> <li>In the the Offer listing section, for Search results summary enter SaaS Workshop summary.</li> <li> <p>For Description, here is some text you may choose to copy and paste into the text box.</p>  <p>Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>  </li> <li> <p>In Getting started instructions paste the following text.</p>  <p>Click the configure account button after the subscription is created.</p>  </li> <li> <p>In the Privacy policy link, enter the public link to the privacy policy for your company if you know it. If not, follow this link to Microsoft's privacy policy and use that URL.</p> </li> <li>In the Support contact section, enter your contact information.</li> <li>For the Support link field enter the support or homepage of your website.</li> <li>For the Engineering contact section, enter your contact information.</li> <li>for the Supporting documents section, upload the PDF document provided in the <code>items</code> directory of lab1. This document is named \"Well-Architected-Framework.pdf.\"</li> <li>You must give the document a name.</li> <li>For the Marketplace media section you'll upload 2 images.<ol> <li>For the 216X216 logo image, upload the PNG provided in the <code>items</code> directory of lab1. This PNG is named \"Contoso-Logo-216x216.png.\"</li> <li>For the 1280X720 screenshot image, upload the PNG provided in the <code>items</code> directory of lab1. This PNG is named \"Screenshots-1280x720.png.\"</li> <li>Add a title to the screenshot image.</li> </ol> </li> <li>Click the Save draft button and correct any errors that be shown before moving on.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#availability","title":"Availability","text":"<ol> <li>In the Availability - Preview audience section, enter the email address you use for your Azure subscription. This is the email address you will use to purchase your offer later.</li> <li>Enter a Description.</li> <li>Click Save draft.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#technical-configuration","title":"Technical configuration","text":"<p>Skip this section for this first lab.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#plan-overview","title":"Plan overview","text":"<p>In this section, you will create a single plan that costs $0. This plan will be used for testing purposes. The creation of this plan is covered in the next exercise.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#exercise-create-a-plan","title":"Exercise: Create a Plan","text":"<p>In this exercise, you will create a plan that costs $0 to purchase. This plan will be used to test the offer in later labs.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#create-the-plan","title":"Create the plan","text":"<ol> <li>Navigate to the Plan overview page.</li> <li>At the top of the page click the + Create new plan button.</li> <li>Give the new plan a Plan ID and Plan name. These values can be whatever you like, but we will refer to them a follows throughout these labs.<ol> <li>Plan ID: gold-plan-id</li> <li>Plan name: Gold Plan</li> </ol> </li> <li>Click the Create button and your new plan is created.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#fill-out-the-plan","title":"Fill out the plan","text":"<p>The Plan has several components to it, all of which must be completed.</p>"},{"location":"saas/labs/lab1-create-pc-offer/#plan-listing","title":"Plan Listing","text":"<ol> <li>The Plan name should read \"Gold Plan.\"</li> <li> <p>The summary requires text to describe the plan. In this case, you may use the following placeholder text if you would like.</p>  <p>Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur. 1. Click Save draft.</p>  </li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#plan-setup","title":"Plan setup","text":"<p>For Markets:</p> <ol> <li>Select the Edit markets link.</li> <li>Choose at least one market within which to sell your plan. This will likely be the same country that hosts your Azure region.</li> <li>Click Save.</li> </ol> <p>For pricing mode:</p> <ol> <li>Keep it Flat rate.</li> <li>Leave Billing term as Monthly.</li> <li>Enter 0 for the cost per month.</li> </ol> <p>For Marketplace Metering Service dimensions:</p> <ol> <li>Click the  Add a Custom Meter Dimension (Max 30) link. This will create a new row. Enter the below values.</li> <li>Enter \"persmsId\" for \"ID\".</li> <li>Enter \"SMS\" for the \"Display Name\".</li> <li>Enter \"per sms sent\" for the \"Unit of Measure\".</li> <li>Enter \"0\" for the \"Price per unit in USD\" column.</li> <li>Enter \"0\" for the \"Monthly quantity included in base\" column.</li> <li>Leave the rest of the plan as is and click Save draft.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#exercise-resell-through-csps","title":"Exercise: Resell through CSPs","text":"<ol> <li>Open the lef-hand menu item.</li> <li>Select \"No partners in the CSP program.\"</li> <li>Click the Save draft button at the bottom of the screen.</li> </ol>"},{"location":"saas/labs/lab1-create-pc-offer/#exercise-review-and-publish","title":"Exercise: Review and Publish","text":"<p>In this short exercise, you will check your work by performing the first action of the publication process. You will submit your offer for review to see if it is ready to be published.</p> <ol> <li>Open your offer's overview page.</li> <li>In the upper right corner of the page, click the link for Review and publish.</li> <li> <p>Looking to the right side of the page, notice that some sections have a green circle and at least one is gray. The gray sections are not yet complete, preventing you from taking the next step of publishing your offer.</p>  <p>The Technical configuration section of the offer will not pass review. This is okay for now as we need to fill out the Technical configuration tab and you can't do that until we have a landing page. All other sections should be green.</p>  </li> <li> <p>Go back to all sections that appear with a gray circle and complete those sections.</p> </li> <li>Ensure all sections pass except Technical configuration, which will be addressed in the next lab.</li> </ol>  <p>Congratulation! You have finished this lab.</p> <p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"saas/labs/lab2-create-landing-page/","title":"Lab 2 - Creating a Landing Page","text":"<p>\ud83d\udc48 Back to SaaS Offer labs</p> <p>\u26a0\ufe0f Completion of this lab is required for the following labs in the series to work properly.</p>"},{"location":"saas/labs/lab2-create-landing-page/#overview","title":"Overview","text":"<p>In this lab, you will build on what you accomplished in Lab 1: Creating a SaaS Offer in Partner Center. You will deploy a landing page and integrate it with your Partner Center SaaS Offer, enabling publishing of the offer and purchasing the offer in the Preview stage of the publication pipeline.</p>"},{"location":"saas/labs/lab2-create-landing-page/#prerequisites","title":"Prerequisites","text":"<p>For this lab, you will need the following.</p> <ol> <li>An offer configured in Partner Center as per Lab 1</li> <li>An Azure account and access to the Azure portal</li> <li>Visual Studio 2022 (any version)</li> <li>Git (optional)</li> </ol>  <p>Note: It is possible to complete this using Visual Studio Code, but the instructions are tailored for Visual Studio 2022.</p>"},{"location":"saas/labs/lab2-create-landing-page/#exercise-compile-the-visual-studio-solution","title":"Exercise: Compile the Visual Studio Solution","text":"<p>There are three projects in the solution you'll be working with. You will deal with them one at a time over the course of the labs. In this lab, we will start with the landing page project.</p> <ol> <li> <p>Clone this repository or download a ZIP file of its contents and UNZIP them on your machine.</p> <p>https://github.com/microsoft/Mastering-the-Marketplace</p> </li> <li> <p>Using Visual Studio 2022, open the following solution file on your machine. Take care to choose the begin folder.</p> <p><code>**\\Mastering-the-Marketplace\\saas\\labs\\lab-code\\begin\\SaaSLabsBegin.sln</code></p> </li> <li> <p>Build the solution. You should get no build errors.</p> </li> </ol>"},{"location":"saas/labs/lab2-create-landing-page/#exercise-creating-a-single-tenant-application-registrations","title":"Exercise: Creating a Single-Tenant Application Registrations","text":"<p>In this exercise, you will create an app registration in the Azure portal. It will be single-tenant and used to connect to the SaaS API. </p>"},{"location":"saas/labs/lab2-create-landing-page/#create-a-single-tenant-app-registration","title":"Create a single-tenant App Registration","text":"<ol> <li>Log in to the Azure portal.</li> <li>In the top-of-center command window in the portal, type \"app reg\" and select the item \"App registrations\" that appears. You will see a list of current application registrations.</li> <li>At the top of the page, click the + New registration link. You are taken to the Register an application page.</li> <li>For the purposes of this lab, use <code>saas-workshop-single-tenant</code> as the name of this app registration.</li> <li>At the bottom of the page, click the Register button.</li> </ol>"},{"location":"saas/labs/lab2-create-landing-page/#add-a-secret","title":"Add a secret","text":"<p>Now you will add a secret to the app registration. Make sure to copy and paste the secret value somewhere you can access it later.</p> <ol> <li>Click into the <code>saas-workshop-single-tenant</code> application registration.</li> <li>In the left-hand menu, find the Manage menu and click the Certificates and secrets link.</li> <li>Create a new client secret.<ol> <li>Give it a description.</li> <li>Choose an expiration date. The 6-month default should be fine.</li> </ol> </li> <li>Copy the Value of the secret and paste it somewhere you can easily access it later.</li> </ol>"},{"location":"saas/labs/lab2-create-landing-page/#exercise-creating-a-multi-tenant-app-registration","title":"Exercise: Creating a multi-tenant App Registration","text":"<p>In this exercise, you will create a multi-tenant app registration in the Azure portal to authenticate users coming to your landing page.</p> <ol> <li>Create an app registration. For the purposes of this lab, use <code>saas-workshop-multi-tenant</code> as the name of this app registration.</li> <li>Under Supported account types, select the option: Accounts in any organizational directory (Any Azure AD directory - Multitenant).</li> <li>At the bottom of the page, click the Register button.</li> </ol>"},{"location":"saas/labs/lab2-create-landing-page/#add-a-platform-to-the-multi-tenant-app-registration","title":"Add a platform to the multi-tenant app registration","text":"<ol> <li>In the left-hand menu under the Overview menu item, click the Quickstart link.</li> <li>Find the Web application section and click the Start button.</li> <li>Click ASP.NET Core.</li> <li>On the resulting Quickstart page, click the Make this change for me button.</li> <li>Under the Configuring your application registration, click the Make updates button.</li> <li> <p>In the left-hand menu under the Manage section, click the Authentication link.</p>  <p>Here you can see that two URLS have been added to the Redirect URIs section for you. These allow running your code in debug mode using the default debugger ports. You will add your actual landing page URLs here later.</p>  </li> </ol>"},{"location":"saas/labs/lab2-create-landing-page/#create-a-client-secret","title":"Create a client secret","text":"<ol> <li>Create a client secret for this app registration.</li> <li>Copy the Value of the secret and paste it somewhere you can easily access it later.</li> </ol>"},{"location":"saas/labs/lab2-create-landing-page/#exercise-appsettingsjson","title":"Exercise: appsettings.json","text":"<p>The <code>appsettings.json</code> file in the LandingPage project must be filled out before publishing the application. That's what you'll do in this section.</p>"},{"location":"saas/labs/lab2-create-landing-page/#values-from-the-saas-workshop-multi-tenant-app-registration","title":"Values from the saas-workshop-multi-tenant app registration","text":"<p>All changes in this section occur under the <code>AzureAD</code> section of the <code>appsettings.json</code> file.</p> <ol> <li>In the Landing Page project, open the <code>appsettings.json</code> file.</li> <li>In the Azure portal, click the Azure Active Directory button in the left-hand menu.</li> <li>On the overview page in the Basic information section, find the the Primary domain and use it to replace <code>DOMAIN_NAME</code> in <code>appsettings.json</code>.</li> <li>In the left-hand menu under the Manage menu, click the App registrations link.</li> <li>Click the <code>saas-workshop-multi-tenant</code> app registration.</li> <li>In the <code>appsetting.json</code> file, replace <code>CLIENT_ID</code> with the Application (client) ID from this screen.</li> <li>Replace <code>CLIENT_SECRET</code> with the client secret you noted earlier for the <code>saas-workshop-multi-tenant</code> app registration.</li> </ol>"},{"location":"saas/labs/lab2-create-landing-page/#values-from-the-saas-workshop-single-tenant-app-registration","title":"Values from the saas-workshop-single-tenant app registration","text":"<p>All changes in this section occur under the <code>MarketplaceAPI</code> section of the <code>appsettings.json</code> file.</p> <ol> <li>Go back to the list of App registrations.</li> <li>Click the <code>saas-workshop-single-tenant</code> app registration.</li> <li>In the <code>appsetting.json</code> file, replace <code>CLIENT_ID</code> with the Application (client) ID from this screen.</li> <li>In the <code>appsetting.json</code> file, replace <code>TENANT_ID</code> with the Directory (tenant) ID from this screen.</li> <li>In the <code>appsetting.json</code> file, replace <code>CLIENT_SECRET</code> with the client secret value you stored earlier.</li> </ol> <p>Congratulations, your LandingPage project is ready to publish!</p>"},{"location":"saas/labs/lab2-create-landing-page/#publishing-your-landing-page","title":"Publishing your landing page","text":"<p>First you must create a publish profile file that will hold the information about your project to publish. Also, you must create an App Service Plan to host your website.</p>"},{"location":"saas/labs/lab2-create-landing-page/#creating-your-publish-profile","title":"Creating your publish profile","text":"<ol> <li>In the Solution Explorer of Visual Studio, right click the <code>LandingPage</code> project and select Publish.</li> <li>The Publish dialog appears.</li> <li>Select Azure as your publish target and click the Next button.</li> <li> <p>Select Azure App Service (Windows) and click the Next button.</p>  <p>You are now on the App Service tab. You may now need to sign in to Visual Studio with your Azure credentials.</p>  </li> <li> <p>Choose the correct subscription from the list of subscriptions.</p> </li> <li>To the far right of the words App Service Instances, click the green + (plus) button to create an App Service. The App Service dialog opens.</li> <li>Name the App Service <code>SaaSWorkshopLandingPage</code> with a number on the end to make it unique.</li> <li>Choose <code>saas-workshop</code> for the resource group.</li> <li>Create a new Hosting Plan and name it <code>SaaSWorkshopAppServicePlan</code>.</li> <li> <p>Click the Create button at the bottom of the screen.</p>  <p>After clicking the Create button at the bottom of the page it may take a moment for the Hosting Plan and App Service to be created.</p>  </li> <li> <p>After the App Service is created, you will be back at the Publish dialog. Select your new App Service instance and click the Next button.</p> </li> <li>For Publish type, select Publish (generate pubxmlfile).</li> <li>Click the Finish button at the bottom of the dialog.</li> </ol> <p>You now have a publish profile that can be used to publish your application.</p>"},{"location":"saas/labs/lab2-create-landing-page/#publishing-the-landing-page","title":"Publishing the landing page","text":"<p>Near the top-right of the Publish dialog click the Publish button. This deploys your application. You can watch the publish process in the Output window at the bottom of the screen.</p>  <p>The page will launch, but shows an error message. You aren't quite done configuring your landing page application.</p>"},{"location":"saas/labs/lab2-create-landing-page/#registering-your-landing-page","title":"Registering your landing page","text":"<ol> <li>In the command bar at the top of the Azure portal, search for and select App Services.</li> <li>Click on the App Service you just created, SaaSWorkshopLandingPage.</li> <li>On the overview screen in Visual Studio, the URL for the site should be in the Hosting section. Copy it into your paste buffer.</li> <li>In the command bar at the top of the Azure portal, search for and select App registrations.</li> <li>Click on the <code>saas-workshop-multi-tenant</code> app registration.</li> <li>In the left-hand menu click the Authentication link.</li> <li>In the Web &gt; Redirect URIs section, click Add URI and paste in your Landing Page URL.</li> <li> <p>Paste it in again on another line, this time adding a suffix of <code>/signin-oidc</code> so that your URI looks something like this.</p>  <p>https://*.azurewebsites.net/signin-oidc</p>  </li> </ol> <p>Click the Save button at the top of the screen.</p>"},{"location":"saas/labs/lab2-create-landing-page/#exercise-browse-to-your-landing-page","title":"Exercise: Browse to your landing page","text":"<ol> <li>Using the App Service URL to you created, <code>https://&lt;prefix&gt;.azurewebsites.net</code>, browse to that web page.</li> <li>Authenticate when prompted.</li> <li>You should see a message that reads, \"Token URL parameter cannot be empty.\"</li> </ol>  <p>This is good! You are seeing this message because you aren't coming to the landing page through the Azure portal and no marketplace purchase token is being passed. To finish your configuration, we need to configure Partner Center to be aware of the landing page.</p>"},{"location":"saas/labs/lab2-create-landing-page/#exercise-update-your-offer-in-partner-center-and-publish-it","title":"Exercise: Update Your Offer in Partner Center and Publish It","text":"<p>Now that you have deployed your application, you can configure the Technical configuration section of Partner Center.</p> <ol> <li>Open your offer in Partner Center.</li> <li>Navigate to the Technical configuration tab.</li> </ol>"},{"location":"saas/labs/lab2-create-landing-page/#technical-configuration","title":"Technical configuration","text":"<ol> <li>For Landing page URL, enter the URL of your new landing page.</li> <li> <p>For Connection webhook, enter the URL of your new landing page.</p>  <p>This is not the correct value for the webhook, but we haven't published a webhook yet and this will act as a placeholder for now.</p>  </li> <li> <p>Enter the Azure Active Directory tenant ID you've deployed your landing page to.</p> </li> <li>For Azure Active Directory application ID, enter the Application (client) ID of the <code>saas-workshop-single-tenant</code> App registration.</li> <li>Click the Save draft button.</li> <li>Click the Review and publish button. The Status of all sections in your offer should be green.</li> <li>Click the Publish button at the bottom of the screen.</li> </ol> <p>You will be directed to the top of the Offer overview, where you may watch the publication process as it occurs. You must refresh the page to see status updates. You only want to publish as far as the Publisher signoff section. When the test links appear under that section, DO NOT press the Go Live button.</p>  <p>You will need to hit refresh for awhile as your offer goes through the publish stages.</p>"},{"location":"saas/labs/lab2-create-landing-page/#publishing-time","title":"Publishing Time","text":"<p>This section exists to let you know that it will take some time before your offer is finished publishing. This is the end of the lab for now as it will take some time for the offer to complete publishing to the Publisher signoff stage.</p> <p>To check your offers' publication status, go to the offer's Overview page. Look for links under the Publisher signoff section as shown below. Refresh the Overview page to get updates on your offer during the publication process.</p>   <p>Note: If you are in a live workshop event, please raise your hand in Microsoft Teams to indicate you are done with the lab to this point. You will be coming back to finish the rest of Lab 2 later in the workshop.</p>"},{"location":"saas/labs/lab2-create-landing-page/#exercise-buy-your-offer-and-check-your-landing-page","title":"Exercise: Buy Your Offer and Check Your Landing Page","text":"<p>In Partner Center, after the offer is in Publisher preview stage, you may subscribe to it. After the initial purchase, you will then be routed to the landing page for the offer.</p>"},{"location":"saas/labs/lab2-create-landing-page/#subscribing-to-your-offer","title":"Subscribing to your offer","text":"<p>Once the Publisher signoff section has links under it, still DO NOT press the Go live button. Instead, this state is where you will test the purchase and functionality of your SaaS application.</p> <p>Under the Publisher signoff section of the Offer overview page, click the Azure portal preview link.</p>  <p>If you receive the message, \"Could not create the marketplace item\" or a \"404\" message, wait another several minutes and try again. The offer is simply still being created. Preview creation can take up to 45 minutes in some cases.</p>"},{"location":"saas/labs/lab2-create-landing-page/#purchasing-the-saas-offer","title":"Purchasing the SaaS offer","text":"<p>Once you can click the Azure portal preview link in Partner Center, do so. You will see a form to fill out to purchase your SaaS Offer. Move on to the next section.</p> <p>You are now acting in the role of the customer.</p> <ol> <li>Click Get it Now. On the next screen  you can fill it out and subscribe to the subscription you are making.</li> <li>For the resource group, create a new one named <code>saas-workshop-purchases</code>.</li> <li>Give your SaaS offer a name. Consider <code>SaaSWorkshop01</code>.</li> <li>Click the Review + subscribe button at the bottom of the page.</li> <li> <p>Click the Subscribe button at the bottom of the page.</p>  <p>Your subscription is being provisioned. Once it is complete, you will see a Configure account now button on the screen.</p>  </li> <li> <p>Click the Configure account now button. You are taken to the landing page where you can see details about the subscription you are buying. Note the marketplace purchase token in the query string.</p> </li> </ol>  <p>Congratulation! You have finished this lab.</p> <p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"saas/labs/lab3-install-pub-portal/","title":"Lab 3 - Installing a Publisher Portal","text":"<p>\ud83d\udc48 Back to SaaS Offer labs</p> <p>\u26a0\ufe0f Completion of this lab is required for the following labs in the series to work properly.</p>"},{"location":"saas/labs/lab3-install-pub-portal/#overview","title":"Overview","text":"<p>This is a quick lab in which you will create one app registration and deploy a small website used by the publisher for activating customer subscriptions. After you have the new website installed, the customer can use their landing page to request subscription activation and use the publisher portal to activate the subscription.</p>"},{"location":"saas/labs/lab3-install-pub-portal/#exercise-create-an-app-registration","title":"Exercise: Create an app registration","text":"<p>In this exercise, you will create a single-tenant app registration for the internal Publisher Portal application. This allows accounts you designate within your own tenant to access the application.</p> <ol> <li>Log in to the Azure portal.</li> <li>In the top-of-center command window in the portal, type \"app reg\" and select the item \"App registrations\" that appears. You will see a list of current app registrations.</li> <li>At the top of the page, click the + New registration link. You are taken to the Register an application page.</li> <li>Use <code>saas-workshop-publisher</code> as the name of this app registration.</li> <li>At the bottom of the page, click the Register button.</li> </ol>"},{"location":"saas/labs/lab3-install-pub-portal/#add-a-secret","title":"Add a secret","text":"<p>Now you will add a secret to the app registration. Make sure to copy and paste the secret value somewhere you can access it later.</p> <ol> <li>Click into the saas-workshop-publisher application registration.</li> <li>In the left-hand menu, find the Manage menu and click the Certificates and secrets link.</li> <li>Create a new client secret.<ol> <li>Give it a description.</li> <li>Choose an expiration date. The 6-month default should be fine.</li> </ol> </li> <li>Copy the Value of the secret and paste it somewhere you can easily access it later.</li> </ol>"},{"location":"saas/labs/lab3-install-pub-portal/#exercise-configure-appsettingsjson","title":"Exercise: Configure appsettings.json","text":"<p>Now you configure the <code>appsettings.json</code> file for the Publisher Portal application so you can publish it.</p>"},{"location":"saas/labs/lab3-install-pub-portal/#azuread-section","title":"AzureAD section","text":"<ol> <li>In Visual Studio, open the <code>appsetting.json</code> file in the PublisherPortal project.</li> <li>Replace <code>YOUR_DOMAIN</code> with the same value you use in the <code>appsettings.json</code> file for the LandingPage project.</li> <li>Replace <code>TENANT_ID</code> with the Tenant ID of the tenant you are working in. To find the Tenant ID, do the following.<ol> <li>Type Tenant into the command bar at the top of the Azure portal and select Tenant properties.</li> <li>Find the Tenant ID field and copy the value into the <code>appsettings.json</code> file.</li> </ol> </li> <li>Replace <code>CLIENT_ID</code> with the Application (client) ID of the app registration you created in the above exercise.</li> <li>Replace <code>CLIENT_SECRET</code> with the secret you created in the above exercise.</li> </ol>"},{"location":"saas/labs/lab3-install-pub-portal/#marketplaceapi-section","title":"MarketplaceApi section","text":"<p>For the <code>MarketplaceApi</code> section, you may copy and paste the section from the LandingPage project's <code>appsettings.json</code> file. It is an exact copy.</p>"},{"location":"saas/labs/lab3-install-pub-portal/#exercise-create-an-app-service-and-publish-profile-for-the-publisher-portal-application","title":"Exercise: Create an App Service and publish profile for the Publisher Portal application","text":"<p>In this section, you'll create an App Service for your new portal so you can publish it in the next step.</p> <ol> <li>Right click the project in Visual Studio and select Publish.</li> <li>Select Azure as your target and then click the Next button.</li> <li>Select Azure App Service (Windows) and then click the Next button.</li> <li>Click the green + button to create a new App Service and the App Service creation dialog appears.</li> <li>Enter SaaSWorkshopPublisherPortal with a number suffix as the name of the app service.</li> <li>Set the Resource Group to <code>saas-workshop</code>.</li> <li>Set the App service plan to the one you created earlier, likely named SaaSWorkshopAppServicePlan.</li> <li>Click the Create button to create the App Service and be taken back to the Publish dialog.</li> <li>Select your new App Service instance.</li> <li>Click the Next button.</li> <li>Select the Publish option to create a publish profile.</li> <li>Click the Finish button.</li> </ol>"},{"location":"saas/labs/lab3-install-pub-portal/#exercise-publish-the-publisher-portal-application","title":"Exercise: Publish the Publisher Portal application","text":"<p>Now that you are back to the publish dialog, just click the Publish button in the upper-right of the page to publish your website.</p> <p>This may take a few moments for the site to publish. You can monitor publish progress in Visual Studio's output window.</p>  <p>The page will launch, but shows an error message. You aren't quite done configuring the publisher portal application.</p>"},{"location":"saas/labs/lab3-install-pub-portal/#update-the-application-registration","title":"Update the application registration","text":"<ol> <li>In the command bar at the top of the Azure portal, search for and select App Services.</li> <li>Click on the App Service you've just created, SaaSWorkshopPublisherPortal with a number suffix.</li> <li>On the overview screen in Visual Studio, the URL for the site should be in the Hosting section. Copy it into your paste buffer.</li> <li>In the command bar at the top of the Azure portal, search for and select App registrations.</li> <li>Click on the <code>saas-workshop-publisher</code> app registration.</li> <li>In the left-hand menu click the Authentication link.</li> <li>Click on Add a platform under Platform configurations.</li> <li>Select Web tile under Configure platforms.</li> <li>Paste in your publisher portal application URL under Redirect URIs and click Configure.</li> <li>In the Web &gt; Redirect URIs section, click Add URI.  </li> <li> <p>Paste your publisher portal application URL in again on another line, this time adding a suffix of <code>/signin-oidc</code> so that your URI looks something like this.</p>  <p>https://*.azurewebsites.net/signin-oidc</p>  </li> <li> <p>Click the Save button at the top of the screen. </p> </li> </ol> <p>Using the App Service URL <code>https://&lt;prefix&gt;.azurewebsites.net</code>, browse to that web page. After authenticating you will see all the subscriptions to your offers. If you completed Lab 2, there should be at least one purchased subscription.</p> <p>If you haven't completed Lab 2 by subscribing to your offer, please go do so now.</p>"},{"location":"saas/labs/lab3-install-pub-portal/#exercise-as-a-customer-request-subscription-activation","title":"Exercise: As a customer, request subscription activation","text":"<p>This exercise puts you in the place of the customer, and you will request your subscription be activated by the publisher.</p> <ol> <li>In the command text box at the top of the Azure portal, type \"SaaS\" and select SaaS from the dropdown. This takes you to the SaaS management page where you can monitor and manage all your SaaS offers.</li> <li>Click the SaaS offer you subscribed to in Lab 2. Note that it is the <code>Pending Configuration</code> state. The publisher has not provisioned your account yet.</li> <li>Click the Configure account now button. This takes you to the offer's landing page.</li> <li>Under the Available Customer Actions section, click the link for Notify publisher to activate account. This emulates sending a notice to your publisher that you want to activate your subscription.</li> </ol>"},{"location":"saas/labs/lab3-install-pub-portal/#exercise-as-the-publisher-activate-the-customers-subscription","title":"Exercise: As the publisher, activate the customer's subscription","text":"<p>This exercise puts you back in the role of the publisher, and you will activate the customer's subscription.</p> <ol> <li>Open the publisher portal website.</li> <li>Find and click on the subscription that needs to be activated.</li> <li>Notice the SaasSubscriptionStatus field is in the <code>PendingFulfillmentStart</code> state.</li> <li>Scroll down to the Publisher Actions section.</li> <li>Click the Activate this subscription link.</li> <li>Notice the status immediately changes to Subscribed.</li> </ol>"},{"location":"saas/labs/lab3-install-pub-portal/#exercise-see-the-activation-on-the-client-side","title":"Exercise: See the activation on the client side","text":"<ol> <li>Go back to the landing page for the offer and note the Subscription State now equals <code>Subscribed</code>.</li> <li>Go back to the SaaS management screen and find your subscription. It likely still reads <code>Pending configuration</code>.</li> <li>This page caches the state of the subscriptions and updates every few minutes. Try refreshing the page occasionally until it reads <code>Subscribed</code>.</li> </ol> <p>Congratulations! You have finished this lab.</p> <p>If you are in a live class setting, please raise your hand in Microsoft Teams to indicate you are done with the lab.</p>  <p>Congratulation! You have finished this lab.</p> <p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"saas/labs/lab4-create-webhook/","title":"Lab 4 - Deploying and Monitoring a Webhook","text":"<p>\ud83d\udc48 Back to SaaS Offer labs</p> <p>\u26a0\ufe0f Completion of this lab is required for the following labs in the series to work properly.</p>"},{"location":"saas/labs/lab4-create-webhook/#overview","title":"Overview","text":"<p>In this lab, you will build on what you accomplished in previous labs. You will create a SaaS offer webhook and integrate it with your Partner Center SaaS offer configuration, enabling your webhook to respond to subscription change events.</p> <p>The webhook in your Visual Studio solution is an Azure Function. There is no need to change the code in the webhook function at this time.</p> <p>Looking through the webhook code you'll find that it simply prints the REST payload to the log. You will monitor this log to see the payload when the webhook is called.</p>"},{"location":"saas/labs/lab4-create-webhook/#exercise-create-a-publish-profile","title":"Exercise: Create a Publish Profile","text":"<ol> <li>In Visual Studio, right click the <code>SaaSFunctions</code> project and select Publish. </li> <li>For the target, select Azure and click Next.</li> <li>Select Azure Function App (Windows) and click Next.</li> <li>Select the right subscription in the dropdown.</li> <li>To publish, you will need to create a new Function App. Above and to the right of the Function Apps tree at the bottom of the dialog, click the + button to add a new Function App.</li> <li>In the Name field, enter <code>SaaSWorkshopFunction</code> followed by a number to make it a unique name.</li> <li>Select the right subscription.</li> <li>Select the `saas-workshop`` Resource Group.</li> <li>Stick with Plan Type: Consumption.</li> <li>Function Apps require the use of a Data Storage account. To the right of the Azure Storage field is a New... link. Click it.</li> <li>On the Azure storage dialog, click the OK button.</li> <li> <p>Back on the Function App (windows) dialog, click the Create button.</p>  <p>The App Service deployment will run for a little while.</p>  </li> <li> <p>On the Publish dialog, click the Next button.</p> </li> <li>On Select the Publish option and click the Finish button.</li> </ol> <p>You have create an App Service, App Service Plan, storage account, and a publish profile. Now you will use the purlish profile to publish the function application itself.</p>"},{"location":"saas/labs/lab4-create-webhook/#exercise-publish-the-function-app","title":"Exercise: Publish the Function App","text":"<p>At the top right of the publish screen, click the Publish button. </p> <p>It will take a moment to publish the function application. You can watch progress in Visual Studio's Output window.</p>"},{"location":"saas/labs/lab4-create-webhook/#exercise-getting-the-webhook-uri","title":"Exercise: Getting the webhook URI","text":"<p>You need the webhook URI to add to your Technical Configuration in Partner Center. The Function Application contains only one function and you need the URI of that one function.</p> <ol> <li>Open the Azure portal.</li> <li>Find and click on the Azure function in the Azure portal. It is inside your <code>saas-workshop</code> resource group.</li> <li>In the left-hand menu find the Functions link and click it.</li> <li>You see a single function named <code>Webhook</code>. Click that function.</li> <li>Near the top of the screen, click Get Function URL and you are presented with a dialog.</li> <li>Copy the full path to this function into your copy/paste buffer.</li> </ol>"},{"location":"saas/labs/lab4-create-webhook/#exercise-publishing-the-webhook-in-partner-center","title":"Exercise: Publishing the webhook in Partner Center","text":"<p>Now you will re-publish your offer, this time with a valid webhook URL.</p> <ol> <li>In Partner Center, on the Technical configuration tab, find the Connection webhook field.</li> <li>Replace the previous value for the Connection webhook with the URL of the function application</li> <li>Click Save Draft.</li> <li>Review and publish your offer. It should pass validation (all sections are green) so you can publish.</li> <li>Click the Publish button.</li> </ol>  <p>The offer must be in the Partner Center's preview stage for the final exercise of this lab to work. At no point should you click the Go live button.</p>"},{"location":"saas/labs/lab4-create-webhook/#publication-time","title":"Publication Time","text":"<p>This is where you must wait for your offer to be re-published. Of course, there is a waiting period for the offer to be re-published. The good news is that it is usually much faster after the first time.</p>  <p>Note: If you are in a live workshop event, please raise your hand in Microsoft Teams to indicate you are done with the lab to this point. You will be coming back to finish the rest of the lab later, perhaps on your own after the workshop.</p>"},{"location":"saas/labs/lab4-create-webhook/#exercise-preparing-to-monitor-the-functions-log","title":"Exercise: Preparing to monitor the function's log","text":"<p>To see the function's output, we will monitor its log on Azure to see the output it will print to the log. Application Insights must be enabled on the function to support this.</p> <ol> <li>Open Azure portal and find the Function App. Click it.</li> <li>Scroll down in the left-hand menu until you find the Monitoring section.</li> <li>In the Monitoring section, find the Log stream link and click it. You are presented with a message to configure Application Insights.</li> <li>Click the Configure button.</li> <li>Under Create new resource enter <code>SaaSWorkshopFunction-ai</code>.</li> <li>Choose an appropriate location.</li> <li>Click the OK button at the bottom of the screen. Application insights will install.</li> <li>In the upper breadcrumb navigation, click the function SaaSWorkshopFunction which takes you back to the Log monitoring screen.</li> <li>This should open what looks like a terminal window and you will see \"Connected!\" at the top of the window.</li> </ol> <p>You are now watching the function application's log. There will be occasional keep-alive calls to the function that can be ignored. You can click the Clear button at the top of the screen to clear the text at ay time.</p>"},{"location":"saas/labs/lab4-create-webhook/#exercise-invoking-the-webhook","title":"Exercise: Invoking the Webhook","text":"<p>In a previous lab, you purchased a SaaS offer. That offer is in the <code>Subscribed</code> state, so the customer can unsubscribe from the offer. That's what you will do to invoke the webhook and see it's output.</p>"},{"location":"saas/labs/lab4-create-webhook/#unsubscribe-from-the-offer","title":"Unsubscribe from the offer","text":"<ol> <li>Open a new tab to the Azure portal.</li> <li>In the command bar at the top type SaaS and click the SaaS service that is appears.</li> <li>Find the offer you purchased earlier and click it.</li> <li>At the top of the page, click and confirm Cancel subscription. Fill in the required information to unsubscribe from the offer.</li> <li>Click the Cancel subscription button. You will get a message in the upper right of your window stating that cancellation of the subscription is in progress.</li> </ol>"},{"location":"saas/labs/lab4-create-webhook/#see-the-unsubscribe-event","title":"See the Unsubscribe event","text":"<p>Go back to your function's Log tab. You will likely have time to hit the Clear button to clear the screen.</p>  <p>It can take a few minutes for the Unsubscribe event to invoke the webhook.</p>  <p>Don't forget that your offer must be in the Publisher signoff stage for the webhook to be fully published so it will be invoked.</p> <p>Just wait for the Unsubscribe event to show up in the Log window and print the payload to the screen.</p>"},{"location":"saas/labs/lab4-create-webhook/#extra-running-the-entire-saas-subscription-workflow","title":"Extra: Running the entire SaaS subscription workflow","text":"<p>You now have all the elements in place needed to manage a SaaS offer subscription purchase. To exercise all steps of the process you can do the following.</p> <p>\ud83d\uddd2\ufe0f You do not need to complete the following steps to consider this lab complete. </p> <ol> <li>Purchase the SaaS offer either through Partner Center or as a private offer in the Azure Portal.</li> <li>Go to the landing page to activate the subscription.</li> <li>Use the Publisher Portal to activate the subscription, changing its state to Subscribed.</li> <li>Cancel the subscription from the Subscribed subscription through the SaaS management tool in the Azure portal.</li> <li>Watch the webhook function get called with the full payload of the unsubscribed event.</li> </ol>  <p>Congratulation! You have finished this lab.</p> <p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"saas/labs/lab5-implementing-meter-billing/","title":"Lab 5 - Implementing Meter billing using postman","text":"<p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"saas/labs/lab5-implementing-meter-billing/#overview","title":"Overview","text":"<p>In this lab, you will build on what you have accomplished in previous labs. You will trigger a meter usage event using Postman tool. You can use any API testing tool but for this lab we will be using Postman. </p>"},{"location":"saas/labs/lab5-implementing-meter-billing/#prerequisites","title":"Prerequisites","text":"<ol> <li>Postman tool</li> <li>Published a SaaS offer with a customer meter dimension on a plan to preview stage.</li> <li>App registration information which is used in the technical configuration of the offer</li> </ol>"},{"location":"saas/labs/lab5-implementing-meter-billing/#exercise-getting-the-access-token","title":"Exercise: Getting the access token","text":"<ol> <li>Open Postman tool</li> <li>Click + new tab</li> <li>Change the request type from GET to POST</li> <li>Enter the below URL into Enter request URL textbox</li> <li><code>https://login.microsoftonline.com/{{tenantId}}/oauth2/v2.0/token</code> (replace the {{tenantId}} with saas-workshop-single-tenant tenant/directory Id)</li> <li> <p>For Body, click on <code>x-www-form-urlencoded</code> radiobutton and enter the below key value pairs</p>    KEY VALUE     grant_type <code>client_credentials</code>   client_id <code>{{clientId}}</code> (replace the {{clientId}} with saas-workshop-single-tenant client/application Id)   client_secret <code>{{clientSecret}}</code> (replace the {{clientSecret}} with saas-workshop-single-tenant secret)   resource <code>20e940b3-4c77-4b0b-9a53-9e16a1b010a7</code>    </li> <li> <p>Click Send</p> </li> <li>You should see a json response with access token like below.</li> </ol> <pre><code>{\n  \"token_type\": \"Bearer\",\n  \"expires_in\": \"3599\",\n  \"ext_expires_in\": \"3599\",\n  \"expires_on\": \"1645893398\",\n  \"not_before\": \"1645889498\",\n  \"resource\": \"20e940b3-4c77-4b0b-9a53-9e16a1b010a7\",\n  \"access_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1yNS1BVWliZkJpaTdOZDFqQmViYXib1hXMCIsImtpZCI6Ik1yNS1BVWliZkJpaTdOZDFqQmViYXhib1hXMCJ9.eyJhdWQiOiI2MmQ5NGY2Yy1kNTk5LTQ4OWItYTc5Ny0zZTEwZTQyZmJlMjIiLCJpc3MiOiJodHRczovL3N0cy53aW5kb3dzLm5ldC9hNDk5NDQ0YS0zMTBlLTRmOTAtOTI4Yy1kNzA2MDzYmYzZTkIiwiaWF0IjoxNjQ1ODg5NDk4LCJuYmYiOjE2NDU4ODk0OTgsImV4cCI6MTY0NTg5MzM5OCwiYWlIjoiRTJaZ1lHaVFuOWgwVm5sM3BjKzg3R016SFN0MUFBPT0iLCJhcHBpZC6IjhjYzMyZTU1LWI5 OWYtNDY3YS1iMDM0LTMxMjgzZmJjODY2NyIsImFwcGlkYWNyI\"\n}\n</code></pre> <p>Great! Copy the value of the access_token from the response as we will be using this in our next exercise.</p>"},{"location":"saas/labs/lab5-implementing-meter-billing/#exercise-invoking-the-meter-billing-api-usage-event","title":"Exercise: Invoking the Meter billing API usage event","text":"<ol> <li>On the Postman tool Click + new tab</li> <li> <p>Change the request type from GET to POST</p> </li> <li> <p>Enter the below URL into Enter request URL textbox</p> </li> <li> <p><code>https://marketplaceapi.microsoft.com/api/usageEvent?api-version=2018-08-31</code></p> </li> <li> <p>For Headers, enter the below key value pairs</p>    KEY VALUE     Content-Type <code>application/json</code>   authorization <code>{{bearerToken}}</code> (replace the {{bearerToken}} with  \"Bearer \" + access_token value copied from the first exercise)    </li> <li> <p>For Body, click on <code>raw</code> radiobutton and enter the below json</p> </li> </ol> <pre><code>{\n  \"resourceId\": \"{{CustomerSaaSSubscriptionId}}\",  // Replace {{CustomerSaaSSubscriptionId}} with an active subscritpion Id from your [publisher portal](../lab3-install-pub-portal#exercise-as-a-customer-request-subscription-activation) which is subscribed to plan with dimension)\n  \"quantity\": 1.0,  // quantity of the usage you want to bill aganist this customer , we can leave it 1 for testing\n  \"dimension\": \"persmsId\", //  DimensionId from the Offer plan created in [lab1](../lab1-create-pc-offer#for-marketplace-metering-service-dimensions)\n  \"effectiveStartTime\": \"{{eventtime}}\",  // ( replace {{eventtime}} with a UTC time from now and until 24 hours back ex: '2022-02-26T17:17:31' )\n  \"planId\": \"gold-plan-id\"  // PlanId from the Offer plan created in [lab1](../lab1-create-pc-offer#create-the-plan)\n}\n</code></pre> <p>Click Send and you should see the below response.</p> <pre><code>{\n  \"usageEventId\": \"e91feebc-50dc-403b-a32b-93c24cc54ebb\",\n  \"status\": \"Accepted\",\n  \"messageTime\": \"2022-02-26T19:51:51.2516464Z\",\n  \"resourceId\": \"7b853439-4fdf-4170-c542-f19217e11383\",\n  \"resourceUri\": \"/subscriptions/bf7adf-hjhj7y-jhjkh887-khkjh/resourceGroups/sb-s/providers/Microsoft.SaaS/resources/saas\",\n  \"quantity\": 1.0,\n  \"dimension\": \"persmsId\",\n  \"effectiveStartTime\": \"2022-02-26T17:17:31\",\n  \"planId\": \"gold-plan-id\"\n}\n</code></pre> <p>This confirms a usage event has been reported to Microsoft and this will be billed to the customer.</p>  <p>Congratulation! You have finished this lab.</p> <p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"saas-accelerator/","title":"Index","text":"<p>Home</p>"},{"location":"saas-accelerator/#mastering-the-saas-accelerator","title":"Mastering the SaaS Accelerator","text":"<p>This series of video modules and hands-on labs is designed to help you understand, install, use, and customize the SaaS Accelerator project. The SaaS Accelerator provides a fully functional community-led SaaS reference implementation for those interested in publishing transactable SaaS offers in Microsoft's marketplace in hours instead of days.</p> <p>\u2709\ufe0f Let us know what you need from this content, or tell us how we're doing.</p> <p>\ud83e\uddea Grow your skills with the hands-on labs.</p>   <ul> <li>SaaS Accelerator Overview - A Hands-on Tour</li> <li>SaaS Accelerator Architecture</li> <li>Installing the SaaS Accelerator With the Install Script</li> <li>Invoking Metered Billing with the SaaS Accelerator</li> <li>Custom Landing Page Fields with the SaaS Accelerator</li> <li>Configuring Email in the SaaS Accelerator</li> <li>Hands-on labs</li> </ul>"},{"location":"saas-accelerator/#saas-accelerator-overview-a-hands-on-tour","title":"SaaS Accelerator Overview - A Hands-on Tour","text":"<p>Video</p> <p>This introduction to the accelerator demonstrates the SaaS Accelerator's core capabilities showing why it may be a good choice for your marketplace SaaS offer. In three short demos, this video shows its fundamental capabilities. </p> <p>You'll see the landing page, the publisher's subscription management portal, and the customer's subscription management capabilities in action!</p>"},{"location":"saas-accelerator/#saas-accelerator-architecture","title":"SaaS Accelerator Architecture","text":"<p>Video | PDF</p> <p>This quick video covers the overall architecture of the SaaS Accelerator. The architecture is straightforward and is explained in plain language appropriate for those with any level of experience with Azure.</p>"},{"location":"saas-accelerator/#installing-the-saas-accelerator-with-the-install-script","title":"Installing the SaaS Accelerator With the Install Script","text":"<p>Video | PDF</p> <p>Installing the SaaS Accelerator is simple. This video walks you through from beginning to end the steps necessary to get the SaaS Accelerator up and running. </p> <p>This video will get you up and running with the SaaS Accelerator in no time at all! You will need to copy and paste some PowerShell script from here.</p>"},{"location":"saas-accelerator/#invoking-metered-billing-with-the-saas-accelerator","title":"Invoking Metered Billing with the SaaS Accelerator","text":"<p>Video</p> <p>We look at the metered billing capabilities of the SaaS Accelerator for the Azure Marketplace. This video shows how to manually invoke metered billing events from the SaaS Accelerator without needing to integrate your solution with the SaaS Metering APIs.</p>"},{"location":"saas-accelerator/#custom-landing-page-fields-with-the-saas-accelerator","title":"Custom Landing Page Fields with the SaaS Accelerator","text":"<p>Video</p> <p>In addition to showing your subscribers information about their subscription when they arrive at your landing page, you may also want to capture some information from them. This is possible using custom fields on the landing page and this short video shows you how to use them.</p>"},{"location":"saas-accelerator/#configuring-email-in-the-saas-accelerator","title":"Configuring Email in the SaaS Accelerator","text":"<p>Video</p> <p>You will likely want to receive email when a subscription changes state. For example, when a someone unsubscribes from your offer. This video shows how to configure the email setting within the SaaS Accelerator and get those notifications coming right to your inbox.</p>"},{"location":"saas-accelerator/#hands-on-labs","title":"Hands-on labs","text":"<p>The following hands-on labs build upon each other. Completing them will get a fully functional SaaS Accelerator offer published and working for a test environment.</p>"},{"location":"saas-accelerator/#prerequisites","title":"Prerequisites","text":"<ol> <li>Azure subscription that can create resources</li> <li>A Partner Center Account</li> </ol>"},{"location":"saas-accelerator/#labs","title":"Labs\ud83e\uddea","text":"<ol> <li>Preparing Partner Center</li> <li>Installing the Accelerator</li> <li>Using the Accelerator</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/","title":"Lab 1 - Creating a SaaS Offer in Partner Center","text":"<p>\ud83d\udc48 Back to SaaS Offer labs</p> <p>\u26a0\ufe0f Completion of this lab is required for the following labs in the series to work properly.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#overview","title":"Overview","text":"<p>In this lab you will use your Partner Center account to create a test SaaS offer with a single plan. This offer will be used for development and testing purposes. This lab will familiarize you with Partner Center and prepare an offer you will publish in the next lab.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#prerequisites","title":"Prerequisites","text":"<p>You will need the following to complete this lab.</p> <ol> <li>A Partner Center account</li> <li>An Azure account and access to the Azure portal</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#exercise-create-a-new-saas-offer","title":"Exercise: Create a New SaaS Offer","text":"<p>In this exercise, you will create a new SaaS offer in Partner Center and fill in the information needed to publish it.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#create-a-new-saas-offer-in-partner-center","title":"Create a new SaaS offer in Partner Center","text":"<ol> <li>From the Home page of Partner Center click the Commercial Marketplace button.</li> <li>Click the + New offer button and at the dropdown and select Software as a Service.</li> <li>Give your new offer an Offer ID and Offer alias. Although you are free to use whatever values you like, we will be using the following in this lab for reference.<ol> <li>Offer ID: saas-accelerator</li> <li>Offer alias SaaS Accelerator</li> </ol> </li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#offer-setup","title":"Offer setup","text":"<p>Leave all information at the top of this page as is and scroll down to the Customer leads section of the page.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#customer-leads","title":"Customer leads","text":"<p>Here, you will attach your offer to an Azure Data Storage table which will act as a connected Customer Relationship Management system (CRM) for your offer.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#create-the-azure-storage-account","title":"Create the Azure Storage account","text":"<p>This is the first time you're using the Azure portal for this class. It is recommended that you install all the resources you'll create in this class into the same Resource Group, just to keep things tidy within your Azure subscription.</p> <ol> <li>Open a new tab for the Azure portal and log in.</li> <li>Create a Resource Group named saas-accelerator. Although you may use a different name, all labs will refer to the Resource Group with this name.</li> <li>In the saas-accelerator Resource Group, create a standard Azure Storage account. This will be your CRM database, so name it accordingly to distinguish it from future storage accounts that will be created in this Resource Group.</li> <li>Once the storage account is created, browse to the storage account's overview page.</li> <li>In the left-hand menu, find the Security + networking section.</li> <li>In that section, find and click on the Access keys link.</li> <li>At the top of the page, click the Show keys link, and you see the connection strings for the database.</li> <li>Copy a connection string to your copy/paste buffer.</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#configure-customer-leads-in-partner-center","title":"Configure Customer Leads in Partner Center","text":"<ol> <li>Go back to the Partner Center tab in your browser.</li> <li>Select the Connect link.</li> <li>From the Lead destination dropdown, select Azure Table.</li> <li>Enter your Contact email and paste in your Storage account connection string.</li> <li>Click the Validate link to ensure your connection string is valid.</li> <li>Click Connect.</li> </ol> <p>For each page, you must click the Save draft at the bottom of the page to move on.</p> <ol> <li>Click Save draft at the bottom of the page.</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#properties","title":"Properties","text":"<p>Navigate to the Properties section.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#categories","title":"Categories","text":"<p>You must select at least one category for your offer.</p> <ol> <li>Click the + Categories link.</li> <li>In the left dropdown, select Developer Tools.</li> <li>In the right dropdown, select Developer Service.</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#legal","title":"Legal","text":"<ol> <li>Scroll down to the Legal section.</li> <li>Select Use the Standard Contract for Microsoft\u2019s commercial marketplace? checkbox</li> <li>Click Accept.</li> <li>Click the Save draft button.</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#offer-listing","title":"Offer listing","text":"<ol> <li>In the the Offer listing section, for Search results summary enter SaaS Workshop summary.</li> <li> <p>For Description, here is some text you may choose to copy and paste into the text box.</p>  <p>Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>  </li> <li> <p>In Getting started instructions paste the following text.</p>  <p>Click the configure account button after the subscription is created.</p>  </li> <li> <p>In the Privacy policy link, enter the public link to the privacy policy for your company if you know it. If not, follow this link to Microsoft's privacy policy and use that URL.</p> </li> <li>In the Support contact section, enter your contact information.</li> <li>For the Support link field enter the support or homepage of your website.</li> <li>For the Engineering contact section, enter your contact information.</li> <li>for the Supporting documents section, upload the PDF document provided in the <code>items</code> directory of lab1. This document is named \"WellArchitectedFramework.pdf.\"</li> <li>You must give the document a name.</li> <li>For the Marketplace media section you'll upload 2 images.<ol> <li>For the 216X216 logo image, upload the PNG provided in the <code>./items</code> directory of lab1. This PNG is named \"Contoso-Logo-216x216.png.\"</li> <li>For the 1280X720 screenshot image, upload the PNG provided in the <code>./items</code> directory of lab1. This PNG is named \"Screenshots-1280x720.png.\"</li> <li>Add a title to the screenshot image.</li> </ol> </li> <li>Click the Save draft button and correct any errors that be shown before moving on.</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#preview-audience","title":"Preview audience","text":"<ol> <li>In the Preview audience section, enter the email address you use for your Azure subscription. This is the email address you will use to purchase your offer later.</li> <li>Enter a Description.</li> <li>Click Save draft.</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#technical-configuration","title":"Technical configuration","text":"<p>Skip this section for this first lab. You will come back to it in lab 2.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#plan-overview","title":"Plan overview","text":"<p>In this section, you will create a single plan that costs $0. This plan will be used for testing purposes. The creation of this plan is covered in the next exercise.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#exercise-create-a-plan","title":"Exercise: Create a Plan","text":"<p>In this exercise, you will create a plan that costs $0 to purchase. This plan will be used to test the offer in later labs.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#create-the-plan","title":"Create the plan","text":"<ol> <li>Navigate to the Plan overview page.</li> <li>At the top of the page click the + Create new plan button.</li> <li>Give the new plan a Plan ID and Plan name. These values can be whatever you like, but we will refer to them a follows throughout these labs.<ol> <li>Plan ID: gold-plan-id</li> <li>Plan name: Gold Plan</li> </ol> </li> <li>Click the Create button and your new plan is created.</li> </ol> <p>The Plan has several components to it, all of which must be completed.</p>"},{"location":"saas-accelerator/labs/lab1-partner-center/#plan-listing","title":"Plan Listing","text":"<ol> <li>The Plan name should read \"Gold Plan.\"</li> <li> <p>The summary requires text to describe the plan. In this case, you may use the following placeholder text if you would like.</p>  <p>Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur. 1. Click Save draft.</p>  </li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#pricing-and-availability","title":"Pricing and availability","text":"<p>For Markets:</p> <ol> <li>Select the Edit markets link.</li> <li>Choose at least one market within which to sell your plan. This will likely be the same country that hosts your Azure region.</li> <li>Click Save.</li> </ol> <p>For pricing mode:</p> <ol> <li>Keep it Flat rate.</li> <li>Leave Billing term as Monthly.</li> <li>Enter 0 for the cost per month.</li> <li>Leave the rest of the plan as is and click Save draft.</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#exercise-resell-through-csps","title":"Exercise: Resell through CSPs","text":"<ol> <li>Open the left-hand menu item.</li> <li>Select \"No partners in the CSP program.\"</li> <li>Click the Save draft button at the bottom of the screen.</li> </ol>"},{"location":"saas-accelerator/labs/lab1-partner-center/#exercise-review-and-publish","title":"Exercise: Review and Publish","text":"<p>In this short exercise, you will check your work by performing the first action of the publication process. You will submit your offer for review to see if it is ready to be published.</p> <ol> <li>Open your offer's overview page.</li> <li>In the upper right corner of the page, click the link for Review and publish.</li> <li> <p>Looking to the right side of the page, notice that some sections have a green circle and at least one is gray. The gray sections are not yet complete, preventing you from taking the next step of publishing your offer.</p>  <p>The Technical configuration section of the offer will not pass review. This is okay for now as we need to fill out the Technical configuration tab and you can't do that until we have a landing page. All other sections should be green.</p>  </li> <li> <p>Go back to all sections that appear with a gray circle and complete those sections.</p> </li> <li>Ensure all sections pass except Technical configuration, which will be addressed in the next lab.</li> </ol>  <p>Congratulation! You have finished this lab.</p> <p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"saas-accelerator/labs/lab2-install/","title":"Lab 2 - Installing the SaaS Accelerator","text":"<p>\ud83d\udc48 Back to SaaS Offer labs</p> <p>\u26a0\ufe0f Completion of this lab is required for the following labs in the series to work properly.</p>"},{"location":"saas-accelerator/labs/lab2-install/#overview","title":"Overview","text":"<p>This lab takes you through a very quick installation process for the SaaS Accelerator using the Azure portal Cloud Shell. Once complete, you will have installed the SaaS Accelerator and published your offer in Partner Center.</p>"},{"location":"saas-accelerator/labs/lab2-install/#exercise-create-an-install-document","title":"Exercise: Create an install document","text":"<ol> <li>Visit the SaaS Accelerator's installation instructions page and copy the basic installation script.</li> <li>Open your favorite text editor and paste the PowersShell script you copied into a text file. You'll fill out the parameters in this file.</li> <li>Add the following optional parameters to the install script. This will make the script run more simply, without prompting you for these values.</li> </ol> <pre><code>-TenantID \"xxxx-xxx-xxx-xxx-xxxx\" `\n-AzureSubscriptionID \"xxx-xx-xx-xx-xxxx\" `\n</code></pre>"},{"location":"saas-accelerator/labs/lab2-install/#defined-values","title":"Defined values","text":"<p>In your text editor, replace each of the below values. They are described below.</p>    Parameter value Description and notes     AzureSubscriptionID The identity of the subscription to use when installing the accelerator. Click here to learn how to find your subscription ID.   ResourceGroupForDeployment The name of the resource group you want to deploy the SaaS solution into. For the purposes of this lab, consider using <code>saas-accelerator-workshop</code>.   SQLAdminLogin The admin username for the SQL Server that will be installed. Do NOT use name \"admin\" as it is not allowed and the deployment script will fail.   SQLAdminLoginPassword The password for the SQL Server instance that will be installed. Make this password secure and at least 12 characters long so the deployment script doesn't fail. Do not use hyphens.   SQLServerName The name of the SQL Server instance that will be deployed. The name can only contain lowercase letters.   TenantID The identity of the tenant to be installed into. Click here to learn how to find your tenant ID.   WebAppNamePrefix A string that will be prefixed to the name of all resources that are created in your deployment resource group. This can be as short as three letters. Use lowercase alphanumeric characters only.    <p>See here for explanations of all parameters including optional ones.</p>"},{"location":"saas-accelerator/labs/lab2-install/#exercise-opening-the-cloud-shell","title":"Exercise: Opening the cloud shell","text":"<p>In the Azure portal, click the button next to the command bar as shown in the image below.</p>  <p>This opens the the PowerShell cloud shell, which is a command line that runs directly in Azure. Note the cloud shell is ready to use once you see a blinking cursor.</p>"},{"location":"saas-accelerator/labs/lab2-install/#exercise-running-the-install-script","title":"Exercise: Running the install script","text":"<ol> <li>Go back to your PowerShell script in your text editor. The command should be completed and ready to run.</li> <li>Copy the entire command into your copy/paste buffer.</li> <li>Go back to the Azure portal in your browser and right click on the command shell window.</li> <li>Select Paste as plain text.</li> <li>If the script doesn't start running automatically, hit Enter.</li> </ol> <p>The script will take several minutes to run. It may reach a point where it seems nothing is happening, but just wait through the entire install. It typically takes eight minutes or so.</p>"},{"location":"saas-accelerator/labs/lab2-install/#install-script-errors","title":"Install script errors","text":"<p>If you see errors in the output of the script, cancel the run of the script by typing CTRL+C.</p> <ol> <li>Fix the errors in your install script. </li> <li>Change the <code>RESOURCE_GROUP</code> and <code>WEB_NAME_PREFIX</code> to new values to prevent collisions.</li> <li>In the cloud shell, do the following.</li> </ol> <pre><code># go back to home directory\ncd ~\n\n# delete the repository directory that was created\nrm -rf ./Commercial-Marketplace-SaaS-Accelerator/\n</code></pre> <ol> <li>Run the revised script.</li> </ol>"},{"location":"saas-accelerator/labs/lab2-install/#successful-install","title":"Successful install","text":"<p>When the script completes successfully, it will print the values you need for the Technical Configuration tab in Partner Center. It will look something like the following. Copy this information to a note or file so you can retrieve it in case you close the browser window.</p> <pre><code>   Add The following URL in PartnerCenter SaaS Technical Configuration-&gt;Landing Page section\n   https://PREFIX-portal.azurewebsites.net/\n   Add The following URL in PartnerCenter SaaS Technical Configuration-&gt;Connection Webhook section\n   https://PREFIX-portal.azurewebsites.net/api/AzureWebhook\n   Add The following TenantID in PartnerCenter SaaS Technical Configuration Tenant ID\n   e6c97eb2-054c-4b5d-9a30-a064766a9e8f\n   Add The following ApplicationID in PartnerCenter SaaS Technical Configuration-&gt;AAD Application ID section\n   bc830358-8c71-4699-b5e6-ea617ac7b5ef\n</code></pre>"},{"location":"saas-accelerator/labs/lab2-install/#exercise-verify-web-applications","title":"Exercise: Verify web applications","text":"<p>Now you'll verify the two web application are up and running.</p>"},{"location":"saas-accelerator/labs/lab2-install/#the-landing-page","title":"The landing page","text":"<ol> <li>In the SaaS Accelerator's resource group, find the App service for the landing page and click it. It is the one named PREFIX-portal.</li> <li>In the upper right corner is the URL of the web app. Click the URL.</li> <li>You should be taken to a web page and receive no errors.</li> </ol>"},{"location":"saas-accelerator/labs/lab2-install/#the-publisher-portal","title":"The publisher portal","text":"<ol> <li>In the SaaS Accelerator's resource group, find the App service for the landing page and click it. It is the one named PREFIX-admin.</li> <li>In the upper right corner is the URL of the web app. Click the URL.</li> <li>You should be taken to a web page and receive no errors. If you are prompted to log in, do so.</li> </ol>"},{"location":"saas-accelerator/labs/lab2-install/#exercise-partner-center-technical-configuration","title":"Exercise: Partner Center Technical Configuration","text":"<ol> <li>Open Partner Center and browse to the Technical configuration page of your offer.</li> <li>Enter the values into the appropriate text fields as per the instructions from the end of the installation script that you copied earlier in this lab.</li> <li>Click Save Draft.</li> <li>Click Review and publish.</li> <li>Publish your offer.</li> </ol> <p>\u26a0\ufe0f Publication will take a while. Only after publication completes can you do the next lab.</p>  <p>To watch the publication process, refresh the offer's Overview page occasionally. Once your offer reaches the Publisher preview stage, you are ready for the next lab. Do NOT press the Go live button.</p>   <p>Congratulation! You have finished this lab.</p> <p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"saas-accelerator/labs/lab3-tour/","title":"Lab 3 - Using the SaaS Accelerator","text":"<p>\ud83d\udc48 Back to SaaS Offer labs</p> <p>\u26a0\ufe0f Completion of the previous labs in this course is required for this lab to work.</p>"},{"location":"saas-accelerator/labs/lab3-tour/#overview","title":"Overview","text":"<p>In this lab, you will familiarize you with the SaaS Accelerator, both from the customer and publisher points of view. The goal is to become comfortable with the SaaS Accelerator's landing page and publisher portal, so you (as a publisher) can monitor and manage your SaaS offer subscriptions.</p>"},{"location":"saas-accelerator/labs/lab3-tour/#exercise-customer-purchase-1","title":"Exercise: Customer purchase 1","text":"<p>As a customer, you will be purchasing the offer. Here, you will do so from within Partner Center. You can do this from the Overview page of your offer under the Publisher signoff stage.</p> <ol> <li>Open Partner Center to your offer's Overview page.</li> <li>Find the link under the Publisher signoff stage.</li> <li>Click the Azure portal preview link. A new tab opens in your browser.</li> <li>Login if prompted.</li> <li>Click the Set up + subscribe button.</li> <li>Create a new resource group named <code>saas-accelerator-purchases</code>.</li> <li>Under SaaS details, name your subscription <code>Subscription01</code>.</li> <li>Click the Review + subscribe button at the bottom of the page.</li> <li>Click the Subscribe button at the bottom of the page.</li> </ol> <p>The SaaS subscription is created. This may take a minute or two. Once the SaaS subscription has been created, you can move on to the following steps.</p>"},{"location":"saas-accelerator/labs/lab3-tour/#exercise-the-first-landing-page","title":"Exercise: The first landing page","text":"<p>In this exercise, you will visit the offer's landing page, provided by the SaaS Accelerator.</p> <ol> <li>Click the Configure account now button.</li> <li>Login and allow the read permissions. This is Azure AD SSO asking for your permission to read account details.</li> <li>Click Accept to allow the application access to your basic account information.</li> <li> <p>You should now see a page with your subscription details on it.</p>  <p>Note that Status is currently <code>PendingFulfillmentStart</code>.</p>  </li> <li> <p>In the lower right corner, click the activate button.</p> </li> </ol>"},{"location":"saas-accelerator/labs/lab3-tour/#the-landing-page-as-a-subscription-tracker","title":"The landing page as a subscription tracker","text":"<p>Remember you are acting in the role of the customer. Perhaps you have more than one subscription with this publisher.</p> <ol> <li>Click the Go to subscriptions list button in the lower right corner.</li> <li>You have one subscription <code>PendingActivation</code> by the publisher.</li> </ol>"},{"location":"saas-accelerator/labs/lab3-tour/#exercise-customer-purchase-2","title":"Exercise: Customer purchase 2","text":"<p>As a customer, you will be purchasing the offer. Here, you will do so from within the Azure portal as you would in a typical buying experience.</p> <ol> <li>Open the Azure portal.</li> <li>In the left menu, click the bit + Create a resource link.</li> <li>Under the search text box, click the See more in Marketplace link.</li> <li>At the top of the screen, you'll see the text, You have private products available. View private products. Click the View private products link.</li> <li>Find the SaaS Accelerator 1 offer and click it.</li> <li>Click the Set up + subscribe button.</li> <li>Select the resource group you created earlier, <code>saas-accelerator-purchases</code>.</li> <li>Under SaaS details, name your subscription <code>Subscription02</code>.</li> <li>Click the Review + subscribe button at the bottom of the page.</li> <li>Click the Subscribe button at the bottom of the page.</li> </ol> <p>The SaaS subscription is being created. This may take a minute or two. Once the SaaS subscription has been created, you can move on to the following steps.</p>"},{"location":"saas-accelerator/labs/lab3-tour/#exercise-the-second-landing-page","title":"Exercise: The second landing page","text":"<p>In this exercise, you will visit the offer's landing page, provided by the SaaS Accelerator.</p> <ol> <li>Click the Configure account now button and log in if needed.</li> <li>Click the Activate button.</li> <li>Click the Go to subscriptions list button in the lower right corner.</li> <li>You have two subscriptions, one in <code>PendingActivation</code> and another in <code>PendingFulfillmentStart</code>.</li> </ol>"},{"location":"saas-accelerator/labs/lab3-tour/#exercise-the-publisher-activates-a-subscription","title":"Exercise: The publisher activates a subscription","text":"<p>Now you are going to the play the role of the publisher and activate the customer's subscriptions.</p>"},{"location":"saas-accelerator/labs/lab3-tour/#the-publisher-portal","title":"The publisher portal","text":"<ol> <li>In the SaaS Accelerator's resource group, find the App service for the landing page and click it. It is the one named PREFIX-admin.</li> <li>In the upper right corner is the URL of the web app. Click the URL.</li> <li>You should be taken to a web page and receive no errors. If you are prompted to log in, do so.</li> <li>Click the Subscriptions tile. You can see the two subscriptions awaiting activation.</li> <li>For the <code>Subscription01</code> subscription, click the menu under Action and select Activate.</li> <li>Note the status.</li> <li>Click the Activate button.</li> <li>Click the Go to the subscription list button and see the new state of the subscription.</li> </ol>"},{"location":"saas-accelerator/labs/lab3-tour/#explore-for-a-few-minutes","title":"Explore for a few minutes","text":"<p>We encourage you to explore for a few minutes to play with the other capabilities of the SaaS Accelerator. First, there is the landing page, which also provides subscription visibility for the subscriber. Then there is the publisher portal, which allows monitoring and management of subscriptions.</p> <p>Here are some things you might try.</p> <ul> <li>Look at the status of each subscription via its landing page. Get there from the SaaS blade in the Azure portal.</li> <li>Cancel, or Unsubscribe, a subscription from within the publisher portal.</li> <li>Look at the other ways to navigate the publisher portal and see subscriptions and offers.</li> </ul>  <p>Congratulation! You have finished this lab.</p> <p>\ud83d\udc48 Back to SaaS Offer labs</p>"},{"location":"teams/","title":"Index","text":"<p>Home</p>"},{"location":"teams/#mastering-transactable-teams-applications-with-app-camp","title":"Mastering transactable Teams applications with App Camp","text":"<p>The materials on this page come from the Microsoft Teams App Camp. App Camp started as a live event and is now available on-demand. The content here presents the on-demand materials.</p> <p>This online learning series includes videos, sample code, and hands-on labs meant to speed your time to publishing your transactable Teams offer on the Microsoft marketplace. If you are building a Teams offer for the marketplace this learning series is for you.</p> <p>\u2709\ufe0f Let us know what you need from this content, or tell us how we're doing.</p> <p>\ud83e\uddea Grow your skills with the hands-on labs.</p> <p>\ud83d\udea6 Not sure where to get started? Try the Working with  Microsoft Teams Offers Learning Path.</p>"},{"location":"teams/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Welcome to Teams App Camp!</li> <li>The Microsoft Teams marketplace</li> <li>Monetizing your Teams app</li> <li>The tech you need</li> <li>Hands-on labs</li> </ul>"},{"location":"teams/#welcome-to-teams-app-camp","title":"Welcome to Teams App Camp!","text":"<p>Video</p> <p>This welcome video provides an overview of what you can expect from App Camp and even some introductions by the instructors. This video will also show you the broad strokes of what you'll be doing in the labs!</p>"},{"location":"teams/#the-microsoft-teams-marketplace","title":"The Microsoft Teams marketplace","text":"<p>How can putting your app in the Teams app store generate revenue for you? What benefits does Microsoft offer ISVs who build Teams applications? How will my application appear to Teams users, and how will it help them? These questions and more are answered in the videos in this section.</p>"},{"location":"teams/#opportunities-for-startups","title":"Opportunities for Startups","text":"<p>Video</p> <p>Meena Millman details opportunities for startups to build transactable Teams applications for the Microsoft commercial marketplace. She also presents some partner success stories of those already building for the platform.</p>"},{"location":"teams/#microsoft-teams-marketplace-strategy","title":"Microsoft Teams Marketplace Strategy","text":"<p>Video</p> <p>Masako Kodama introduces us to the larger strategy of the Microsoft Teams platform strategy. She covers custom Teams applications, the Microsoft commercial marketplace, transaction fees, and the M365 ISV benefits program.</p>"},{"location":"teams/#monetizing-your-teams-app","title":"Monetizing your Teams app","text":"<p>The following videos explain the Microsoft commercial marketplace and how to integrate your application with the e-commerce system that drives it.</p>"},{"location":"teams/#5-steps-to-monetize-your-teams-application","title":"5 Steps to monetize your Teams application","text":"<p>Video</p> <p>James Skay takes walks through the steps of getting transactable Teams applications into the Microsoft commercial marketplace. He walks through the following activities.</p> <ul> <li>What is a monetized Teams app?</li> <li>Creating a free Teams app</li> <li>Technical requirements</li> <li>Creating a transactable SaaS offer</li> <li>Linking your offer to a Teams app</li> <li>Submitting your app</li> <li>Next steps</li> </ul>"},{"location":"teams/#publish-your-app-in-the-microsoft-teams-app-store","title":"Publish your app in the Microsoft Teams app store","text":"<p>Video</p> <p>The Microsoft Teams App Store gives you access to millions of Microsoft Teams customers around the world! Your apps can be monetized through the Microsoft commercial marketplace to generate revenue.</p> <p>While there are a lot of videos showing how to build a Teams app, there aren\u2019t many about publishing an app in the Teams app store. In this video, Cloud Solutions Architect Natalia Kats walks you through every step of app publication. </p>"},{"location":"teams/#the-tech-you-need","title":"The tech you need","text":"<p>These videos will help you understand how Teams applications and Azure AD SSO work, so you can better understand the labs as you do them.</p>"},{"location":"teams/#get-started-building-microsoft-teams-apps","title":"Get started building Microsoft Teams apps","text":"<p>Video</p> <p>In this video, Microsoft Cloud Advocates Bob German and Rabia Williams deep dive into the basic concepts of Microsoft Teams app development. They cover how to get started building apps for Teams in this in-depth tutorial. </p>"},{"location":"teams/#understanding-single-sign-on-sso-with-azure-ad-and-microsoft-teams","title":"Understanding Single Sign-On (SSO) with Azure AD and Microsoft Teams","text":"<p>Video</p> <p>Microsoft Cloud Advocate Bob German helps you understand the sometimes complex topic of single sign-on. It\u2019s intended as a starting point for developers who want to build Microsoft Teams apps and who need to understand SSO with Azure Active Directory, which is the authentication system used by Teams.</p>"},{"location":"teams/#anatomy-of-a-saas-application","title":"Anatomy of a SaaS Application","text":"<p>Video</p> <p>Microsoft Principal Software Engineer David Starr tours the components and requirements of a SaaS offer. Transactable Teams applications are built on top of SaaS offers and this video covers the anatomy of one in depth. Watch this video to understand what will go into your SaaS application as you build out your Team offer. </p>"},{"location":"teams/#multi-tenant-architecture-for-saas-apps-with-microsoft-365-and-azure-active-directory","title":"Multi-tenant architecture for SaaS apps with Microsoft 365 and Azure Active Directory","text":"<p>Video</p> <p>Multi-tenancy is an architecture where multiple tenants share the same physical instance of an app. In this video, you'll learn how to create multi-tenant apps with Microsoft Cloud Advocates Bob German and Rabia Williams. They convert a JavaScript Single Page Application to a multi-tenant application while explaining the concept of multi-tenant apps.  </p>"},{"location":"teams/#hands-on-labs","title":"Hands-on labs\ud83e\uddea","text":"<p>Although the above videos take you through some great materials on various aspects of selling your Teams application, Teams App Camp is fundamentally about building your skills through labs that you can do at your own pace.</p>"},{"location":"teams/#labs-overview","title":"Labs overview","text":"<p>The labs are hosted on another site, Microsoft Teams App Camp. But this section will guide you down the path of the labs you need to complete to understanding how to build a Teams app that can be sold in the marketplace. The application code involved is plain JavaScript without a framework like Angular or React.js behind it, to keep things platform neutral and as simple as possible.</p>"},{"location":"teams/#lab-order-and-links","title":"Lab order and links","text":"<p>The labs are structured as a series of 3 required labs followed by a \"Choose your own adventure\" style of labs such that you can explore on your own. Here, you'll find information on four labs, the three required ones plus the lab, \"Selling Your SaaS-based Teams Extension.\"</p> <p>The videos in the next section will help you through each lab.</p> <ol> <li>Setting up the application with Azure AD</li> <li>Creating a Teams app with Azure ADO SSO</li> <li>Teams styling and themes</li> <li>Selling Your SaaS-based Teams Extension</li> </ol>"},{"location":"teams/#about-the-lab-videos","title":"About the lab videos","text":"<p>The following videos will take you through the labs in detail so you can learn by example. Feel free to play and pause the videos as you follow along, building your own Teams application.</p> <p>If you'd like to watch the labs before doing them, they are here. They're also posted at the beginning of each lab. The instructions should stand on their own - you don't need to watch in order to complete the labs - but they can help if you get stuck or want to understand the labs more deeply.</p> <p>\ud83e\udd7c After completing these four labs, feel free to experiment with the other labs in App Camp to learn even more about building Teams applications and the extension points available.</p>"},{"location":"teams/#lab-a01-setting-up-the-application-with-azure-ad","title":"Lab A01: Setting up the application with Azure AD","text":"<p>Video</p> <p>Starting your lab series with AAD. This video walks through the first lab in the series. Watch this video to learn about topics such as the following.</p> <ul> <li>Using ngrok</li> <li>Getting your free developer tenant</li> <li>About multi-tenant apps: https://youtu.be/RjGVOFm39j0</li> <li>SSO in Microsoft Teams apps</li> <li>\ud83d\udee0\ufe0f Lab prerequisites</li> </ul>"},{"location":"teams/#lab-a02-creating-a-teams-app-with-azure-ado-sso","title":"Lab A02: Creating a Teams app with Azure ADO SSO","text":"<p>Video</p> <p>This lab builds on lab A01. In this lab walk through video you will see how to do the following.</p> <ul> <li>Authorize Microsoft Teams to log users into your app</li> <li>Create the Teams app package</li> <li>Modify the app source code</li> <li>Run your app in Microsoft Teams</li> </ul>"},{"location":"teams/#lab-a03-teams-styling-and-themes","title":"Lab A03: Teams styling and themes","text":"<p>Video</p> <p>This lab builds on lab A02. In this lab you will learn how to do the following.</p> <ul> <li>Apply styles based on the Microsoft Teams figma to make your application look like it belongs in Microsoft Teams</li> <li>Display your application with the same color theme the user has selected in Microsoft Teams</li> </ul>"},{"location":"teams/#lab-4-selling-your-saas-based-teams-extension","title":"Lab 4 - Selling Your SaaS-based Teams Extension","text":"<p>Video</p> <p>This lab builds on lab A03. This lab overview walks through the following concepts.</p> <ul> <li>How users buy your app</li> <li>A mock sample landing page and licensing code</li> <li>Granting consent to access licensing code</li> </ul>"},{"location":"vm/","title":"Index","text":"<p>Home</p>"},{"location":"vm/#mastering-virtual-machine-offers","title":"Mastering Virtual Machine Offers","text":"<p>The content in this course is from a live hands-on workshop. These demo-heavy modules take you all the way from creating a new virtual machine in Azure through publishing a custom virtual machine offer to the Microsoft commercial marketplace. If you are looking to publish a new virtual machine offer, this series will get you from beginner to advanced in a short time.</p> <p>\u2709\ufe0f Let us know what you need from this content, or tell us how we're doing.</p> <p>\ud83d\udea6 Not sure where to get started? Try the Working with Virtual Machine Offers Learning Path.</p> <p>\ud83e\uddea Grow your skills with the hands-on labs.</p>   <ul> <li>Creating Virtual Machine Offers Overview</li> <li>Partner Center Overview</li> <li>Creating an Offer in Partner Center (Demo)</li> <li>Creating and Customizing a Virtual Machine (Demo)</li> <li>Generalizing and Capturing a Virtual Machine Image</li> <li>Generalizing and Capturing a Virtual Machine Image (Demo)</li> <li>Publish Your Virtual Machine Offer with Partner Center (Demo)</li> <li>Securing Your Virtual Machine</li> <li>Virtual Machine Automation with Packer Overview</li> <li>Virtual Machine Automation with Packer (Demo)</li> <li>The Virtual Machine Offer Certification Process</li> <li>Virtual Machine Certification Test Tool (Demo)</li> <li>Purchasing the Virtual Machine Offer</li> <li>Virtual Machine Software Reservations Overview</li> <li>Securing virtual machines and containers for certification</li> <li>Hands-on labs</li> </ul>"},{"location":"vm/#creating-virtual-machine-offers-overview","title":"Creating Virtual Machine Offers Overview","text":"<p>Video</p> <p>This introductory module takes you from start to finish in creating and publishing virtual machine offers in the Microsoft commercial marketplace. Get an overview of the process from beginning to end before embarking on the more technical details in later modules.</p>"},{"location":"vm/#partner-center-overview","title":"Partner Center Overview","text":"<p>Video</p> <p>Learn about creating your offers in Partner Center, including private plans, CRM integration, and more.</p>"},{"location":"vm/#creating-an-offer-in-partner-center-demo","title":"Creating an Offer in Partner Center (Demo)","text":"<p>Video</p> <p>See how to create an offer in Partner Center to include creating the offer, configuring a basic CRM integration, specifying offer properties, listing details, and resell with CSP settings. This video does not go into the specifics of creating the Virtual Machine plans for the offer, which will be seen in a later demo.</p>"},{"location":"vm/#creating-and-customizing-a-virtual-machine-demo","title":"Creating and Customizing a Virtual Machine (Demo)","text":"<p>Video</p> <p>Learn how to not only create a Virtual Machine, but how to customize it by adding scripts or applications. This is a required step in creating your Virtual Machine offer so that the Virtual Machine itself has your intellectual property installed on it.</p>"},{"location":"vm/#generalizing-and-capturing-a-virtual-machine-image","title":"Generalizing and Capturing a Virtual Machine Image","text":"<p>Video</p> <p>Learn what it means to generalize and capture a Virtual Machine so it can be made available in your offer. The examples provided in this overview pertain to both Windows and Linux machines.</p>"},{"location":"vm/#generalizing-and-capturing-a-virtual-machine-image-demo","title":"Generalizing and Capturing a Virtual Machine Image (Demo)","text":"<p>Video</p> <p>See how to capture both a Linux and Windows Virtual Machine for use in your marketplace offer. This demo is done with a Linux machine, but the difference for Windows is explained along the way. Most actions taken are applicable to both machine types and this module gives you what you need to know to generalize and capture both machine types.</p>"},{"location":"vm/#publish-your-virtual-machine-offer-with-partner-center-demo","title":"Publish Your Virtual Machine Offer with Partner Center (Demo)","text":"<p>Video</p> <p>This demonstration takes you through creating a plan for your Virtual Machine offer, associating the correct image to the plan, and setting other configuration options on your Virtual Machine. After completing the plan configuration you get to see the offer published.</p>"},{"location":"vm/#securing-your-virtual-machine","title":"Securing Your Virtual Machine","text":"<p>Video</p> <p>Learn about things you can do to secure your Virtual Machine offer and the image used to create it. There are plenty of techniques you can use to harden your Virtual Machine against attackers and this video will take you through several.</p>"},{"location":"vm/#virtual-machine-automation-with-packer-overview","title":"Virtual Machine Automation with Packer Overview","text":"<p>Video</p> <p>Learn about the Packer tool that enables automating many of the tasks you\u2019ve seen done by hand up until now. Packer gives you the power to create virtual machines, install software, create images, and more.</p>"},{"location":"vm/#virtual-machine-automation-with-packer-demo","title":"Virtual Machine Automation with Packer (Demo)","text":"<p>Video</p> <p>See how the Packer tool gives you the power to automate many of the tasks needed to created Virtual Machine images for your Virtual Machine offer. This walkthrough using VS Code and the command line leaves you with the tools you need to begin your own automation.</p>"},{"location":"vm/#the-virtual-machine-offer-certification-process","title":"The Virtual Machine Offer Certification Process","text":"<p>Video</p> <p>This quick lecture walks through the Virtual Machine offer certification process and details common reasons why certification may fail for a newly submitted virtual machine offer. This video can save you loads of time by helping you avoid common mistakes or misunderstandings.</p>"},{"location":"vm/#virtual-machine-certification-test-tool-demo","title":"Virtual Machine Certification Test Tool (Demo)","text":"<p>Video</p> <p>There is a tool one can use to help prepare their Virtual Machine image for certification. The Virtual Machine image certification tool is exercised in this video, and we get to see how to set it up and use it to gain confidence that a Virtual Machine image will not be rejected during certification.</p>"},{"location":"vm/#purchasing-the-virtual-machine-offer","title":"Purchasing the Virtual Machine Offer","text":"<p>Video</p> <p>The offer is now complete and ready to test in Partner Center. In this video, experience buying the completed Virtual Machine offer from the point of view of the customer.</p>"},{"location":"vm/#virtual-machine-software-reservations-overview","title":"Virtual Machine Software Reservations Overview","text":"<p>Video</p> <p>This module provides an overview of what Virtual Machine software reservations are and expands on various billing scenarios and publishing on the marketplace. You will also learn the publisher and customer experience of using VM software reservations.</p>"},{"location":"vm/#securing-virtual-machines-and-containers-for-certification","title":"Securing virtual machines and containers for certification","text":"<p>Video | PDF</p> <p>The last thing you want is to create and publish an offer only to have it fail Microsoft\u2019s certification process. This module provides important tips and effective practices for securing virtual machines and containers before publication to the Azure Marketplace, so your offer makes it through certification the first time.</p>"},{"location":"vm/#hands-on-labs","title":"Hands-on labs","text":"<p>The following hands-on labs build upon each other. They take you through the complete process of creating and publishing a virtual machine offer in the Microsoft commercial marketplace. </p> <p>Clone this repository to your local machine. You will need some artifacts from the lab folders to complete the labs.</p>"},{"location":"vm/#prerequisites","title":"Prerequisites","text":"<ul> <li>An Azure Subscription to create resources</li> <li>An active Partner Center Account (Please ensure you have enrolled into the Marketplace Offers program)</li> <li>Visual Studio Code or other text editor</li> </ul>"},{"location":"vm/#labs","title":"Labs\ud83e\uddea","text":"<ol> <li>Partner Center Setup</li> <li>VM Creation</li> <li>Generalize and Capture Image</li> <li>Publish the Offer</li> <li>Purchase your Offer</li> </ol>"},{"location":"vm/Labs/lab1-partner-center-setup/","title":"Lab 1 - Partner Center Setup for a Virtual Machine Offer","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>This lab is part of a series of labs for Mastering the Virtual Machine Offers workshop. You should finish this lab before moving on to the next labs in this course. </p>"},{"location":"vm/Labs/lab1-partner-center-setup/#prerequisites-before-starting-this-lab","title":"Prerequisites before starting this lab","text":"<ol> <li>Partner Center Account with enrollment in the commercial marketplace program</li> <li>Access to the Azure Portal on the same tenant as is on Partner Center (Same tenancy is required to ensure you can publish images out of Azure Compute Galleries, more on this in the later modules).</li> </ol>"},{"location":"vm/Labs/lab1-partner-center-setup/#create-a-new-virtual-machine-offer","title":"Create a new Virtual Machine Offer","text":"<p>In this section you will be creating a brand new VM Offer from scratch. This will be used for publishing the offer once the rest of your labs are completed.</p> <p>The following steps will create an offer on your Partner Center Portal.</p> <ol> <li>On the Homepage of Partner Center, look for Marketplace Offers and click that tile. If you have disabled Workspaces, then it will be visible as Commercial Marketplace.</li> <li>Click the + New Offer button and select Azure Virtual Machine from the dropdown.</li> <li> <p>You will now have to enter a unique Offer ID and an Offer Alias. For the purpose of uniformity for this lab, we will set a unique string to identify resources, like so,</p> <ul> <li>Offer ID: vmworkshop-YOUR_UNIQUE_STRING</li> <li>Offer Alias: VM Workshop YOUR_UNIQUE_STRING</li> </ul> <p>Replace the variable YOUR_UNIQUE_STRING with a name unique to your organization</p> </li> </ol> <p>Once the offer is created, navigate to the Offer Setup page by clicking on that tab on the left.</p>"},{"location":"vm/Labs/lab1-partner-center-setup/#offer-setup","title":"Offer Setup","text":"<p>Offer Setup page will direct you with ways to change your offer alias as well as enable Test Drive. For the purpose of this lab, we will leave everything as is and only configure the Customer leads section.</p>"},{"location":"vm/Labs/lab1-partner-center-setup/#customer-leads","title":"Customer leads","text":"<p>Here, you will attach your offer to an Azure Data Storage table which will act as a connected Customer Relationship Management system (CRM) for your offer.</p>"},{"location":"vm/Labs/lab1-partner-center-setup/#create-the-azure-storage-account","title":"Create the Azure Storage account","text":"<p>This is the first time you're using the Azure portal for this class. It is recommended that you install all the resources you'll create in this class into the same Resource Group, just to keep things tidy within your Azure subscription.</p> <ol> <li>Open a new tab for the Azure portal and log in.</li> <li>Create a Resource Group named vmworkshop-YOUR_UNIQUE_STRING. Please note that this is the same unique string you added while creating the offer. </li> <li>In the vmworkshop-YOUR_UNIQUE_STRING Resource Group, create a standard Azure Storage account. This will be your CRM database, so name it vmworkshopsayouruniquestring. Note all characters are lower case for naming a storage account.</li> <li>Once the storage account is created, browse to the storage account's overview page.</li> <li>In the left-hand menu, find the Security + networking section.</li> <li>In that section, find and click on the Access keys link.</li> <li>At the top of the page, click the Show keys link, and you see the connection strings for the database.</li> <li>Copy a connection string to your copy/paste buffer.</li> </ol>"},{"location":"vm/Labs/lab1-partner-center-setup/#configure-customer-leads-in-partner-center","title":"Configure Customer Leads in Partner Center","text":"<ol> <li>Go back to the Partner Center tab in your browser.</li> <li>Select the Connect link.</li> <li>From the Lead destination dropdown, select Azure Table.</li> <li>Enter your Contact email and paste in your Storage account connection string.</li> <li>Click the Validate link to ensure your connection string is valid.</li> <li>Click Connect.</li> <li>Click Save draft at the bottom of the page.</li> </ol>  <p>\u26a0\ufe0f For each page, you must click the Save draft at the bottom of the page to move on.</p>"},{"location":"vm/Labs/lab1-partner-center-setup/#properties","title":"Properties","text":"<p>Navigate to the Properties page by selecting the Properties tab on the left.</p>"},{"location":"vm/Labs/lab1-partner-center-setup/#categories","title":"Categories","text":"<p>You must select at least one category for your offer. Virtual machine offers always appear under the Compute category in Azure Marketplace. For this lab we will be selecting the below configurations.</p> <ol> <li>Click the + Categories link.</li> <li>In the left dropdown, select Compute.</li> <li>In the right dropdown, select Application Infrastructure.</li> </ol>"},{"location":"vm/Labs/lab1-partner-center-setup/#legal","title":"Legal","text":"<p>We will be using the Microsoft Standard Contract for this lab. You may choose differently when you are publishing to the prod environment.</p> <ol> <li>Scroll down to the Legal section.</li> <li>Select Use the Standard Contract for Microsoft\u2019s commercial marketplace? checkbox</li> <li>Click Accept.</li> <li>Click the Save draft button.</li> </ol>"},{"location":"vm/Labs/lab1-partner-center-setup/#offer-listing","title":"Offer listing","text":"<p>Navigate to the Offer listing page.</p> <ol> <li>In the the Offer listing section, for Search results summary enter VM Workshop summary.</li> <li> <p>For Short Description and Description, here is some text you may choose to copy and paste into the text box.</p> <p><code>Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</code></p> </li> <li> <p>In the Privacy policy link, enter the public link to the privacy policy for your company if you know it. If not, follow this link to Microsoft's privacy policy and use that URL.      &gt;Please note that using Microsoft's privacy policy is only for the purpose of this lab and should not be used for your production offer.</p> </li> <li>In the Customer Support links section, enter Azure support website information (Optional)</li> <li>In the Partner Support Contact section, enter your contact information.</li> <li>In the Engineering Contact section, enter your engineering contact information.</li> <li>In the Cloud Solution Provider Program Contact section, enter the appropriate contact information (Optional)</li> <li>For the Marketplace media section you'll upload 2 images, both of which are available here.<ol> <li>For the 216X216 logo image, upload the PNG provided. This PNG is named \"Contoso-Logo-216x216.png.\"</li> <li>For the 1280X720 screenshot image, upload the PNG provided. This PNG is named \"Screenshots-1280x720.png.\"</li> <li>Add a screenshot image caption.</li> </ol> </li> <li>Click the Save draft button and correct any errors that be shown before moving on.</li> </ol>"},{"location":"vm/Labs/lab1-partner-center-setup/#preview-audience","title":"Preview audience","text":"<ol> <li>In the Preview audience section, enter your Azure subscription Id. </li> <li>Enter a Description (Optional).</li> <li>Click Save draft.</li> </ol>"},{"location":"vm/Labs/lab1-partner-center-setup/#technical-configuration","title":"Technical configuration","text":"<p>Skip this section for this lab. You'll come back to it later.</p>"},{"location":"vm/Labs/lab1-partner-center-setup/#plan-overview","title":"Plan overview","text":"<p>Skip this section for this lab. You'll come back to it later.</p>"},{"location":"vm/Labs/lab1-partner-center-setup/#resell-through-csps","title":"Resell through CSPs","text":"<p>Finally navigate to the Resell through CSPs tab.</p> <ol> <li>Select \"No partners in the CSP program.\"</li> <li>Click the Save draft button at the bottom of the screen.</li> </ol>"},{"location":"vm/Labs/lab1-partner-center-setup/#review-and-publish","title":"Review and Publish","text":"<p>In this short exercise, you will check your work by performing the first action of the publication process. You will submit your offer for review to see if it is ready to be published.</p> <ol> <li>Open your offer's overview page.</li> <li>In the upper right corner of the page, click the link for Review and publish.</li> <li> <p>Looking to the right side of the page, notice that some sections have a green circle and at least one is gray. The gray sections are not yet complete, preventing you from taking the next step of publishing your offer.</p>  <p>The Plan overview section of the offer will not pass review. This is okay for now as we need to fill out the Plan overview tab and you can't do that until we have a VM image. All other sections should be green.</p>  </li> <li> <p>Go back to all sections that appear with a gray circle and complete those sections with the guidance provided above.</p> </li> <li>Ensure all sections pass except Plan overview, which will be addressed in the next lab.</li> </ol> <p>Congratulations! You have now finished this lab.</p> <p>\ud83d\udc48 Back to Virtual Machine labs</p>"},{"location":"vm/Labs/lab2-vm-creation/","title":"Lab 2 - Create a Virtual Machine","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>\ud83d\uddd2\ufe0f This lab has two options and you should choose one of the two to proceed further. Your choice impact future modules, so ensure to work with your preferred lab before moving forward.</p>"},{"location":"vm/Labs/lab2-vm-creation/#prerequisites-before-starting-these-labs","title":"Prerequisites before starting these labs","text":"<ol> <li>Access to the Azure Portal on the same tenant as is on Partner Center </li> <li>Have an Azure Subscription in order to create and pay for usage of created resources</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/#lab-2a-create-a-windows-virtual-machine","title":"Lab 2.a: Create a Windows Virtual Machine","text":"<p>Perform this lab to create a Windows based Virtual Machine. If you choose to go with this lab, you will have to choose the same base image labs for the next sections as well.</p>"},{"location":"vm/Labs/lab2-vm-creation/#lab-2b-create-a-linux-virtual-machine","title":"Lab 2.b: Create a Linux Virtual Machine","text":"<p>Perform this lab to create a Linux based Virtual Machine. If you choose to go with this lab, you will have to choose the same base image labs for the next sections as well.</p> <p>You will configure the size, availability considerations as well as use a post deployment script to install a web server within the same server.</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/","title":"Lab 2.a - Create a Windows Virtual Machine","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>This lab is part of a series of labs for Mastering the Virtual Machine Offers workshop. You should finish this lab before moving on to the next labs in this course.</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#upload-post-deployment-script","title":"Upload Post Deployment Script","text":"<ol> <li>Clone the repository to access files in scripts folder</li> <li>Navigate to the Homepage of Azure Portal </li> <li>Use the Search bar to search for Storage Accounts and hit enter. Select the vmworkshopsayouruniquestring Storage account we created in the previous lab.</li> <li>In the left pane, look for Data Storage and select Containers</li> <li>Click on + Container to create a new container<ul> <li>Enter script as the new container name</li> <li>Select Blob for Public access level</li> <li>Click Create at the bottom of the page</li> </ul> </li> <li>Open the new container, select Upload and upload the cloned script named custom_extension_windows.ps1 </li> <li>If you open this script in VS Code or Notepad, you will see that it is running commands to install a web server and update the Virtual machine</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#create-a-virtual-machine","title":"Create a Virtual Machine","text":"<ol> <li>Navigate to the Homepage of Azure Portal</li> <li>Click on the + Create a resource button underneath Azure services</li> <li>Use the Search bar to search for Virtual Machines and hit enter. Select the Virtual Machine offered by Microsoft Azure Service and click on Create</li> </ol> <p>At this point you will be taken to the Virtual Machine service with several blades for configuration.</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#basics","title":"Basics","text":""},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#project-details","title":"Project Details","text":"<ol> <li>Select the Subscription from the dropdown menu to select which subscription will pay for the VM and other resource usage</li> <li> <p>To create a new Resource Group, click on Create New and name your resource group as vmworkshop-rg-YOUR_UNIQUE_STRING. Please make sure to follow the same convention for ease of access and understanding. </p>  <p>Note that all the resources we create for the labs will reside within this new resource group</p>  </li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#instance-details","title":"Instance Details","text":"<ol> <li>Name your Virtual Machine vmworkshop-YOUR_UNIQUE_STRING</li> <li>Select the Region you are in from the dropdown menu</li> <li>Under Availability options, select No infrastructure redundancy required</li> <li>Select Standard Security type</li> <li>For Image, click on See all images and select Windows Server 2019 Datacenter - Gen1. Configure the generation from the Configure VM Generation link below if necessary.</li> <li>For size, click on See all sizes and select Standard_B2ms. This is sufficient to run this lab and will cost around $60/month, but regardless we will stop this virtual machine as soon as we generalize and capture the VM, so usage should be very low.</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#administrator-account","title":"Administrator Account","text":"<ol> <li>Enter the username of your choice</li> <li>Enter a strong password of your choice </li> <li>Confirm the strong password</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#inbound-port-rules","title":"Inbound Port Rules","text":"<ol> <li>Select the Allowed selected ports radio button for Public inbound ports</li> <li>For Select Inbound ports Select HTTP, RDP as well as HTTPS</li> <li>Leave the rest as is and Click Next : Disks &gt; </li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#disks","title":"Disks","text":""},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#disk-options","title":"Disk Options","text":"<ol> <li>For OS Disk Type, select Standard HDD (locally-redundant storage</li> </ol> <p>Leave the rest of the fields as is on the page and click on Next : Networking &gt;</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#networking","title":"Networking","text":""},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#network-interface","title":"Network interface","text":"<ol> <li>For Virtual network, Subnet, Public IP keep the default values as is. This will create a new VM, Subnet and Public IP with the default variable names</li> <li>Ensure Select inbound ports has HTTP, RDP and HTTPS checked</li> </ol> <p>Leave the rest as is and click on Next : Management &gt;</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#management","title":"Management","text":"<p>Do not change anything in this section and simply click on Next : Advanced &gt;</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#advanced","title":"Advanced","text":""},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#extensions","title":"Extensions","text":"<ol> <li>Click on Select an extension to install</li> <li>From the display card, select Custom Script Extension and click on Next</li> <li>For Script file, browse for the vmworkshopsayouruniquestring storage account, select script and look for the custom_extension_windows.ps1 Block blob and select it. Lastly click Select at the bottom of the page. [If you dont see storage account, please make sure it is in the same region as the VM which is being created]</li> <li> <p>Now click Create under the Configure Custom Script Extension blade</p> </li> <li> <p>Select Review + create button at the bottom of the Advanced blade</p> </li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#review-create","title":"Review + create","text":"<ol> <li>In this blade, you should ensure that you receive the Validation Passed message at the top. If for any reason you receive a Validation failed message, you should go back and review the fields in red.</li> <li>Lastly take a look at the configurations you have selected and click Create</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#post-vm-creation-exercise","title":"Post VM Creation Exercise","text":"<ol> <li>At this point your deployment will start and show an in progress status. </li> <li>Once the deployment is complete, select Go to resource</li> <li>Copy Public IP Address from the created VM and paste it into a browser of your choice. This will show a public facing IP on the internet with a custom Welcome screen. </li> <li>Once you see the custom welcome screen, you know that the post deployment script has done its job. </li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.a-create-a-windows-virtual-machine/#windows-update-manually","title":"Windows Update Manually","text":"<p>In this module, we will remote into the vm and install an update manually.  1. On your Azure Portal, navigate to the VM you just created. Click on Connect from the tabs on the left under Settings. 1. In the RDP blade, select Download RDP file. This will download a copy to your local machine. Double-click the downloaded RDP file. 1. It will open a popup asking if you recognize the publisher. Click on Connect. 1. When asked for credentials, make sure to input the username and password you created for the VM. 1. Accept the certificate and click Yes when prompted. 1. Voila! You are now inside the VM. 1. Once the system is setup, search for Check for Updates in the VM and install all available updates</p> <pre><code>&gt; Note: Update all the shown updates before going further. Failure to do so will render your publish process on Partner center with errors\n</code></pre>  <p>Congratulations! You have finished this lab.</p> <p>\ud83d\udc48 Back to Virtual Machine labs</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/","title":"Lab 2.b - Create a Linux Virtual Machine","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>This lab is part of a series of labs for Mastering the Virtual Machine Offers workshop. You should finish this lab before moving on to the next labs in this course.</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#upload-post-deployment-script","title":"Upload Post Deployment Script","text":"<ol> <li>Clone the repository to access files in scripts folder</li> <li>Navigate to the Homepage of Azure Portal </li> <li>Use the Search bar to search for Storage Accounts and hit enter. Select the vmworkshopsayouruniquestring Storage account we created in the previous lab.</li> <li>In the left pane, look for Data Storage and select Containers</li> <li>Click on + Container to create a new container<ul> <li>Enter script as the new container name</li> <li>Select Blob for Public access level</li> <li>Click Create at the bottom of the page</li> </ul> </li> <li>Open the new container, select Upload and upload the cloned script named custom_extension_linux.sh </li> <li>If you open this script in VS Code or Notepad, you will see that it is running commands to install a web server and update the Virtual machine</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#create-a-virtual-machine","title":"Create a Virtual Machine","text":"<ol> <li>Navigate to the Homepage of Azure Portal</li> <li>Click on the + Create a resource button underneath Azure services</li> <li>Use the Search bar to search for Virtual Machine and hit enter. Select the Virtual Machine offered by Microsoft Azure Service and click on Create</li> </ol> <p>At this point you will be taken to the Virtual Machine service with several blades for configuration.</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#basics","title":"Basics","text":""},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#project-details","title":"Project Details","text":"<ol> <li>Select the Subscription from the dropdown menu to select which subscription will pay for the VM and other resource usage</li> <li> <p>To create a new Resource Group, click on Create New and name your resource group as vmworkshop-rg-YOUR_UNIQUE_STRING. Please make sure to follow the same convention for ease of access and understanding. </p>  <p>Note that all the resources we create for the labs will reside within this new resource group</p>  </li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#instance-details","title":"Instance Details","text":"<ol> <li>Name your Virtual Machine vmworkshop-YOUR_UNIQUE_STRING</li> <li>Select the Region you are in from the dropdown menu</li> <li>Under Availability options, select No infrastructure redundancy required</li> <li>Select Standard Security type</li> <li>For Image, click on See all images and select Ubuntu Server 20.04 LTS - Gen2. Configure the generation from the Configure VM Generation link below if necessary.</li> <li>For size, click on See all sizes and select Standard_B2ms. This is sufficient to run this lab and will cost around $60/month, but regardless we will stop this virtual machine as soon as we generalize and capture the VM, so usage should be very low.</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#administrator-account","title":"Administrator Account","text":"<ol> <li>Select SSH public key as authentication type</li> <li>Enter the username of your choice</li> <li>Select Generate a new key pair from the dropdown for SSH public key source</li> <li>Eneter the name of your Key pair  </li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#inbound-port-rules","title":"Inbound Port Rules","text":"<ol> <li>Select the Allow selected ports radio button for Public inbound ports</li> <li>For Select Inbound ports Select HTTP as well as SSH</li> <li>Leave the rest as is and Click Next : Disks &gt; </li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#disks","title":"Disks","text":""},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#disk-options","title":"Disk Options","text":"<ol> <li>For OS Disk Type, select Standard HDD (locally-redundant storage)</li> </ol> <p>Leave the rest of the fields as is on the page and click on Next : Networking &gt;</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#networking","title":"Networking","text":""},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#network-interface","title":"Network interface","text":"<ol> <li>For Virtual network, Subnet, Public IP keep the default values as is. This will create a new VM, Subnet and Public IP with the default variable names</li> <li>Ensure Select inbound ports has HTTP and SSH checked</li> </ol> <p>Leave the rest as is and click on Next : Management &gt;</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#management","title":"Management","text":"<p>Do not change anything in this section and simply click on Next : Advanced &gt;</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#advanced","title":"Advanced","text":"<p>We may use the Advanced blade to customize the VM in two ways. Firstly using Custom Script Extensions and secondly using cloud init. In this module we will demonstrate both, but you should choose to do only once since both paths will essentially do the same flow of changes.</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#option-a-using-cloud-init","title":"OPTION A. Using cloud init","text":"<ol> <li>Navigate to the custom data and cloud init section</li> <li>Copy the code from the custom_extension_linux.sh script in this repository and paste it as is</li> </ol> <p>-- OR --</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#option-b-using-extensions","title":"OPTION B. Using Extensions","text":"<ol> <li>Click on Select an extension to install</li> <li>From the display card, select Custom Script For Linux and click on Next</li> <li>For Script file, browse for the vmworkshopsayouruniquestring storage account, select script and look for the custom_extension_linux.sh Block blob and select it. [If you dont see storage account, please make sure it is in the same region as the VM which is being created]</li> <li>Under command, modify it to sh custom_extension_linux.sh</li> </ol> <p>Select Review + create button at the bottom of the Advanced blade</p>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#review-create","title":"Review + create","text":"<ol> <li>In this blade, you should ensure that you receive the Validation Passed message at the top. If for any reason you receive a Validation failed message, you should go back and review the fields in red.</li> <li>Lastly take a look at the configurations you have selected and click Create</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#generate-new-keypair","title":"Generate New Keypair","text":"<ol> <li>A popup will show on the screen to indicate creation of a new Key pair</li> <li>Select Download private key and create resource and save it</li> </ol>"},{"location":"vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/#post-vm-creation-exercise","title":"Post VM Creation Exercise","text":"<ol> <li>At this point your deployment will start and show an in progress status. </li> <li>Once the deployment is complete, select Go to resource</li> <li>Copy Public IP Address from the created VM and paste it into a browser of your choice. This will show a public facing IP on the internet with a custom Welcome screen. </li> <li>Once you see the custom welcome screen, you know that the post deployment script has done its job. </li> </ol>  <p>Congratulations! You have finished this lab.</p> <p>\ud83d\udc48 Back to Virtual Machine labs</p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/","title":"Lab 3 - Generalize and Capture Image","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>\ud83d\uddd2\ufe0f This lab has two options and you should choose one of the two to proceed further. Your choice impact future modules, so ensure to work with your preferred lab before moving forward.</p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/#prerequisites-before-starting-these-labs","title":"Prerequisites before starting these labs","text":"<ol> <li>Access to the Azure Portal on the same tenant as is on Partner Center </li> <li>Have an Azure Subscription in order to create and pay for usage of created resources</li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/#lab-3a-create-a-windows-virtual-machine","title":"Lab 3.a: Create a Windows Virtual Machine","text":"<p>Perform this lab to generalize and capture the Windows based Virtual Machine you created in the previous lab. </p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/#lab-3b-create-a-linux-virtual-machine","title":"Lab 3.b: Create a Linux Virtual Machine","text":"<p>Perform this lab to generalize and capture the Linux based Virtual Machine you created in the previous lab. </p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.a-generalize-and-capture-windows-image/","title":"Lab 3.a - Generalize and capture a Windows Image","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>This lab is part of a series of labs for Mastering the Virtual Machine Offers workshop. You should finish this lab before moving on to the next labs in this course.</p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.a-generalize-and-capture-windows-image/#generalize-and-capture","title":"Generalize and Capture","text":"<p>In this module, we will remote into the VM and generalize the Virtual machine</p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.a-generalize-and-capture-windows-image/#remote-into-the-virtual-machine","title":"Remote into the Virtual Machine","text":"<ol> <li>On your Azure Portal, navigate to the VM you just created. Click on Connect from the tabs on the left under Settings.</li> <li>In the RDP blade, select Download RDP file. This will download a copy to your local machine. Double-click the downloaded RDP file.</li> <li>It will open a popup asking if you recognize the publisher. Click on Connect.</li> <li>When asked for credentials, make sure to input the username and password you created for the VM.</li> <li>Accept the certificate and click Yes when prompted.</li> <li>Voila! You are now inside the VM.</li> <li>Ensure that the VM doesn't have any pending updates. Search for Check for Updates and install any updates if there are any pending.</li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.a-generalize-and-capture-windows-image/#generalize-the-virtual-machine","title":"Generalize the Virtual Machine","text":"<ol> <li>Open File Explorer inside the VM and navigate to C:\\Windows\\System32\\Sysprep</li> <li>Run the sysprep application</li> <li>Check the Generalize checkbox under System cleanup actions</li> <li> <p>From the Shutdown options dropdown, select Shutdown and click OK</p>  <p>\u26a0\ufe0f At this point, your VM will process these commands and in a few minutes will close the application on its own. The VM should NOT be restarted once it is generalized.</p>  </li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.a-generalize-and-capture-windows-image/#capture-the-image","title":"Capture the Image","text":"<p>In this module, we will capture an image from the Generalized VM and store it in a Compute Gallery. We will also define Image definitions within the Compute Gallery for organization.</p> <ol> <li>Navigate to the VM on Azure Portal You will see that the VM has been stopped under VM Status</li> <li>Click on Capture from the options available on top</li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.a-generalize-and-capture-windows-image/#create-an-image","title":"Create an Image","text":"<ol> <li>Select a subscription from the dropdown menu</li> <li>For Resource Group, select the same resource group we created earlier vmworkshop-rg-YOUR_UNIQUE_STRING.</li> <li>Under Instance details, select the Yes, share it to a gallery as a VM image version radio button</li> <li>Under Gallery Details, select Create new and give it a name</li> <li>For Operating system state, select the Generalized radio button</li> <li>Click the Create new for Target VM image definition and give your definition a name and click OK</li> <li>Give your image a version name of 0.0.1 </li> <li>Lastly click Review + Create at the bottom. Once validation has passed, click Create.</li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.a-generalize-and-capture-windows-image/#post-image-creation-exercise","title":"Post Image Creation Exercise","text":"<p>In this exercise we will verify that the image is created and ready to be used. 1. In your Azure Portal, search for Compute Gallery using the search bar and select your new Compute Gallery 1. Click on the definition you created 1. You should now see the version number of the image created as well as verify the Provisioning State is Succeeded and Replication Status is Completed.</p>  <p>Congratulations! You have now finished this lab.</p> <p>\ud83d\udc48 Back to Virtual Machine labs</p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.b-generalize-and-capture-linux-image/","title":"Lab 3.b - Generalize and capture a Linux Image","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>This lab is part of a series of labs for Mastering the Virtual Machine Offers workshop. You should finish this lab before moving on to the next labs in this course.</p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.b-generalize-and-capture-linux-image/#generalize-and-capture","title":"Generalize and Capture","text":"<p>In this module, we will SSH into the VM and generalize the Virtual machine</p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.b-generalize-and-capture-linux-image/#ssh-into-the-virtual-machine","title":"SSH into the Virtual Machine","text":"<ol> <li>On your Azure Portal, navigate to the VM you just created. Click on Connect from the tabs on the left under Settings.</li> <li>In the SSH blade, paste the local path where the downloaded private key resides into the Private key path textbox. This will generate the command to SSH into the VM below. Copy this command.</li> <li>Example: when you paste [C:\\Users\\CurrentUser\\Downloads\\VM_key.pem] into textbox 3, command SSH -i [C:\\Users\\CurrentUser\\Downloads\\VM_key.pem] [user]@[ip] will be generated at textbox 4.</li> <li>Open command prompt locally and paste this copied command and press enter. Type in yes when prompted to authenticate the host.</li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.b-generalize-and-capture-linux-image/#generalize-the-vm","title":"Generalize the VM","text":"<ol> <li>In the SSH window, enter this command sudo waagent -deprovision+user</li> <li>Type Y to continue (you can add the -force parameter to the previous command to avoid the confirmation step).</li> <li>After the command completes, enter Exit to close the SSH client.</li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.b-generalize-and-capture-linux-image/#stop-virtual-machine","title":"Stop Virtual Machine","text":"<p>In the Azure portal, navigate to your VM in your resource group (RG) and de-allocate the VM (Stop).</p> <p>Your VM is now generalized and you can create a new VM using this VM disk.</p>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.b-generalize-and-capture-linux-image/#capture-the-image","title":"Capture the Image","text":"<p>In this module, we will capture an image from the Generalized VM and store it in a Compute Gallery. We will also define Image definitions within the Compute Gallery for organization.</p> <ol> <li>Navigate to the VM on Azure Portal. You will see that the VM has been stopped under VM Status</li> <li>Click on Capture from the options available on top</li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.b-generalize-and-capture-linux-image/#create-an-image","title":"Create an Image","text":"<ol> <li>Select a subscription from the dropdown menu</li> <li>For Resource Group, select the same resource group we created earlier VMworkshop-rg-YOUR_UNIQUE_STRING.</li> <li>Under Instance details, select the Yes, share it to a gallery as a VM image version radio button</li> <li>Under Gallery Details, select Create new and give it a name</li> <li>For Operating system state, select the Generalized radio button</li> <li>Click the Create new for Target VM image definition and give your definition a name and click OK</li> <li>Give your image a version name of 0.0.1 </li> <li>Lastly click Review + Create at the bottom. Once validation has passed, click Create.</li> </ol>"},{"location":"vm/Labs/lab3-generalize-and-capture-image/lab3.b-generalize-and-capture-linux-image/#post-image-creation-exercise","title":"Post Image Creation Exercise","text":"<p>In this exercise we will verify that the image is created and ready to be used. 1. In your Azure Portal, search for Compute Gallery using the search bar and select your new Compute Gallery 1. Click on the definition you created 1. You should now see the version number of the image created as well as verify the Provisioning State is Succeeded and Replication Status is Completed.</p>  <p>Congratulations! You have now finished this lab.</p> <p>\ud83d\udc48 Back to Virtual Machine labs</p>"},{"location":"vm/Labs/lab4-publish-your-vm-offer/","title":"Lab 4 - Publish your VM Offer","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>This lab is part of a series of labs for Mastering the Virtual Machine Offers workshop. You should finish this lab before moving on to the next labs in this course. </p>"},{"location":"vm/Labs/lab4-publish-your-vm-offer/#plan-overview","title":"Plan Overview","text":"<p>In this lab, we will complete the rest of the required setup on Partner Center to publish our offer. At this point, the only section that should need completion is Plan Overview. If you have any other sections pending completion, please refer to the previous labs. </p>"},{"location":"vm/Labs/lab4-publish-your-vm-offer/#permissions-for-shared-image-gallery","title":"Permissions for Shared Image Gallery","text":"<p>If your Partner Center account is the owner of the subscription hosting Azure Compute Gallery, nothing further is needed for permissions.</p> <p>If you are not the owner of the subscription that created the shared image gallery, you will need to assign appropriate permissions in order to share the image on Partner Center. Follow the below steps: 1. Go to the Azure Compute Gallery. 1. Select Access control (IAM) on the left panel. 1. Select Add, then Add role assignment.  1. The add role assignment window is shown. For Role, select Owner. 1. For Assign access to, select User, group, or service principal. 1. For Select, enter the Azure email of the person who will publish the image. Select Save.</p>"},{"location":"vm/Labs/lab4-publish-your-vm-offer/#create-a-plan-on-partner-center","title":"Create a plan on Partner center","text":"<ol> <li>Go to your Partner center account inside the Draft VM offer.</li> <li>Select the Plan overview section and click on New Plan. Give your plan a unique Plan Id and Plan name and hit Create.</li> <li>In the Plan listing tab, give your plan a name, description and summary.</li> <li>Open the Pricing and avaialbility tab next. </li> <li>Add the required market in the Edit Market section.</li> <li>Next select the Free plan under Price input options</li> <li>Switch the plan visibility to Private and put in your Tenant and Subscription Id and click on Save Draft</li> <li>Go to the Technical Configuration tab next and select the Operating System family based on your OS type</li> <li>Select the Vendor and OS friendly name.</li> <li>Select D2 Standard v3 from Recommended VM sizes.</li> <li>Select the appropriate properties depending on if you used extensions/cloud init </li> <li>Select the image type, Gen1/Gen2 based on the base image you selected in the VM Creation Lab</li> <li>Lastly add the image by putting a version number and selecting the image from the created image gallery. </li> </ol>"},{"location":"vm/Labs/lab4-publish-your-vm-offer/#review-and-publish","title":"Review and Publish","text":"<p>Finally click on Review and publish. Youshould now see green checkmarks against all the sections and you are now ready to publish. Click on Publish at the bottom to start the publishing process.</p>  <p>Congratulations! You have now finished this lab.</p> <p>\ud83d\udc48 Back to Virtual Machine labs</p>"},{"location":"vm/Labs/lab5-purchase-your-offer/","title":"Lab 5 - Purchase your Offer","text":"<p>\ud83d\udc48 Back to Virtual Machine labs</p>  <p>This lab is part of a series of labs for Mastering the Virtual Machine Offers workshop. You should finish this lab before moving on to the next labs in this course. </p>"},{"location":"vm/Labs/lab5-purchase-your-offer/#prerequisites-before-starting-this-lab","title":"Prerequisites before starting this lab","text":"<ol> <li>Access to the Azure Portal on the same tenant as is on Partner Center </li> <li>An active Azure Subscription to pay for resource creation</li> </ol>"},{"location":"vm/Labs/lab5-purchase-your-offer/#purchase-your-offer","title":"Purchase your Offer","text":"<ol> <li>Navigate to the offer link shown on Partner Center in the Offer Overview page</li> <li>Select the plan you want to purchase from the drop down list and click Create</li> <li>Under the Basics tab, configure the Subscription, Resource Group, Virtual Machine name and size based on your requirements (you may leave it default)</li> <li>Switch over to Disks tab and select Standard HDD for OS Disk Type. Leave the rest default and click on Review + create at the bottom</li> <li>ONce validation has passed, reverify the configuration details and click Create. This will start the deployment of your VM based on the plan selected.</li> <li>Once deployment has succeeded, navigate to the resource group that hosts the new vm and copt the Public IP of the Virtual Machine.</li> <li>Open a new tab and paste the copied Public IP. You will now see the deployed server page with the customized message you added in the Post Deployment script during VM creation.</li> </ol>  <p>Congratulations! You have now successfully completed this lab as well as purchased the offer the you created. You can now explore and create new images based on production requirements</p> <p>\ud83d\udc48 Back to Virtual Machine labs</p>"},{"location":"vm/Packer/","title":"Packer","text":"<p>This module explains how to setup Packer and run a simple deployment of a VM image with a server installed and finally create a VM using the created image.</p>  <p>You need to have Packer installed in order to run this exercise. You can find ways to download Packer here : Packer Download</p>  <p>Once you have packer downloaded, you can verify the installation by following the steps laid out here: Verify Packer Installation </p> <p>There are detailed steps available to start a Packer implementation on Azure, you will find them here: Microsoft Packer Documentation</p>"},{"location":"vm/Packer/#step-1-run-the-azresourceps1-script","title":"Step 1: Run the azresource.ps1 script","text":"<p>Run the below command to setup resources  <code>.\\az-resource.ps1</code> The az-resource.ps1 script will create 2 resource groups, a service principal, a shared image gallery and an image definition. The first resource group will be used to save the image version and the second to store temporary resources. You may change the naming conventions in the script to match your requirements.</p>"},{"location":"vm/Packer/#step-2-packer-build","title":"Step 2: Packer Build","text":"<p>Run the below command within the folder where you cloned the Packer script. We will execute the packerlinux.json file. </p> <p><code>packer build -var location=westus2 -var sig_gallery_resource_group=myResourceGroup -var sig_gallery_name=packergallery -var sig_image_name=packerimagedefn -var sig_image_version=1.0.0 .\\Packer\\packerlinux.json</code></p> <p>This will start creating the image in the image definition for use.</p>"}]}